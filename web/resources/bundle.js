$(".js-select-school-classroom").change(function(){var e=$("#StudentEnrollment_school_inep_id_fk").val();$.ajax({url:`${window.location.host}/?r=student/getclassrooms`,type:"POST",data:{inep_id:e}}).success(function(t){$("#StudentEnrollment_classroom_fk").empty(),$("#StudentEnrollment_classroom_fk").html(decodeHtml(t)),$("#StudentEnrollment_classroom_fk").prop("disabled",!1)})});$(function(){initDateFieldMaskAndValidation("#StudentEnrollment_transfer_date")});$(formIdentification+"name").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase());let t=$("#errorNameIcon"),i=$("#warningNameIcon"),a=$("#similarMessage");$(i).css("cursor","auto"),removeWarning(e,a,i),removeError(e,a,t),validateNamePerson($(e).val(),function(o){!o[0]&&$(e).val()!=""?(removeWarning(e,a,i),o[2]!=null?(warningMessage(e,o[2]),$(i).css("cursor","pointer"),addWarning(e,o[1],a,i)):(addError(e),$(t).css("display","inline-block"),$(a).attr("data-original-title",o[1]))):(removeError(e,a,t),o[0]&&$(e).val()!=""&&o[1]!=null?o[2]!=null?(warningMessage(e,o[2]),$(i).css("cursor","pointer"),addWarning(e,o[1],a,i)):(addError(e),$(t).css("display","inline-block"),$(a).attr("data-original-title",o[1])):removeWarning(e,a,i))})});$(formIdentification+"nis").focusout(function(){let e="#"+$(this).attr("id");!validateNis($(e).val())&&$(e).val()!=""?addError(e,"Apenas números são aceitos. Deve possuir 11 números"):removeError(e)});let T=function(e){return e.replace(/\D/g,"").length===11?"(00) 00000-0000":"(00) 0000-00009"},H={onKeyPress:function(e,t,i,a){i.mask(T.apply({},arguments),a)},placeholder:"(__) _____-____"};$(formIdentification+"responsable_telephone").mask(T,H);$(formIdentification+"responsable_telephone").focusout(function(){let e="#"+$(this).attr("id"),t=$(e).cleanVal();t.length!==11&&t.length!==10?addError(e,"Apenas números são aceitos. Deve possuir de 10 a 11 números."):removeError(e)});$(formIdentification+"responsable_cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"});$(formIdentification+"responsable_cpf").focusout(function(){let e="#"+$(this).attr("id");removeError(e),validateCpf($(e).cleanVal()).valid?removeError(e):addError(e,"Informe um CPF válido. Deve possuir apenas números.")});$(formDocumentsAndAddress+"civil_certification_term_number").focusout(function(){let e="#"+$(this).attr("id"),t=$("#termMessage"),i=$("#errorTermIcon");removeError(e),$(i).css("display","none"),$(t).attr("data-original-title",""),validateCivilCertificationTermNumber($(e).val(),function(a){!a[0]&&$(e).val()!=""?(addError(e),$(i).css("display","inline-block"),$(t).attr("data-original-title",a[1])):(removeError(e),$(i).css("display","none"),$(t).attr("data-original-title",""))})});$(formIdentification+"filiation_1_cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"});$(formIdentification+"filiation_1_cpf").focusout(function(){let e="#"+$(this).attr("id");validateCpf($(e).cleanVal()).valid?removeError(e):addError(e,"Informe um CPF válido. Deve possuir apenas números.")});$(formIdentification+"filiation_2_cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"});$(formIdentification+"filiation_2_cpf").focusout(function(){let e="#"+$(this).attr("id");validateCpf($(e).cleanVal()).valid?removeError(e):addError(e,"Informe um CPF válido. Deve possuir apenas números.")});$(formDocumentsAndAddress+"cns").focusout(function(){let e="#"+$(this).attr("id");validateCns($(e).val())?removeError(e):addError(e,"Apenas números são aceitos. Deve possuir 15 números")});initDateFieldMaskAndValidation(formIdentification+"birthday");initDateFieldMaskAndValidation(formIdentification+"filiation_1_birthday");initDateFieldMaskAndValidation(formIdentification+"filiation_2_birthday");$(formIdentification+"filiation").change(function(){let e=getUrlVars().simple;$(".js-disabled-finputs").hide(),$(formIdentification+"filiation").val()==1?($(".js-disabled-finputs").show(),$(formIdentification+"filiation_1").closest(".js-visibility-fname").show(),$(formIdentification+"filiation_2").closest(".js-visibility-fname").show()):($(".js-finput-clear").val(""),$(formIdentification+"filiation_1").closest(".js-visibility-fname").css("display",e==="1"?"none":"block"),$(formIdentification+"filiation_2").closest(".js-visibility-fname").css("display",e==="1"?"none":"block"))});$(formIdentification+"filiation").trigger("change");$(formIdentification+"filiation_1").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),removeError(e),validateNamePerson($(e).val(),function(t){t[0]?(removeError(e),$(formIdentification+"filiation_1").val()!==""&&$(formIdentification+"filiation_2").val()!==""&&$(formIdentification+"filiation_1").val()===$(formIdentification+"filiation_2").val()?($(formIdentification+"filiation_1").attr("value",""),addError(e,"O campo não deve ser igual à outra filiação.")):removeError(e)):($(e).attr("value",""),addError(e,t[1]))})});$(formIdentification+"filiation_2").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),removeError(e),validateNamePerson($(e).val(),function(t){t[0]?(removeError(e),$(formIdentification+"filiation_1").val()!==""&&$(formIdentification+"filiation_2").val()!==""&&$(formIdentification+"filiation_1").val()===$(formIdentification+"filiation_2").val()?($(formIdentification+"filiation_2").attr("value",""),addError(e,"O campo não deve ser igual à outra filiação.")):removeError(e)):($(e).attr("value",""),addError(e,t[1]))})});$(formIdentification+"nationality").change(function(){let e=".nationality-sensitive",t=e+".br",i=e+".no-br";const o=getUrlVars().simple==="1"?"none":"block";$(e).attr("disabled","disabled"),$(this).val()==3?($(i).removeAttr("disabled"),$(formIdentification+"edcenso_nation_fk").trigger("change").select2("readonly",!1),$(formIdentification+"edcenso_uf_fk").val("").trigger("change.select2"),$(formIdentification+"edcenso_city_fk").val("").trigger("change.select2"),$(formIdentification+"edcenso_uf_fk").closest(".js-change-required").css("display",o).find("label").removeClass("required").html("Estado"),$(formIdentification+"edcenso_city_fk").closest(".js-change-required").css("display",o).find("label").removeClass("required").html("Cidade")):$(this).val()==""?($(formIdentification+"edcenso_nation_fk").val(null).trigger("change").attr("disabled","disabled"),$(e).attr("disabled","disabled"),$(formIdentification+"edcenso_uf_fk").val("").trigger("change.select2").closest(".js-change-required").css("display",o).find("label").removeClass("required").html("Estado"),$(formIdentification+"edcenso_city_fk").val("").trigger("change.select2").closest(".js-change-required").css("display",o).find("label").removeClass("required").html("Cidade")):($(formIdentification+"edcenso_nation_fk").val(76).trigger("change").removeAttr("disabled").select2("readonly",!0),$(t).removeAttr("disabled"),$(formDocumentsAndAddress+"civil_certification").trigger("change"),$(this).val()=="1"?($(formIdentification+"edcenso_uf_fk").removeAttr("disabled").closest(".js-change-required").show().find("label").addClass("required").html("Estado *"),$(formIdentification+"edcenso_city_fk").removeAttr("disabled").closest(".js-change-required").show().find("label").addClass("required").html("Cidade")):($(formIdentification+"edcenso_uf_fk").val("").trigger("change.select2").attr("disabled","disabled").closest(".js-change-required").css("display",o).find("label").removeClass("required").html("Estado"),$(formIdentification+"edcenso_city_fk").val("").trigger("change.select2").attr("disabled","disabled").closest(".js-change-required").css("display",o).find("label").removeClass("required").html("Cidade")))});$(formIdentification+"nationality").trigger("change");let N=formIdentification+"deficiency",W=formIdentification+"deficiency_type_blindness",Y=formIdentification+"deficiency_type_low_vision",K=formIdentification+"deficiency_type_monocular_vision",X=formIdentification+"deficiency_type_deafness",ee=formIdentification+"deficiency_type_disability_hearing",te=formIdentification+"deficiency_type_deafblindness",ie=formIdentification+"deficiency_type_phisical_disability",ae=formIdentification+"deficiency_type_intelectual_disability",oe=formIdentification+"deficiency_type_multiple_disabilities",ne=formIdentification+"deficiency_type_autism",se=formIdentification+"deficiency_type_aspenger_syndrome",re=formIdentification+"deficiency_type_rett_syndrome",ce=formIdentification+"deficiency_type_childhood_disintegrative_disorder",le=formIdentification+"deficiency_type_gifted",x=W+","+Y+","+K+","+X+","+ee+","+te+","+le+","+ie+","+ae+","+oe+","+ne+","+se+","+re+","+ce,de=formIdentification+"resource_aid_lector",ue=formIdentification+"resource_aid_transcription",fe=formIdentification+"resource_interpreter_guide",he=formIdentification+"resource_interpreter_libras",me=formIdentification+"resource_lip_reading",$e=formIdentification+"resource_zoomed_test_18",P=formIdentification+"resource_zoomed_test_24",pe=formIdentification+"resource_braille_test",ve=formIdentification+"resource_proof_language",_e=formIdentification+"resource_cd_audio",be=formIdentification+"resource_video_libras",O=de+","+ue+","+fe+","+he+","+me+","+$e+","+P+","+pe+","+ve+","+_e+","+be,M=formIdentification+"resource_none",D;$(x).click(function(){$(this).attr("readonly")=="readonly"});$(O).click(function(){D=$(this).attr("readonly")=="readonly"});$(formIdentification+"deficiency_type_blindness").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_low_vision").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_monocular_vision").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafness").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):($(formIdentification+"deficiency_type_low_vision").removeAttr("disabled"),$(formIdentification+"deficiency_type_monocular_vision").removeAttr("disabled"),$(formIdentification+"deficiency_type_disability_hearing").is(":checked")||($(formIdentification+"deficiency_type_deafness").removeAttr("disabled"),$(formIdentification+"deficiency_type_deafblindness").removeAttr("disabled")))});$(formIdentification+"deficiency_type_low_vision").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):!$(formIdentification+"deficiency_type_monocular_vision").is(":checked")&&!$(formIdentification+"deficiency_type_deafness").is(":checked")&&($(formIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formIdentification+"deficiency_type_disability_hearing").is(":checked")||$(formIdentification+"deficiency_type_deafblindness").removeAttr("disabled"))});$(formIdentification+"deficiency_type_monocular_vision").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):!$(formIdentification+"deficiency_type_low_vision").is(":checked")&&!$(formIdentification+"deficiency_type_deafness").is(":checked")&&($(formIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formIdentification+"deficiency_type_disability_hearing").is(":checked")||$(formIdentification+"deficiency_type_deafblindness").removeAttr("disabled"))});$(formIdentification+"deficiency_type_deafness").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_disability_hearing").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):(!$(formIdentification+"deficiency_type_low_vision").is(":checked")&&!$(formIdentification+"deficiency_type_monocular_vision").is(":checked")&&($(formIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formIdentification+"deficiency_type_deafblindness").removeAttr("disabled")),$(formIdentification+"deficiency_type_disability_hearing").removeAttr("disabled"))});$(formIdentification+"deficiency_type_disability_hearing").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_deafness").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):$(formIdentification+"deficiency_type_blindness").is(":checked")||($(formIdentification+"deficiency_type_deafness").removeAttr("disabled"),!$(formIdentification+"deficiency_type_low_vision").is(":checked")&&!$(formIdentification+"deficiency_type_monocular_vision").is(":checked")&&$(formIdentification+"deficiency_type_deafblindness").removeAttr("disabled"))});$(formIdentification+"deficiency_type_deafblindness").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_low_vision").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_monocular_vision").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafness").removeAttr("checked","checked").attr("disabled","disabled"),$(formIdentification+"deficiency_type_disability_hearing").removeAttr("checked","checked").attr("disabled","disabled")):($(formIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formIdentification+"deficiency_type_low_vision").removeAttr("disabled"),$(formIdentification+"deficiency_type_monocular_vision").removeAttr("disabled"),$(formIdentification+"deficiency_type_deafness").removeAttr("disabled"),$(formIdentification+"deficiency_type_disability_hearing").removeAttr("disabled"))});$(formIdentification+"deficiency_type_intelectual_disability").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_gifted").removeAttr("checked","checked"),$(formIdentification+"deficiency_type_gifted").add().attr("disabled","disabled")):$(formIdentification+"deficiency_type_gifted").add().removeAttr("disabled","disabled")});$(formIdentification+"deficiency_type_gifted").on("click",function(){$(this).is(":checked")?($(formIdentification+"deficiency_type_intelectual_disability").removeAttr("checked","checked"),$(formIdentification+"deficiency_type_intelectual_disability").add().attr("disabled","disabled")):$(formIdentification+"deficiency_type_intelectual_disability").add().removeAttr("disabled","disabled")});$("#resource_type input").change(function(){D&&$(this).attr("checked",!1);let e=!$(this).is(":checked");$("#resource_type "+M).attr("checked",e);let t=$("#resource_type "+rZoom16),i=$("#resource_type "+rZoom20),a=$("#resource_type "+P);t.attr("readonly",!1),i.attr("readonly",!1),a.attr("readonly",!1),t.is(":checked")&&($(i).attr("checked",!1).attr("readonly",!0),$(a).attr("checked",!1).attr("readonly",!0)),i.is(":checked")&&($(t).attr("checked",!1).attr("readonly",!0),$(a).attr("checked",!1).attr("readonly",!0)),a.is(":checked")&&($(t).attr("checked",!1).attr("readonly",!0),$(i).attr("checked",!1).attr("readonly",!0))});$("#resource_type "+M).change(function(){D&&$(this).attr("checked",!1),$(this).is(":checked")&&$(O).attr("checked",!1)});$(document).on("change",".linked-deficiency",function(e,t){t===void 0&&($(".linked-deficiency:checked").length>1?$(formIdentification+"deficiency_type_multiple_disabilities").prop("checked","checked"):$(formIdentification+"deficiency_type_multiple_disabilities").removeAttr("checked"))});$(N).change(function(){$(this).is(":checked")?($(x).removeAttr("disabled"),$("#StudentIdentification_deficiencies").parent(".js-change-required").show().find("label").addClass("required"),$("#StudentIdentification_deficiency_type_blindness").trigger("change",[!0]),$(".resources-container").show()):($(x).attr("disabled","disabled").removeAttr("checked"),$("#StudentIdentification_deficiencies").parent(".js-visibility-deficiencies").hide(),$("#StudentIdentification_resource_aid_lector").closest(".js-visibility-dresource").hide(),$(".resources-container").hide(),$(".resources-container input[type=checkbox]").prop("checked",!1))});$(N).trigger("change");$(".deficiencies-container input[type=checkbox]").change(function(){$(".deficiencies-container input[type=checkbox]").not("#StudentIdentification_deficiency_type_gifted").is(":checked")?$(".resources-container").find(".control-label").addClass("required").html("Recursos requeridos em avaliações do INEP (Prova Brasil, SAEB, outros) *"):$(".resources-container").find(".control-label").removeClass("required").html("Recursos requeridos em avaliações do INEP (Prova Brasil, SAEB, outros)")});$(".deficiencies-container input[type=checkbox]").trigger("change",[!0]);$(formDocumentsAndAddress+"address").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateStudentAddress($(e).val())?removeError(e):addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 1.")});$(formDocumentsAndAddress+"number").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateStudentAddressNumber($(e).val())?removeError(e):addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 1.")});$(formDocumentsAndAddress+"complement").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateStudentAddressComplement($(e).val())?removeError(e):addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 1.")});$(formDocumentsAndAddress+"neighborhood").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateStudentAddressNeighborhood($(e).val())?removeError(e):addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 1.")});$(formDocumentsAndAddress+"cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"});$(formDocumentsAndAddress+"cpf").focusout(function(){let e="#"+$(this).attr("id"),t=$("#cpfMessage"),i=$("#errorCPFIcon");removeError(e),$(i).css("display","none"),$(t).attr("data-original-title",""),validateCpf($(e).cleanVal()).valid?removeError(e):addError(e,"Informe um CPF válido. Deve possuir apenas números."),existsStudentWithCPF($(e).cleanVal(),function(o){!o[0]&&$(e).val()!=""?(addError(e),$(i).css("display","inline-block"),$(t).attr("data-original-title",o[1])):(removeError(e),$(i).css("display","none"),$(t).attr("data-original-title",""))})});$(formDocumentsAndAddress+"cep").mask("00000-000",{placeholder:"_____-___"});$(formDocumentsAndAddress+"cep").focusout(function(){let e="#"+$(this).attr("id");validateCEP($(e).cleanVal())?removeError(e):addError(e,"Informe um CEP cadastrado nos correios. Apenas números são aceitos. Deve possuir no máximo 8 caracteres.")});$(formDocumentsAndAddress+"rg_number").focusout(function(){let e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateRG($(e).val())?removeError(e):addError(e,"Informe um RG válido.")});$(formDocumentsAndAddress+"civil_register_enrollment_number").removeAttr("maxlength").mask("000000.00.00.0000.0.00000.000.0000000-XX",{placeholder:"______.__.__.____._._____.___._______-__",translation:{X:{pattern:/[xX0-9]/}}});$(formDocumentsAndAddress+"civil_register_enrollment_number").focusout(function(){let e="#"+$(this).attr("id"),t=$("#registerMessage"),i=$("#registerIcon");F($(formDocumentsAndAddress+"civil_register_enrollment_number")),validateCivilRegisterEnrollmentNumber($(e).val(),function(a){!a[0]&&$(e).val()!=""?(addError(e),$(i).css("display","inline-block"),$(t).attr("data-original-title",a[1])):(removeError(e),$(i).css("display","none"),$(t).attr("data-original-title",""))})});function F(e){$(e).val($(e).val().toUpperCase());let t="#"+$(e).attr("id"),i=$("#registerMessage"),a=$("#registerIcon"),o=$(e).cleanVal(),n=!0;if(o!==""){if(o.length<32){let c="O campo, quando preenchido, deve ter 32 caracteres.";addError(t),$(a).css("display","inline-block"),$(i).attr("data-original-title",c),n=!1}if(n&&o.substring(10,14)>new Date().getFullYear()){let r="O ano de registro da certidão nova (dígitos de 11 a 14) não pode ser posterior ao ano corrente.";addError(t),$(a).css("display","inline-block"),$(i).attr("data-original-title",r),n=!1}if(n){let c=o.substring(10,14);var s=$("#initial_date_picker").val();let r=s.replace(/\//g,"");if(r!==""&&r.length===8){let l=r.substring(4,8);if(c<l){let d="O ano de registro da certidão nova (dígitos de 11 a 14) não pode ser anterior ao ano de nascimento.";addError(t),$(a).css("display","inline-block"),$(i).attr("data-original-title",d),n=!1}}}}return n&&(removeError(t),$(a).css("display","none"),$(i).attr("data-original-title","")),n}$(formDocumentsAndAddress+"civil_certification").change(function(){let e=$(".js-hidden-oldDocuments-fields"),t=$(".js-hidden-newDocument-field");$(this).val()==""?(e.attr("disabled","disabled").hide(),t.attr("disabled","disabled").hide()):(e.removeAttr("disabled").show(),t.removeAttr("disabled").show(),$(this).val()==2?e.val("").attr("disabled","disabled").hide():t.attr("disabled","disabled").hide())});$(formDocumentsAndAddress+"rg_number_expediction_date, "+formDocumentsAndAddress+"civil_certification_date").mask("99/99/9999",{placeholder:"dd/mm/aaaa"});$(formDocumentsAndAddress+"rg_number_expediction_date, "+formDocumentsAndAddress+"civil_certification_date").focusout(function(){let e="#"+$(this).attr("id"),t=stringToDate($(e).val()),i=stringToDate($(formIdentification+"birthday").val());!validateDate($(e).val())||i.asianStr>t.asianStr?addError(e,"Informe uma data válida no formato Dia/Mês/Ano. Não pode ser superior a data de nascimento do aluno."):removeError(e)});$(formIdentification+"responsable").on("change",function(){$(this).val()==2?$("#responsable_name").show():$("#responsable_name").hide()});$(formEnrollment+"school_admission_date").mask("00/00/0000",{placeholder:"dd/mm/aaaa"});$(formEnrollment+"school_admission_date").focusout(function(){let e="#"+$(this).attr("id"),t=stringToDate($(formEnrollment+"school_admission_date").val());(!validateDate($(formEnrollment+"school_admission_date").val())||!validateYear(t.year))&&$(e).val()!=""?addError(e,"Informe uma data válida no formato Dia/Mês/Ano. Não pode ser superior a data atual."):removeError(e)});$(document).on("change",".vaccine-checkbox",function(){$(".vaccines-container").find(".vaccine-checkbox[code=c19du]").is(":checked")?($(".vaccines-container").find(".vaccine-checkbox[code=c19pd]").prop("checked",!1).attr("disabled","disabled"),$(".vaccines-container").find(".vaccine-checkbox[code=c19sd]").prop("checked",!1).attr("disabled","disabled")):$(".vaccines-container").find(".vaccine-checkbox[code=c19pd]").removeAttr("disabled"),$(".vaccines-container").find(".vaccine-checkbox[code=c19pd]").is(":checked")?($(".vaccines-container").find(".vaccine-checkbox[code=c19du]").prop("checked",!1).attr("disabled","disabled"),$(".vaccines-container").find(".vaccine-checkbox[code=c19sd]").removeAttr("disabled")):($(".vaccines-container").find(".vaccine-checkbox[code=c19sd]").prop("checked",!1).attr("disabled","disabled"),$(".vaccines-container").find(".vaccine-checkbox[code=c19du]").removeAttr("disabled"))});$(".vaccine-checkbox").trigger("change");$(".save-student").click(function(){let e=!1,t="";$("#StudentIdentification_bf_participator").is(":checked")&&$("#StudentDocumentsAndAddress_nis").val()==""&&(e=!0,t+="O campo <b>NIS</b> é obrigatório para alunos participantes do Bolsa Família.<br>"),$("#errorNameIcon").css("display")=="inline-block"&&(e=!0,t+="Corrija o campo <b>Nome</b>.<br>"),$("#StudentIdentification_responsable_cpf_error").length&&(e=!0,t+="Corrija o campo <b>CPF do Responsável</b>.<br>"),$("#errorCPFIcon").css("display")=="inline-block"&&(e=!0,t+="Corrija o campo <b>Nº do CPF</b>.<br>"),$("#errorTermIcon").css("display")=="inline-block"&&(e=!0,t+="Corrija o campo <b>Nº do Termo</b>.<br>"),$("#registerIcon").css("display")=="inline-block"&&(e=!0,t+="Corrija o campo <b>Nº da matrícula (Registro Civil - Certidão Nova)</b>.<br>"),$("#StudentIdentification_name").val()===""&&(e=!0,t+="Campo <b>Nome</b> é obrigatório.<br>"),$("#StudentIdentification_birthday").val()===""&&(e=!0,t+="Campo <b>Data de Nascimento</b> é obrigatório.<br>"),$("#StudentIdentification_sex").val()===""&&(e=!0,t+="Campo <b>Sexo</b> é obrigatório.<br>"),$("#StudentIdentification_color_race").val()===""&&(e=!0,t+="Campo <b>Cor / Raça</b> é obrigatório.<br>"),$("#StudentIdentification_filiation").val()===""&&(e=!0,t+="Campo <b>Filiação</b> é obrigatório.<br>"),$("#StudentIdentification_nationality").val()===""&&(e=!0,t+="Campo <b>Nacionalidade</b> é obrigatório.<br>"),$("#StudentIdentification_edcenso_nation_fk").val()===""&&(e=!0,t+="Campo <b>País de origem</b> é obrigatório.<br>"),$("#StudentIdentification_nationality").val()==="1"&&$("#StudentIdentification_edcenso_uf_fk").val()===""&&(e=!0,t+="Campo <b>Estado</b> é obrigatório.<br>"),$("#StudentIdentification_nationality").val()==="1"&&$("#StudentIdentification_edcenso_city_fk").val()===""&&(e=!0,t+="Campo <b>Cidade</b> é obrigatório.<br>"),$("#StudentDocumentsAndAddress_residence_zone").val()===""&&(e=!0,t+="Campo <b>Localização / Zona de residência</b> é obrigatório.<br>"),sedspEnable&&($("#StudentDocumentsAndAddress_edcenso_uf_fk").val()===""&&(e=!0,t+="Campo <b>Estado</b> é obrigatório.<br>"),$("#StudentDocumentsAndAddress_edcenso_city_fk").val()===""&&(e=!0,t+="Campo <b>Cidade</b> é obrigatório.<br>"),$("#StudentDocumentsAndAddress_neighborhood").val()===""&&(e=!0,t+="Campo <b>Bairro / Povoado</b> é obrigatório.<br>"),$("#StudentDocumentsAndAddress_cep").val()===""&&(e=!0,t+="Campo <b>CEP</b> é obrigatório.<br>"),$("#StudentDocumentsAndAddress_address").val()===""&&(e=!0,t+="Campo <b>Endereço</b> é obrigatório.<br>"),$("#StudentDocumentsAndAddress_number").val()===""&&(e=!0,t+="Campo <b>N°</b> é obrigatório.<br>"),$("#StudentDocumentsAndAddress_number").prop("required",!0)),$("#StudentIdentification_deficiency").is(":checked")&&!$(".deficiencies-container input[type=checkbox]:checked").length&&(e=!0,t+="Como o campo <b>Deficiência</b> foi preenchido, deve-se preencher pelo menos um <b>Tipo de deficiência</b>.<br>"),$(".deficiencies-container input[type=checkbox]").not("#StudentIdentification_deficiency_type_gifted").is(":checked")&&!$(".resources-container input[type=checkbox]:checked").length&&(e=!0,t+="Quando o campo <b>Tipos de Deficiência</b> (exceto a última opção) for preenchido, o campo <b>Recursos requeridos em avaliações do INEP (Prova Brasil, SAEB, outros)</b> se torna obrigatório. Selecione ao menos uma opção.<br>"),$("#StudentDocumentsAndAddress_residence_zone").val()==="1"&&$("#StudentDocumentsAndAddress_diff_location").val()==="1"&&(e=!0,t+="Quando o campo <b>Localização / Zona de residência</b> é selecionado 'Urbano', o campo <b>Localização Diferenciada</b> não pode ser uma área de assentamento.<br>"),$("#StudentIdentification_filiation").val()==="1"&&$("#StudentIdentification_filiation_1").val()===""&&$("#StudentIdentification_filiation_2").val()===""&&(e=!0,t+="Quando o campo <b>Filiação</b> é selecionado como 'Pai e/ou Mãe', pelo menos um dos campos <b>Nome Completo da Filiação</b> ou <b>Nome Completo do Pai</b> devem ser preenchidos.<br>"),$("#StudentEnrollment_public_transport").is(":checked")&&$("#StudentEnrollment_transport_responsable_government").val()===""&&(e=!0,t+="Quando o campo <b>Transporte escolar público</b> é marcado, o campo <b>Poder público responsável pelo transporte escolar</b> é obrigatório.<br>"),$("#StudentEnrollment_public_transport").is(":checked")&&!$("#transport_type input[type=checkbox]:checked").length&&(e=!0,t+="Quando o campo <b>Transporte escolar público</b> é marcado, o campo <b>Tipo de Transporte</b> é obrigatório. Selecione ao menos uma opção<br>"),$("#StudentEnrollment_public_transport").is(":checked")&&$("#StudentEnrollment_vehicle_type_van").is(":checked")&&$("#StudentEnrollment_vehicle_type_microbus").is(":checked")&&$("#StudentEnrollment_vehicle_type_bus").is(":checked")&&$("#StudentEnrollment_vehicle_type_bike").is(":checked")&&$("#StudentEnrollment_vehicle_type_animal_vehicle").is(":checked")&&$("#StudentEnrollment_vehicle_type_other_vehicle").is(":checked")&&(e=!0,t+="Não pode marcar todos os seguintes campos: <b>Van / Kombis</b>, <b>Microônibus</b>, <b>Ônibus</b>, <b>Bicicleta</b>, <b>Tração animal</b> e <b>Rodoviário - Outro</b>. Desmarque algumas dessas opções.<br>"),$("#StudentEnrollment_public_transport").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_5").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_5_15").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_15_35").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_35").is(":checked")&&(e=!0,t+="Não pode marcar todos os seguintes campos: <b>Embarcação - Capacidade de até 5 alunos</b>, <b>Embarcação - Entre 5 a 15 alunos</b>, <b>Embarcação - Entre 15 a 35 alunos</b> e <b>Embarcação - Acima de 35 alunos</b>. Desmarque algumas dessas opções.<br>"),F($(formDocumentsAndAddress+"civil_register_enrollment_number"))||(e=!0,t+="Informe um <b>Nº de matrícula (Registro Civil - Certidão nova)</b> válido."),e?($("html, body").animate({scrollTop:0},"fast"),$(this).closest("form").find(".student-alert").addClass("alert-error").removeClass("alert-warning").removeClass("alert-success").html(t).show()):($(this).closest("form").find(".student-alert").hide(),$(formIdentification+"responsable_telephone").unmask(),$(formIdentification+"responsable_cpf").unmask(),$(formIdentification+"filiation_1_cpf").unmask(),$(formIdentification+"filiation_2_cpf").unmask(),$(formDocumentsAndAddress+"civil_register_enrollment_number").unmask(),$(formDocumentsAndAddress+"cpf").unmask(),$(formDocumentsAndAddress+"cep").unmask(),$("#student input").removeAttr("disabled"),$("#student select").removeAttr("disabled").trigger("change.select2"),$(this).closest("form").submit())});var ge=getUrlVars().simple;if(ge=="1"){var y=["tab-student-identify","tab-student-affiliation","tab-student-address","tab-student-enrollment","tab-student-health"];ye()}else var y=["tab-student-identify","tab-student-affiliation","tab-student-documents","tab-student-address","tab-student-enrollment","tab-student-health"];function ye(){$(".js-change-number-2").html("2"),$(".js-change-number-3").html("3"),$(".js-change-number-4").html("4"),$(".js-change-number-5").html("5")}function A(e){var t=$(".js-tab-control li.active"),i=$("div .active"),a=y.length-1;e==0?($(".prev").hide(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide()):e==a?($(".prev").show(),$(".next").hide(),$(".last").show()):($(".prev").show(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide()),newTab=y[e],t.removeClass("active"),i.removeClass("active"),newPane=newTab.substring(4).toString(),$("#"+newTab).addClass("active"),$("#"+newPane).addClass("active"),$("html, body").animate({scrollTop:0},"fast")}function ke(){var e=$(".js-tab-control li.active"),t=y.indexOf(e.attr("id"));A(t+1)}function Ie(){var e=$(".js-tab-control li.active"),t=y.indexOf(e.attr("id"));A(t-1)}function we(e){var t=e.attr("id"),i=y.indexOf(t);A(i)}$(".js-tab-control li a").click(function(){var e=$(this).parent();we(e)});$(".next").click(function(){ke()});$(".prev").click(function(){Ie()});window.location.search.includes("update")?$(".last").css("display","flex"):$(".last").css("display","none");$(document).ready(function(){$("#others-check").is(":checked")?$(".others-text-box").show():$(".others-text-box").hide(),$("#show-student-civil-name").is(":checked")&&($(".student-civil-name").show(),$("#show-student-civil-name-box").hide()),$("#new-enrollment-button").click(function(){$(".new-enrollment-form").css("display")=="none"?($(".new-enrollment-form").show(),$("#new-enrollment-button").text("Fechar formulário")):($(".new-enrollment-form").hide(),$("#new-enrollment-button").text("Adicionar Matrícula"))}),Se().simple=="1"&&($("#tab-student-documents").hide(),$(".js-hide-not-required").hide(),$("#StudentEnrollment_classroom_fk").closest(".js-hide-not-required").show()),$(".tab-student").show(),$(".tab-content").show(),$(formIdentification+"deficiency_type_blindness").is(":checked")&&($(formIdentification+"deficiency_type_low_vision").attr("disabled","disabled"),$(formIdentification+"deficiency_type_monocular_vision").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafness").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").attr("disabled","disabled")),$(formIdentification+"deficiency_type_low_vision").is(":checked")&&($(formIdentification+"deficiency_type_blindness").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").attr("disabled","disabled")),$(formIdentification+"deficiency_type_monocular_vision").is(":checked")&&($(formIdentification+"deficiency_type_blindness").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").attr("disabled","disabled")),$(formIdentification+"deficiency_type_deafness").is(":checked")&&($(formIdentification+"deficiency_type_blindness").attr("disabled","disabled"),$(formIdentification+"deficiency_type_disability_hearing").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").attr("disabled","disabled")),$(formIdentification+"deficiency_type_disability_hearing").is(":checked")&&($(formIdentification+"deficiency_type_deafness").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafblindness").attr("disabled","disabled")),$(formIdentification+"deficiency_type_deafblindness").is(":checked")&&($(formIdentification+"deficiency_type_blindness").attr("disabled","disabled"),$(formIdentification+"deficiency_type_low_vision").attr("disabled","disabled"),$(formIdentification+"deficiency_type_monocular_vision").attr("disabled","disabled"),$(formIdentification+"deficiency_type_deafness").attr("disabled","disabled"),$(formIdentification+"deficiency_type_disability_hearing").attr("disabled","disabled")),$(formIdentification+"deficiency_type_intelectual_disability").is(":checked")&&$(formIdentification+"deficiency_type_gifted").attr("disabled","disabled"),$(formIdentification+"deficiency_type_gifted").is(":checked")&&$(formIdentification+"deficiency_type_intelectual_disability").attr("disabled","disabled"),$(".ui-accordion-header a").click(function(t){t.preventDefault();let i=$(this).attr("href");window.location.href=i}),$(".ui-accordion-header").click(function(t){$(this).hasClass("ui-accordion-header-active")?$(this).find($(".accordion-arrow-icon")).removeClass("rotate"):$(this).find($(".accordion-arrow-icon")).addClass("rotate")}),$(function(){$("#accordion").accordion({active:!1,collapsible:!0,icons:!1,heightStyle:"content",animate:600})})});$(".heading-buttons").css("width",$("#content").width());function Se(){return{}}$(document).on("change",".resources-container input[type=checkbox]",function(){$(this).attr("id")!=="StudentIdentification_resource_none"?$("#StudentIdentification_resource_none").prop("checked",!1):$(".resources-container input[type=checkbox]").not("#StudentIdentification_resource_none").prop("checked",!1)});$(document).on("change","#StudentEnrollment_public_transport",function(){$(this).is(":checked")?$("#transport_responsable, #transport_type").show().find(".control-label").addClass("required"):($("#StudentEnrollment_transport_responsable_government").val("").trigger("change.select2"),$("#transport_type input[type=checkbox]:checked").prop("checked",!1),$("#transport_responsable, #transport_type").hide())});$(document).on("change","#others-check",function(){$(this).is(":checked")?$(".others-text-box").show():$(".others-text-box").hide()});$(document).on("change","#show-student-civil-name",function(){$(this).is(":checked")&&($(".student-civil-name").show(),$("#show-student-civil-name-box").hide())});$("#copy-gov-id").click(function(){let e=$("#StudentIdentification_gov_id").val();navigator.clipboard.writeText(e),$("#copy-message").text("Copiado!").fadeIn().delay(1e3).fadeOut()});$("#StudentEnrollment_public_transport").trigger("change");$(".update-student-from-sedsp").click(function(){$("#importStudentFromSEDSP").modal("show")});$(".import-student-button").click(function(){$("#importStudentFromSEDSP").find("form").submit()});$(document).ready(function(){$("#showPassword").click(function(){var e=$("#LoginForm_password");e.attr("type")==="password"?(e.attr("type","text"),$(this).removeClass("t-icon-eye").addClass("t-icon-eye_hash")):(e.attr("type","password"),$(this).removeClass("t-icon-eye_hash").addClass("t-icon-eye"))})});$(document).on("click",".info-list",function(){$.ajax({type:"GET",url:loadMoreLogs,data:{date:$(".log-date").last().text()},success:function(e){$(".no-recent-activitive").remove(),$(e).insertBefore(".info-list"),$(".log").length>=$(".eggs").find(".log-widget").attr("total")&&$(".info-list").hide(),$(".log").each(function(){$(this).find(".t-info_positive").html("<i></i>"+changeNameLength($(this).find(".t-info_positive").text(),100))})}})});$(document).on("click",".warn-list",function(){$.ajax({type:"POST",url:loadMoreWarns,data:{visibleWarningsCount:$(".warn-div").length},success:function(e){e=JSON.parse(e),$(".no-recent-warnings").remove(),$(e.html).insertBefore(".warn-list"),$(".warn-div").length>=$(".eggs").find(".warn-widget").attr("total")&&$(".warn-list").hide()}})});$(document).ready(function(){$(".log").each(function(){$(this).find(".glyphicons").html("<i></i>"+changeNameLength($(this).find(".glyphicons").text(),100))}),$(".logs").length>=$(".eggs").find(".log-widget").attr("total")&&$(".info-list").hide(),$(".board-msg").attr("version")!==E("tag_version")&&$(".board-msg").show(),$(".warn-div").length>=$(".eggs").find(".warn-widget").attr("total")&&$(".warn-list").hide(),$(".board-msg").attr("version")!==E("tag_version")&&$(".board-msg").show()});function E(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var o=i[a];o.charAt(0)==" ";)o=o.substring(1,o.length);if(o.indexOf(t)==0)return o.substring(t.length,o.length)}return null}$("#initial_date_picker").change(function(){var e="#"+$(this).attr("id"),t=stringToDate($(this).val());!validateDate($(this).val())||!(t.year>=actual_year-1&&t.year<=actual_year)?($(this).attr("value",""),addError(e,"A data não pode ser anterior a "+(actual_year-1))):removeError(e)});$(formIdentification+"final_date").mask("99/99/9999");$(formIdentification+"final_date").focusout(function(){var e="#"+$(this).attr("id");final_date=stringToDate($(formIdentification+"final_date").val()),!validateDate($(formIdentification+"final_date").val())||!(final_date.year>=actual_year&&final_date.year<=actual_year+1)||!(final_date.asianStr>initial_date.asianStr)?($(formIdentification+"final_date").attr("value",""),addError(e,"A data deve ser válida, no formato Dia/Mês/Ano e superior a data inicial.")):removeError(e)});$(formIdentification+"name").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateSchoolName($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 4."))});$(formIdentification+"cep, "+formIdentification+"inep_id").focusout(function(){var e="#"+$(this).attr("id");validateCEP($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"Informe um CEP cadastrado nos correios. Apenas números são aceitos. Deve possuir no máximo 8 caracteres."))});$(formIdentification+"ddd").focusout(function(){var e="#"+$(this).attr("id");validateDDD($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"Apenas números são aceitos. Deve possuir 2 caracteres."))});$(formIdentification+"address").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateAddress($(e).val(),100)?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -."))});$(formIdentification+"address_number").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateAddress($(e).val(),10)?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -."))});$(formIdentification+"address_neighborhood").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateAddress($(e).val(),50)?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -."))});$(formIdentification+"phone_number").focusout(function(){var e="#"+$(this).attr("id");validatePhone($(e).val(),9)?removeError(e):($(e).attr("value",""),addError(e,"Apenas números são aceitos. Não pode ter todos os algarismos iguais. Deve ter 8 ou 9 números. Se houver 9 números, o primeiro algarismo deve ser o dígito 9."))});$(formIdentification+"public_phone_number").focusout(function(){var e="#"+$(this).attr("id");validatePhone($(e).val(),8)?removeError(e):($(e).attr("value",""),addError(e,"Apenas números são aceitos. Não pode ter todos os algarismos iguais. Deve ter 8 ou 9 números. Se houver 9 números, o primeiro algarismo deve ser o dígito 9."))});$(formIdentification+"other_phone_number").focusout(function(){var e="#"+$(this).attr("id");validatePhone($(e).val(),9)?removeError(e):($(e).attr("value",""),addError(e,"Apenas números são aceitos. Não pode ter todos os algarismos iguais. Deve ter 8 ou 9 números. Se houver 9 números, o primeiro algarismo deve ser o dígito 9."))});$(formIdentification+"email").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateEmail($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"Digite um e-mail válido."))});initDateFieldMaskAndValidation("#ManagerIdentification_birthday_date");$("#ManagerIdentification_cpf").focusout(function(){var e="#"+$(this).attr("id");validateCpf($(e).cleanVal()).valid?removeError(e):addError(e,"Informe um CPF válido. Deve possuir apenas números.")});$("#ManagerIdentification_name").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateNamePerson($(e).val(),function(t){t[0]?removeError(e):($(e).attr("value",""),addError(e,t[1]))})});$("#ManagerIdentification_email").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateEmail($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"Digite um e-mail válido."))});$(formStructure+"used_classroom_count, "+formStructure+"classroom_count, "+formStructure+"equipments_tv , "+formStructure+"equipments_vcr , "+formStructure+"equipments_dvd , "+formStructure+"equipments_satellite_dish , "+formStructure+"equipments_copier , "+formStructure+"equipments_overhead_projector , "+formStructure+"equipments_printer , "+formStructure+"equipments_stereo_system , "+formStructure+"equipments_data_show , "+formStructure+"equipments_fax , "+formStructure+"equipments_camera , "+formStructure+"equipments_computer, "+formStructure+"administrative_computers_count, "+formStructure+"student_computers_count, "+formStructure+"employees_count ").focusout(function(){var e="#"+$(this).attr("id");validateCount($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"Não pode ser preenchido com zero. Caso a escola não tenha o equipamento, o campo deve vir vazio"))});$(formStructure+"operation_location input[type=checkbox]").change(function(){var e="#"+$(formStructure+"operation_location").attr("id");$("#SchoolStructure_operation_location input[type=checkbox]:checked").length==0?addError(e,"Informe ao menos um local de funcionamento."):removeError(e)});$(formStructure+"operation_location").focusout(function(){var e="#"+$(this).attr("id");$("#SchoolStructure_operation_location input[type=checkbox]:checked").length==0?addError(e,"Informe ao menos um local de funcionamento."):removeError(e)});$(formStructure+"native_education").change(function(){$(formStructure+"native_education:checked").length==1?($("#native_education_language").show(),$("#native_education_lenguage_none input").attr("disabled","disabled"),$("#native_education_lenguage_some input").removeAttr("disabled")):($("#native_education_language").hide(),$("#native_education_lenguage_none input").val(null).removeAttr("disabled"),$("#native_education_lenguage_some input").attr("disabled","disabled"))});$(formStructure+"native_education").trigger("change");$(".save-school-button").click(function(){var e=!1,t="";$("#SchoolIdentification_name").val()===""&&(e=!0,t+="Campo <b>Nome</b> é obrigatório.<br>"),$("input#SchoolIdentification_inep_id").val()===""&&(e=!0,t+="Campo <b>Código do Inep</b> é obrigatório.<br>"),$("#SchoolIdentification_administrative_dependence").val()===""&&(e=!0,t+="Campo <b>Dependencia de Administrativa</b> é obrigatório.<br>"),$("#SchoolIdentification_regulation").val()===""&&(e=!0,t+="Campo <b>Regulamentação</b> é obrigatório.<br>"),$("#SchoolIdentification_linked_organ input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Órgãos que a escola está vinculadao</b> é obrigatório. Selecione ao menos uma opção<br>"),$("#SchoolIdentification_regulation_organ input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Esfera do Órgão regulador</b> é obrigatório. Selecione ao menos uma opção<br>"),$("#SchoolIdentification_edcenso_uf_fk").val()===""&&(e=!0,t+="Campo <b>Estado</b> é obrigatório.<br>"),$("#SchoolIdentification_edcenso_city_fk").val()===""&&(e=!0,t+="Campo <b>Cidade</b> é obrigatório.<br>"),$("#SchoolIdentification_edcenso_district_fk").val()===""&&(e=!0,t+="Campo <b>Distrito</b> é obrigatório.<br>"),$("#SchoolIdentification_location").val()===""&&(e=!0,t+="Campo <b>Localização</b> é obrigatório.<br>"),$("#SchoolIdentification_id_difflocation").val()===""&&(e=!0,t+="Campo <b>Localização diferenciada</b> é obrigatório.<br>"),$("#SchoolIdentification_offer_or_linked_unity").val()===""&&(e=!0,t+="Campo <b>Unidade vinculada de Educação Básica ou ofertante de Ensino Superior</b> é obrigatório.<br>"),$("#SchoolStructure_operation_location input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Local de Funcionamento</b> é obrigatório. Selecione ao menos uma opção.<br>"),($("#SchoolIdentification_regulation").val()=="1"||$("#SchoolIdentification_regulation").val()=="2")&&!$("#SchoolIdentification_regulation_organ input[type=checkbox]:checked").length&&(e=!0,t+="Campo <b>Esfera do Órgão Regulador</b> é obrigatório. Selecione ao menos uma opção.<br>"),($("#SchoolIdentification_administrative_dependence").val()=="1"||$("#SchoolIdentification_administrative_dependence").val()=="2"||$("#SchoolIdentification_administrative_dependence").val()=="3")&&!$("#SchoolIdentification_linked_organ input[type=checkbox]:checked").length&&(e=!0,t+="Campo <b>Órgão ao qual a escola pública está vinculada</b> é obrigatório. Selecione ao menos uma opção.<br>"),$("#SchoolIdentification_offer_or_linked_unity").val()==="1"&&$("#SchoolIdentification_inep_head_school").val()===""&&(e=!0,t+="Campo <b>Código da Escola Sede</b> é obrigatório.<br>"),$("#SchoolIdentification_offer_or_linked_unity").val()==="2"&&$("#SchoolIdentification_ies_code").val()===""&&(e=!0,t+="Campo <b>Código da IES</b> é obrigatório.<br>"),$("#SchoolIdentification_inep_head_school").val()!==""&&$("#SchoolIdentification_ies_code").val()!==""&&(e=!0,t+="Apenas um dos campos <b>Código da Escola Sede</b> e <b>Código da IES</b> deve ser preenchido.<br>"),($("#SchoolIdentification_phone_number").val()!==""||$("#SchoolIdentification_other_phone_number").val()!=="")&&$("#SchoolIdentification_ddd").val()===""&&(e=!0,t+="Quando um dos campos de telefone é preenchido, o campo <b>DDD</b> se torna obrigatório.<br>"),$("#SchoolStructure_operation_location_building").is(":checked")&&$("#SchoolStructure_building_occupation_situation").val()===""&&(e=!0,t+="Quando o Local de Funcionamento é um Prédio Escolar, o campo <b>Forma de Ocupação do Prédio</b> se torna obrigatório.<br>"),$(".water-supply-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Suprimento de Água</b> é obrigatório. Selecione ao menos uma opção.<br>"),$(".energy-supply-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Suprimento de Energia</b> é obrigatório. Selecione ao menos uma opção.<br>"),$("#SchoolStructure_feeding").val()===""&&(e=!0,t+="Campo <b>Suprimento de alimentos</b> é obrigatório.<br>"),$(".sewage-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Esgoto</b> é obrigatório. Selecione ao menos uma opção.<br>"),$(".garbage_destination_container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Destino do Lixo</b> é obrigatório. Selecione ao menos uma opção.<br>"),$(".garbage-treatment-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Tratamento do Lixo</b> é obrigatório. Selecione ao menos uma opção.<br>"),$(".dependencies-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Dependências</b> é obrigatório. Selecione ao menos uma opção.<br>"),$(".accessbility-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Acessibilidade</b> é obrigatório. Selecione ao menos uma opção.<br>"),$("#SchoolStructure_operation_location_building").is(":checked")&&($("#SchoolStructure_classroom_count").val()===""||$("#SchoolStructure_classroom_count").val()===0||$("#SchoolStructure_classroom_count").val()>9999)&&(e=!0,t+="Quando o Local de Funcionamento é um Prédio Escolar, o campo <b>Nº de Salas de Aula</b> é obrigatório. Informe um número válido.<br>"),!$("#SchoolStructure_operation_location_building").is(":checked")&&($("#SchoolStructure_dependencies_outside_roomspublic").val()===""||$("#SchoolStructure_dependencies_outside_roomspublic").val()===0||$("#SchoolStructure_dependencies_outside_roomspublic").val()>9999)&&(e=!0,t+="Quando o Local de Funcionamento não é um Prédio Escolar, o campo <b>Nº de Salas utilizadas fora do prédio</b> é obrigatório. Informe um número válido.<br>"),Number($("#SchoolStructure_dependencies_climate_roomspublic").val())>Number($("#SchoolStructure_classroom_count").val())+Number($("#SchoolStructure_dependencies_outside_roomspublic").val())&&(e=!0,t+="O <b>Nº de Salas Climatizadas</b> não pode ser maior que a soma que o <b>Nº de Salas de Aula</b> e <b>Nº de Salas utilizadas fora do prédio</b>.<br>"),Number($("#SchoolStructure_dependencies_acessibility_roomspublic").val())>Number($("#SchoolStructure_classroom_count").val())+Number($("#SchoolStructure_dependencies_outside_roomspublic").val())&&(e=!0,t+="O <b>Nº de Salas com Acessibilidade</b> não pode ser maior que a soma que o <b>Nº de Salas de Aula</b> e <b>Nº de Salas utilizadas fora do prédio</b>.<br>"),$(".equipments-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Equipamentos existentes na escola para uso técnico e administrativo</b> é obrigatório. Selecione ao menos uma opção.<br>"),$(".internet-access-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Acesso à Internet</b> é obrigatório. Selecione ao menos uma opção.<br>"),$("#SchoolStructure_internet_access_connected_desktop").is(":checked")&&($("#SchoolStructure_equipments_qtd_desktop").val()==="0"||$("#SchoolStructure_equipments_qtd_desktop").val()=="")&&($("#SchoolStructure_equipments_qtd_notebookstudent").val()==="0"||$("#SchoolStructure_equipments_qtd_notebookstudent").val()=="")&&($("#SchoolStructure_equipments_qtd_tabletstudent").val()==="0"||$("#SchoolStructure_equipments_qtd_tabletstudent").val()=="")&&(e=!0,t+="Quando o campo é <b>Computadores, Notebooks e Tablets da Escola</b> é preenchido, é preciso inserir alguma quantidade nos campos <b>Computadores de mesa (desktop)</b>, <b>Notebooks de Uso Estudantil</b> ou <b>Tablets de Uso Estudantil</b>.<br>"),$(".internet-access-local-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Rede Local</b> é obrigatório. Selecione ao menos uma opção.<br>"),$(".equipments-material-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Instrumentos materiais, socioculturais e/ou pedagógicos em uso na escola para o desenvolvimento de atividades de ensino aprendizagem</b> é obrigatório. Selecione ao menos uma opção.<br>"),$("#SchoolStructure_select_adimission").is(":checked")&&!$(".booking-container input[type=checkbox]:checked").length&&(e=!0,t+="Quando o <b>Exame de Seleção</b> realiza processo seletivo, o campo <b>Reserva de vagas por sistema de cotas</b> se torna obrigatório. Selecione ao menos uma opção.<br>"),$(".board-organ-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Órgãos em Funcionamento na Escola</b> é obrigatório. Selecione ao menos uma opção.<br>"),$("#ManagerIdentification_name").val()===""&&(e=!0,t+="Campo <b>Nome do Gestor</b> é obrigatório.<br>"),$("#birthday_date").val()===""&&(e=!0,t+="Campo <b>Data de Nascimento do Gestor</b> é obrigatório.<br>"),$("#color_race").val()===""&&(e=!0,t+="O campo <b>Cor / Raça </b> é obrigatório.<br>"),$("#sex").val()===""&&(e=!0,t+="O campo <b>Sexo</b> é obrigatório.<br>"),$("#nationality").val()===""&&(e=!0,t+="O campo <b>Nacionalidade</b> é obrigatório.<br>"),$("#filiation").val()===""&&(e=!0,t+="O campo <b>Filiação</b> é obrigatório.<br>"),$("#residence_zone").val()===""&&(e=!0,t+="O campo <b>Zona Residêncial</b> é obrigatório.<br>"),($("#SchoolStructure_stages").val()===null||$("#SchoolStructure_stages").val()==="")&&(e=!0,t+="Campo <b>Etapas da Escola</b> é obrigatório.<br>"),e?($("html, body").animate({scrollTop:0},"fast"),$(this).closest("form").find(".school-error").html(t).show()):($(this).closest("form").find(".school-error").hide(),$("#school input").removeAttr("disabled"),$("#school select").removeAttr("disabled").trigger("change.select2"),$(this).closest("form").submit())});$(".js-tab-school li a").click(function(){var e=$('li[class="active"]'),t=$("div .active"),i="tab-school-indentify",a="tab-school-addressContact",o="tab-school-structure",n="tab-school-equipment",s="tab-school-manager",c="tab-school-education",r="";switch($(this).parent().attr("id")){case i:r=i,$(".prev").hide(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide();break;case a:r=a,$(".prev").show(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide();break;case o:r=o,$(".prev").show(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide();break;case n:r=n,$(".prev").show(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide();break;case s:r=s,$(".prev").show(),$(".next").show(),$(".last").hide(),window.location.search.includes("update")?$(".last").show():$(".last").hide();break;case c:r=c,$(".prev").show(),$(".next").hide(),$(".last").show()}e.removeClass("active"),t.removeClass("active");var l=r.substring(4);l=l.toString(),$("#"+r).addClass("active"),$("#"+l).addClass("active"),$("html, body").animate({scrollTop:0},"fast")});$(".next").click(function(){var e=$("ul.js-tab-school").find("li.active"),t=$("div .active"),i="tab-school-indentify",a="tab-school-addressContact",o="tab-school-structure",n="tab-school-equipment",s="tab-school-manager",c="tab-school-education",r="";switch(e.attr("id")){case i:r=a,$(".prev").show();break;case a:r=o;break;case o:r=n,$(".next").show(),$(".last").hide();break;case n:r=s;break;case s:r=c,$(".next").hide(),$(".last").show();break;case c:r=li7;break;case li7:break}e.removeClass("active"),t.removeClass("active");var l=r.substring(4);l=l.toString(),$("#"+r).addClass("active"),$("#"+l).addClass("active"),$("html, body").animate({scrollTop:0},"fast")});$(".prev").click(function(){var e=$("ul.js-tab-school").find("li.active"),t=$("div .active"),i="tab-school-indentify",a="tab-school-addressContact",o="tab-school-structure",n="tab-school-equipment",s="tab-school-manager",c="tab-school-education",r="";switch(e.attr("id")){case i:r=i;break;case a:r=i,$(".prev").hide();break;case o:r=a;break;case n:r=o;break;case s:r=n;break;case c:r=s,$(".last").hide(),$(".next").show();break}e.removeClass("active"),t.removeClass("active");var l=r.substring(4);r=r.toString(),$("#"+r).addClass("active"),$("#"+l).addClass("active"),$("html, body").animate({scrollTop:0},"fast")});$("#ManagerIdentification_nationality").change(function(){var e=".nationality-sensitive",t=e+".br",i=e+".no-br",a=getUrlVars().simple;$(e).attr("disabled","disabled"),$(this).val()==3?($(i).removeAttr("disabled"),$("#ManagerIdentification_edcenso_nation_fk").val(null).trigger("change").select2("readonly",!1),$("#ManagerIdentification_edcenso_uf_fk").val("").trigger("change.select2"),$("#ManagerIdentification_edcenso_city_fk").val("").trigger("change.select2"),$("#ManagerIdentification_edcenso_uf_fk").closest(".js-change-required").css("display",a==="1"?"none":"block").find("label").removeClass("required").html("Estado"),$("#ManagerIdentification_edcenso_city_fk").closest(".js-change-required").css("display",a==="1"?"none":"block").find("label").removeClass("required").html("Cidade")):$(this).val()==""?($("#ManagerIdentification_edcenso_nation_fk").val(null).trigger("change").attr("disabled","disabled"),$(e).attr("disabled","disabled"),$("#ManagerIdentification_edcenso_uf_fk").val("").trigger("change.select2").closest(".js-change-required").css("display",a=="1"?"none":"block").find("label").removeClass("required").html("Estado"),$("#ManagerIdentification_edcenso_city_fk").val("").trigger("change.select2").closest(".js-change-required").css("display",a=="1"?"none":"block").find("label").removeClass("required").html("Cidade")):($("#ManagerIdentification_edcenso_nation_fk").val(76).trigger("change").removeAttr("disabled").select2("readonly",!0),$(t).removeAttr("disabled"),$(this).val()=="1"?($("#ManagerIdentification_edcenso_uf_fk").removeAttr("disabled").closest(".js-change-required").show().find("label").addClass("required").html("Estado *"),$("#ManagerIdentification_edcenso_city_fk").removeAttr("disabled").closest(".js-change-required").show().find("label").addClass("required").html("Cidade *")):($("#ManagerIdentification_edcenso_uf_fk").val("").trigger("change.select2").attr("disabled","disabled").closest(".js-change-required").css("display",a=="1"?"none":"block").find("label").removeClass("required").html("Estado"),$("#ManagerIdentification_edcenso_city_fk").val("").trigger("change.select2").attr("disabled","disabled").closest(".js-change-required").css("display",a=="1"?"none":"block").find("label").removeClass("required").html("Cidade")))});$("#ManagerIdentification_edcenso_uf_fk").change(function(){var e=$(this).val();$("#ManagerIdentification_edcenso_city_fk").empty(),$.ajax({type:"POST",url:"?r=school/getmanagercities",data:{edcenso_uf_fk:e},success:function(t){$("#ManagerIdentification_edcenso_city_fk").append(t)}})});$("#ManagerIdentification_filiation").change(function(){var e=getUrlVars().simple;$(".manager-filiation-container").hide(),$("#ManagerIdentification_filiation").val()==1?($(".manager-filiation-container").show(),$("#ManagerIdentification_filiation_1").closest(".js-visibility-fname").show(),$("#ManagerIdentification_filiation_2").closest(".js-visibility-fname").show()):($(".js-finput-clear").val(""),$("#ManagerIdentification_filiation_1").closest(".js-visibility-fname").css("display",e==="1"?"none":"block"),$("#ManagerIdentification_filiation_2").closest(".js-visibility-fname").css("display",e==="1"?"none":"block"))});$("#ManagerIdentification_filiation").trigger("change");$(document).on("change","#SchoolIdentification_administrative_dependence",function(){$(this).val()!==""&&$(this).val()!=="4"?($("#SchoolIdentification_linked_organ").parent().children(".control-label").addClass("required").html("Órgão ao qual a escola pública está vinculada *"),$("#SchoolIdentification_linked_organ input[type=checkbox]").removeAttr("disabled","disabled")):($("#SchoolIdentification_linked_organ").parent().children(".control-label").removeClass("required").html("Órgão ao qual a escola pública está vinculada"),$(this).val()==="4"&&($("#SchoolIdentification_linked_organ input[type=checkbox]:checked").prop("checked",!1),$("#SchoolIdentification_linked_organ input[type=checkbox]").attr("disabled","disabled")))});$("#SchoolIdentification_administrative_dependence").trigger("change");$(document).on("change","#SchoolIdentification_offer_or_linked_unity",function(){$(this).val()==="1"?($("#SchoolIdentification_inep_head_school").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Código da Escola Sede *"),$("#SchoolIdentification_ies_code").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Código da IES")):$(this).val()==="2"?($("#SchoolIdentification_inep_head_school").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Código da Escola Sede"),$("#SchoolIdentification_ies_code").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Código da IES *")):($("#SchoolIdentification_inep_head_school").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Código da Escola Sede"),$("#SchoolIdentification_ies_code").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Código da IES"))});$("#SchoolIdentification_offer_or_linked_unity").trigger("change");$(document).on("change","#SchoolStructure_shared_building_with_school",function(){$(this).is(":checked")?$("#SchoolStructure_shared_school_inep_id_1").removeAttr("disabled").trigger("change.select2"):$("#SchoolStructure_shared_school_inep_id_1").val("").attr("disabled","disabled").trigger("change.select2")});$(document).on("change","#SchoolStructure_operation_location_building",function(){$(this).is(":checked")?($("#SchoolStructure_building_occupation_situation").closest(".control-group").find(".control-label").addClass("required").html("Forma de Ocupação do Prédio *"),$("#SchoolStructure_building_occupation_situation").removeAttr("disabled").trigger("change.select2"),$("#SchoolStructure_classroom_count").closest(".control-group").find(".control-label").addClass("required").html("Nº de Salas de Aula *"),$("#SchoolStructure_classroom_count").removeAttr("disabled"),$("#SchoolStructure_dependencies_outside_roomspublic").closest(".control-group").find(".control-label").removeClass("required").html("Nº de Salas utilizadas fora do prédio"),$("#SchoolStructure_shared_building_with_school").removeAttr("disabled").trigger("change")):($("#SchoolStructure_building_occupation_situation").closest(".control-group").find(".control-label").removeClass("required").html("Forma de Ocupação do Prédio"),$("#SchoolStructure_building_occupation_situation").val("").attr("disabled","disabled").trigger("change.select2"),$("#SchoolStructure_classroom_count").closest(".control-group").find(".control-label").removeClass("required").html("Nº de Salas de Aula"),$("#SchoolStructure_classroom_count").val("").attr("disabled","disabled"),$("#SchoolStructure_dependencies_outside_roomspublic").closest(".control-group").find(".control-label").addClass("required").html("Nº de Salas utilizadas fora do prédio *"),$("#SchoolStructure_shared_building_with_school").prop("checked",!1).attr("disabled","disabled").trigger("change"))});$("#SchoolStructure_operation_location_building").trigger("change");$(document).on("change",".water-supply-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_water_supply_inexistent"?$("#SchoolStructure_water_supply_inexistent").prop("checked",!1):$(".water-supply-container input[type=checkbox]").not("#SchoolStructure_water_supply_inexistent").prop("checked",!1)});$(document).on("change",".energy-supply-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_energy_supply_inexistent"?$("#SchoolStructure_energy_supply_inexistent").prop("checked",!1):$(".energy-supply-container input[type=checkbox]").not("#SchoolStructure_energy_supply_inexistent").prop("checked",!1)});$(document).on("change",".sewage-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_sewage_inexistent"?$("#SchoolStructure_sewage_inexistent").prop("checked",!1):$(".sewage-container input[type=checkbox]").not("#SchoolStructure_sewage_inexistent").prop("checked",!1),$(this).attr("id")==="SchoolStructure_sewage_fossa_common"?$("#SchoolStructure_sewage_fossa").prop("checked",!1):$("#SchoolStructure_sewage_fossa_common").prop("checked",!1)});$(document).on("change",".garbage-treatment-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_traetment_garbage_inexistent"?$("#SchoolStructure_traetment_garbage_inexistent").prop("checked",!1):$(".garbage-treatment-container input[type=checkbox]").not("#SchoolStructure_traetment_garbage_inexistent").prop("checked",!1)});$(document).on("change",".dependencies-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_dependencies_none"?$("#SchoolStructure_dependencies_none").prop("checked",!1):$(".dependencies-container input[type=checkbox]").not("#SchoolStructure_dependencies_none").prop("checked",!1)});$(document).on("change",".accessbility-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_acessabilty_inexistent"?$("#SchoolStructure_acessabilty_inexistent").prop("checked",!1):$(".accessbility-container input[type=checkbox]").not("#SchoolStructure_acessabilty_inexistent").prop("checked",!1)});$(document).on("change",".equipments-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_equipments_inexistent"?$("#SchoolStructure_equipments_inexistent").prop("checked",!1):$(".equipments-container input[type=checkbox]").not("#SchoolStructure_equipments_inexistent").prop("checked",!1)});$(document).on("change",".internet-access-container input[type=checkbox]",function(){$(this).is(":checked")&&($(this).attr("id")!=="SchoolStructure_internet_access_inexistent"?$("#SchoolStructure_internet_access_inexistent").prop("checked",!1):($("#SchoolStructure_internet_access_broadband").prop("checked",!1).attr("disabled","disabled"),$(".internet-access-container input[type=checkbox]").not("#SchoolStructure_internet_access_inexistent").prop("checked",!1))),$("#SchoolStructure_internet_access_inexistent").is(":checked")||$("#SchoolStructure_internet_access_broadband").removeAttr("disabled")});$("#SchoolStructure_internet_access_inexistent").trigger("change");$(document).on("change","#SchoolStructure_internet_access_local_wireless",function(){$(this).is(":checked")?$("#SchoolStructure_internet_access_connected_personaldevice").removeAttr("disabled"):$("#SchoolStructure_internet_access_connected_personaldevice").prop("checked",!1).attr("disabled","disabled")});$("#SchoolStructure_internet_access_local_wireless").trigger("change");$(document).on("change",".internet-access-local-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_internet_access_local_inexistet"?$("#SchoolStructure_internet_access_local_inexistet").prop("checked",!1):$(".internet-access-local-container input[type=checkbox]").not("#SchoolStructure_internet_access_local_inexistet").prop("checked",!1)});$(document).on("change",".equipments-material-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_instruments_inexistent"?$("#SchoolStructure_instruments_inexistent").prop("checked",!1):$(".equipments-material-container input[type=checkbox]").not("#SchoolStructure_instruments_inexistent").prop("checked",!1)});$(document).on("change","#SchoolStructure_select_adimission",function(){$(this).is(":checked")?($(".booking-container input[type=checkbox]").removeAttr("disabled"),$(".booking-container").find(".control-label").addClass("required").html("Reserva de vagas por sistema de cotas *")):($(".booking-container input[type=checkbox]").prop("checked",!1).attr("disabled","disabled"),$(".booking-container").find(".control-label").removeClass("required").html("Reserva de vagas por sistema de cotas"))});$("#SchoolStructure_select_adimission").trigger("change");$(document).on("change",".booking-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_booking_enrollment_inexistent"?$("#SchoolStructure_booking_enrollment_inexistent").prop("checked",!1):$(".booking-container input[type=checkbox]").not("#SchoolStructure_booking_enrollment_inexistent").prop("checked",!1)});$(document).on("change",".board-organ-container input[type=checkbox]",function(){$(this).attr("id")!=="SchoolStructure_board_organ_inexistent"?$("#SchoolStructure_board_organ_inexistent").prop("checked",!1):$(".board-organ-container input[type=checkbox]").not("#SchoolStructure_board_organ_inexistent").prop("checked",!1)});window.location.search.includes("update")?$(".last").css("display","flex"):$(".last").css("display","none");$(".heading-buttons").css("width",$("#content").width());$(document).ready(function(){$(window).load(function(){initial_date=stringToDate($(formIdentification+"initial_date").val()),$(formIdentification+"final_date").val()&&(final_date=stringToDate($(formIdentification+"final_date").val()))}),$("#ManagerIdentification_cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"}),$("#ManagerIdentification_filiation_1_cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"}),$("#ManagerIdentification_filiation_2_cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"})});$(document).on("click",".upload-logo-button",function(){$("#SchoolIdentification_logo_file_content").click()});$(document).on("change","#SchoolIdentification_logo_file_content",function(e){$(".uploaded-logo-name").text(e.target.files[0].name)});$(document).on("change","#quartely_report_classroom_student",function(){$(".classroom-student-container").hide(),$(".classroom-student-error").hide();const e=$("#quartely_report_classroom_student").val();$.ajax({type:"GET",url:`${window.location.host}/?r=reports/getstudentclassrooms&id=${e}`,success:function(t){$("#student").empty(),t!=null&&t!=""?($("#student").append(t),$(".classroom-student-container").show()):$(".classroom-student-error").show()}})});$("#print").on("click",function(){window.print()});$(document).ready(function(){Ce()});function Ce(){$("#report, #print").hide()}$("#print").on("click",function(){window.print()});$(document).ready(function(){xe()});function xe(){$("#report, #print").hide()}$("#print").on("click",function(){window.print()});$(document).ready(function(){$("table").each(function(){$(this).find("td").length||$(this).closest(".classroom-container").remove()})});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$(document).ready(function(){$("table").each(function(){$(this).find("td").length||$(this).closest(".classroom-container").remove()})});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$(document).ready(function(){je()});function je(){$("#report, #print").hide()}$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$(document).ready(function(){$(".table-classroom").each(function(){$(this).find(".student").length||$("<tr class='student'><td>N&atilde;o h&aacute; alunos entre 5 e 14 anos</td></tr>").insertAfter($(this).find("th").parent())})});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$(document).ready(function(){window.print()});$(document).ready(function(){window.print()});$("#print").on("click",function(){window.print()});$(document).ready(function(){var e,t;$("#enrollment-table tbody tr").each(function(){e=0,t=0,$(this).find(".stage-enrollment").each(function(a,o){e+=Number($(o).html()),$(o).addClass("col-"+t),t++}),$(this).find(".school-total, .unity-total").html(e)}),$("#enrollment-table tfoot .col-total .stage-total").each(function(a){var o=0;$(".col-"+a).each(function(){o+=Number($(this).html())}),$(this).html(o)}),$("#enrollment-table tfoot .group-stage-total .group-total").each(function(a){var o=0;$(".stage-"+a).each(function(){o+=Number($(this).html())}),$(this).html(o)});var i=0;$(".unity-total").each(function(){i+=Number($(this).html())}),$(".rede-total").html(i)});$("#print").on("click",function(){window.print()});$(document).ready(function(){De()});function De(){$("#report, #print").hide()}$("#print").on("click",function(){window.print()});$(document).ready(function(){Ae()});function Ae(){$("#report, #print").hide()}$("#print").on("click",function(){window.print()});window.onbeforeprint=function(){$("#obs").val()==""&&$("#box-obs").hide()};window.onafterprint=function(){$("#box-obs").show()};$("#print").on("click",function(){window.print()});$(document).ready(function(){qe()});function qe(){$("#report, #print").hide()}$("#print").on("click",function(){window.print()});var p=!1;$(".initial-date, .final-date").mask("99/99/9999");$(".initial-date").datepicker({language:"pt-BR",format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0,allowInputToggle:!0,disableTouchKeyboard:!0,keyboardNavigation:!1,orientation:"bottom left",clearBtn:!0,maxViewMode:2,startDate:"01/01/"+$(".school-year").val(),endDate:"31/12/"+$(".school-year").val()}).on("changeDate",function(e,t){if($(".initial-date").val()!==""&&$(".initial-date").val().length==10&&$(".final-date").val()!==""&&$(".final-date").val().length==10){var i=$(".initial-date").val().split("/"),a=t?new Date(i[2],i[1]-1,i[0],0,0,0):new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate(),0,0,0),o=$(".final-date").val().split("/"),n=new Date(o[2],o[1]-1,o[0],0,0,0);n<a?p=!1:p=!0}else p=!1}).on("clearDate",function(e){p=!1});$(".final-date").datepicker({language:"pt-BR",format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0,allowInputToggle:!0,disableTouchKeyboard:!0,keyboardNavigation:!1,orientation:"bottom left",clearBtn:!0,maxViewMode:2,startDate:"01/01/"+$(".school-year").val(),endDate:"31/12/"+$(".school-year").val()}).on("changeDate",function(e){if($(".initial-date").val()!==""&&$(".initial-date").val().length==10&&$(".final-date").val()!==""&&$(".final-date").val().length==10){var t=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate(),0,0,0),i=$(".initial-date").val().split("/"),a=new Date(i[2],i[1]-1,i[0],0,0,0);t<a?p=!1:p=!0}else p=!1}).on("clearDate",function(e){p=!1});$(document).on("change","#report",function(){$(this).val()!==""?($("#report").val()==="frequency"?($(".classroom-container, .date-container").show(),$(".students-container").hide(),$("#classroom").val()!==""&&$("#classroom > option:selected").attr("fundamentalMaior")==="1"&&$(".disciplines-container").show()):$("#report").val()==="gradesByStudent"&&($(".classroom-container").show(),$(".date-container, .disciplines-container").hide(),$("#classroom").val()!==""&&$(".students-container").show()),$(".dependent-filters").show()):$(".dependent-filters").hide()});$("#classroom").on("change",function(){$("#discipline, #student").val("").trigger("change.select2"),$(this).val()!==""?($("#classroom > option:selected").attr("fundamentalMaior")==="1"?$.ajax({type:"POST",url:"?r=reports/getDisciplines",cache:!1,data:{classroom:$("#classroom").val()},beforeSend:function(){$("#discipline").attr("disabled","disabled")},success:function(e){e===""?$("#discipline").html("<option value='-1'></option>").trigger("change.select2").show():$("#discipline").html(decodeHtml(e)).trigger("change.select2").show(),$("#report").val()==="frequency"&&$(".disciplines-container").show(),$("#discipline").removeAttr("disabled")}}):$(".disciplines-container").hide(),$.ajax({type:"POST",url:"?r=reports/getEnrollments",cache:!1,data:{classroom:$("#classroom").val()},beforeSend:function(){$("#student").attr("disabled","disabled")},success:function(e){e===""?$("#student").html("<option value='-1'></option>").trigger("change.select2").show():$("#student").html(decodeHtml(e)).trigger("change.select2").show(),$("#report").val()==="gradesByStudent"&&$(".students-container").show(),$("#student").removeAttr("disabled")}})):$(".disciplines-container, .students-container").hide()});$(document).on("click","#loadreport",function(){$(".alert-report").hide();var e=!1;switch($("#report").val()){case"frequency":var t=$("#classroom option:selected").attr("fundamentalmaior")==="1";$("#classroom").val()!==""&&(!t||$("#discipline").val()!=="")&&p&&(e=!0);break;case"gradesByStudent":$("#classroom").val()!==""&&$("#student").val()!==""&&(e=!0);break}e?Ee():$(".alert-report").text("Preencha os campos obrigatórios corretamente.").show()});function Ee(){$.ajax({type:"POST",url:"?r=reports/generateElectronicDiaryReport",cache:!1,data:{type:$("#report").val(),classroom:$("#classroom").val(),fundamentalMaior:$("#classroom option:selected").attr("fundamentalmaior"),discipline:$("#discipline").val(),initialDate:$(".initial-date").val(),finalDate:$(".final-date").val(),student:$("#student").val()},beforeSend:function(){$(".loading-report").css("display","inline-block"),$(".report-container, #loadreport").css("opacity",.3).css("pointer-events","none"),$("#report, #classroom, #discipline, #student, .initial-date, .final-date, .print-report").attr("disabled","disabled")},success:function(e){e=JSON.parse(e);var t="";if($("#report").val()==="frequency")t+="<table class='frequency-table table table-bordered table-striped table-hover'><thead><tr><th class='table-title' colspan='5'>Frequência</th></tr><tr><th class='center' colspan='5'>"+$("#classroom").select2("data").text+" - "+($("#classroom option:selected").attr("fundamentalmaior")==="1"?$("#discipline").select2("data").text+" - ":"")+$(".initial-date").val()+" a "+$(".final-date").val()+"</th></tr><tr><th>Nome</th><th>"+($("#classroom option:selected").attr("fundamentalmaior")==="1"?"Aulas":"Dias Letivos")+"</th><th>Faltas</th><th>Frequência</th><th>Faltas (Dias)</th></tr></thead><tbody>",$.each(e.students,function(n,s){var c="";$.each(this.faults,function(r,l){c+=l+(r<Object.keys(s.faults).length-1?"; ":"")}),t+="<tr><td>"+s.name+"</td><td>"+s.total+"</td><td>"+Object.keys(s.faults).length+"</td><td>"+s.frequency+"</td><td>"+c+"</td></tr>"}),t+="</tbody></table>",$(".report-container").html(t),$(".print-report").show();else if($("#report").val()==="gradesByStudent")if(e.valid){t+="<table class='grades-by-student-table table table-bordered table-striped table-hover'><thead>";var i=0,a="";$.each(e.unityNames,function(){i+=this.colspan,a+="<th class='center' colspan='"+this.colspan+"'>"+this.name+"</th>"});var o="";$.each(e.subunityNames,function(){o+="<th class='center'>"+this+"</th>"}),i+=e.isUnityConcept?2:3,t+="<tr><th class='table-title' colspan='"+i+"'>Notas</th></tr>",t+="<tr><th class='center' colspan='"+i+"'>"+$("#student").select2("data").text+"</th></tr>",t+="<tr><th class='center' colspan='"+i+"'>"+$("#classroom").select2("data").text+"</th></tr>",t+="<tr><th></th>"+a,t+=e.isUnityConcept?"<th></th>":"<th class='center'></th><th></th>",t+="</tr>",t+="<tr><th>Disciplina</th>"+o,t+=e.isUnityConcept?"":"<th class='center'>Média Anual</th>",t+="<th class='center'>Resultado</th>",t+="</tr></thead><tbody>",$.each(e.rows,function(){t+="<tr><td>"+this.disciplineName+"</td>",$.each(this.grades,function(){this.unityGrade==""?valueUnityGrade="":valueUnityGrade=parseFloat(this.unityGrade).toFixed(1),this.unityRecoverGrade==""?valueunityRecoverGrade="":valueunityRecoverGrade=parseFloat(this.unityRecoverGrade).toFixed(1),t+="<td class='center'>"+valueUnityGrade+"</td>",this.gradeUnityType==="UR"&&(t+="<td class='center'>"+valueunityRecoverGrade+"</td>")}),this.finalMedia==""?valueFinalMedia="":valueFinalMedia=parseFloat(this.finalMedia).toFixed(1),t+=e.isUnityConcept?"":"<td class='center'>"+valueFinalMedia+"</td>",t+="<td class='center'>"+this.situation+"</td></tr>"}),t+="</tbody></table>",$(".report-container").html(t),$(".print-report").show()}else $(".alert-report").text("Ainda não foi construída uma estrutura de unidades e avaliações para esta turma.").show()},complete:function(e){$(".loading-report").hide(),$(".report-container, #loadreport").css("opacity",1).css("pointer-events","auto"),$("#report, #classroom, #discipline, #student, .initial-date, .final-date, .print-report").removeAttr("disabled")}})}$(document).on("click",".print-report",function(){var e=window.open("","","toolbar=no, menubar=no");e.document.writeln("<!DOCTYPE html>"),e.document.writeln("<html moznomarginboxes mozdisallowselectionprint><head><title>Relatório</title>"),e.document.writeln('<link rel="stylesheet" type="text/css" media="print" href="./css/reports/prints/print-reports.css?v=1.1">'),e.document.writeln('<div class="header">'+$(".report-header")[0].innerHTML+"</div>"),e.document.writeln("<h3>Diário Eletrônico</h3>"),e.document.writeln("<div class='body-container'>"+$(".report-container")[0].innerHTML+"</div>"),e.document.writeln('<div class="footer">'+$(".report-footer")[0].innerHTML+"</div>"),e.document.writeln("</div>"),e.document.writeln("</body>"),e.document.writeln("</html>"),e.document.close(),e.onload=function(){setTimeout(function(){e.focus(),e.print(),e.close()},200)}});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$("#print").on("click",function(){window.print()});$(document).ready(function(){$(".table-no-instructors").find("td").length||($(".table-no-instructors").remove(),$(".innerLR").append("<br><span class='alert alert-primary'>N&atilde;o h&aacute; turmas para esta escola.</span>"))});$("#print").on("click",function(){window.print()});$(document).ready(function(){$(".js-toggle-drawer, .menu-cover").click(function(){$(".js-drawer").toggleClass("t-drawer--mobile-hidden"),$(".menu-cover").toggleClass("sidebar-cover")}),$("#menu-electronic-diary-trigger").click(function(){$("#menu-electronic-diary").toggleClass("active")}),$("#menu-integrations-trigger").click(function(){$("#menu-integrations").toggleClass("active")})});$("#classesSearch").on("click",function(){$("#classrooms").val()!==""&&$("#month").val()!==""&&$("#instructor").val()!==""&&$("#disciplines").val()!==""?($(".alert-required-fields, .alert-incomplete-data").hide(),jQuery.ajax({type:"POST",url:"?r=instructor/getFrequency",cache:!1,data:{instructor:$("#instructor").val(),classroom:$("#classrooms").val(),discipline:$("#disciplines").val(),month:$("#month").val()},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$(".table-frequency").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch").attr("disabled","disabled")},success:function(e){var t=JSON.parse(e);if(t.valid){var i="";i+="<table class='t-accordion table-frequency table table-bordered table-striped table-hover'><thead class='t-accordion__head'><tr><th class='table-title' colspan='"+(Object.keys(t.instructors[0].schedules).length+1)+"'>"+$("#disciplines").select2("data").text+"aaaaaaa</th></tr>";var a="",o="",n="",s="";$.each(t.instructors[0].schedules,function(){o+="<th>"+(pad(this.day,2)+"/"+pad($("#month").val(),2))+"</th>",a+="<th>"+this.week_day+"</th>",n+="<th>"+this.schedule+"º Horário</th>",s+="<th class='frequency-checkbox-general frequency-checkbox-container "+(this.available?"":"disabled")+"'><input class='frequency-checkbox' type='checkbox' "+(this.available?"":"disabled")+" classroomId='"+$("#classrooms").val()+"' day='"+this.day+"' month='"+$("#month").val()+"' schedule='"+this.schedule+"></th>"}),i+="<tr class='day-row'><th></th>"+o+"</tr><tr class='dayname-row'><th></th>"+a+"</tr>"+("<tr class='schedule-row'><th></th>"+n+"</tr>"),i+="</thead><tbody class='t-accordion__body'>",$.each(t.instructors,function(c,r){i+="<tr><td class='instructor-name'>"+r.instructorName+"</td>",$.each(r.schedules,function(l,d){var h="";d.fault&&(d.justification!==null?h+="<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon' title='"+d.justification+"'><i class='fa fa-file-text-o'></i><i class='fa fa-file-text'></i></a>":h+="<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon'><i class='fa fa-file-o'></i><i class='fa fa-file'></i></a>"),i+="<td class='frequency-checkbox-instructor frequency-checkbox-container "+(this.available?"":"disabled")+"'><input class='frequency-checkbox' type='checkbox' "+(d.available?"":"disabled")+" "+(d.fault?"checked":"")+" classroomId='"+$("#classrooms").val()+"' instructorId='"+r.instructorId+"' day='"+d.day+"' month='"+$("#month").val()+"' schedule='"+d.idSchedule+"'>"+h+"</td>"}),i+="</tr>"}),i+="</tbody></table>",$("#frequency-container").html(i).show(),$(".frequency-checkbox-general").each(function(){var c=$(this).find(".frequency-checkbox").attr("day");$(this).find(".frequency-checkbox").prop("checked",$(".frequency-checkbox-instructor .frequency-checkbox[day="+c+"]:checked").length===$(".frequency-checkbox-instructor .frequency-checkbox[day="+c+"]").length)}),$('[data-toggle="tooltip"]').tooltip({container:"body"})}else $("#frequency-container").hide(),$(".alert-incomplete-data").html(t.error).show()},complete:function(e){$(".loading-frequency").hide(),$(".table-frequency").css("opacity",1).css("pointer-events","auto"),$("#classroom, #month, #disciplines, #classesSearch").removeAttr("disabled")}})):($(".alert-required-fields").show(),$("#frequency-container, .alert-incomplete-data").hide())});$(document).on("click",".frequency-checkbox-container",function(e){e.target===this&&!$(this).hasClass("disabled")&&$(this).find(".frequency-checkbox").prop("checked",!$(this).find(".frequency-checkbox").is(":checked")).trigger("change")});$("#instructor").on("change",function(){$("#classroom").val("").trigger("change.select2"),$(this).val()!==""?$.ajax({type:"POST",url:"?r=instructor/getFrequencyClassroom",cache:!1,data:{instructor:$("#instructor").val()},success:function(e){e===""?$("#classrooms").html("<option value='-1'></option>").trigger("change.select2").show():$("#classrooms").html(decodeHtml(e)).trigger("change.select2").show(),$(".classroom-container").show()}}):$(".classroom-container").hide()});$("#classrooms").on("change",function(){$("#disciplines").val("").trigger("change.select2"),$(this).val()!==""?$.ajax({type:"POST",url:"?r=instructor/getFrequencyDisciplines",cache:!1,data:{instructor:$("#instructor").val(),classroom:$("#classrooms").val()},success:function(e){e===""?$("#disciplines").html("<option value='-1'></option>").trigger("change.select2").show():$("#disciplines").html(decodeHtml(e)).trigger("change.select2").show(),$(".disciplines-container").show()}}):$(".disciplines-container").hide()});$(document).on("change",".frequency-checkbox",function(){var e=this;$.ajax({type:"POST",url:"?r=instructor/saveFrequency",cache:!1,data:{classroomId:$("#classrooms").val(),day:$(this).attr("day"),month:$(this).attr("month"),schedule:$(this).attr("schedule"),instructorId:$("#instructor").val(),fault:$(this).is(":checked")?1:0},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$(".table-frequency").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch").attr("disabled","disabled")},complete:function(t){$(e).attr("instructorId")===void 0?($(".table-frequency tbody .frequency-checkbox[day="+$(e).attr("day")+"][schedule="+$(e).attr("schedule")+"]").prop("checked",$(e).is(":checked")),$(e).is(":checked")?$(".table-frequency tbody .frequency-checkbox[day="+$(e).attr("day")+"][schedule="+$(e).attr("schedule")+"]").each(function(){$(this).parent().find(".frequency-justification-icon").length||$(this).parent().append("<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon'><i class='fa fa-file-o'></i><i class='fa fa-file'></i></a>")}):$(".table-frequency tbody .frequency-checkbox[day="+$(e).attr("day")+"][schedule="+$(e).attr("schedule")+"]").parent().find(".frequency-justification-icon").remove()):$(e).is(":checked")?$(e).parent().append("<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon'><i class='fa fa-file-o'></i><i class='fa fa-file'></i></a>"):$(e).parent().find(".frequency-justification-icon").remove(),$(".loading-frequency").hide(),$(".table-frequency").css("opacity",1).css("pointer-events","auto"),$("#classroom, #month, #disciplines, #classesSearch").removeAttr("disabled")}})});$(document).on("click",".frequency-justification-icon",function(){var e=$(this).parent().find(".frequency-checkbox");$("#justification-classroomid").val(e.attr("classroomid")),$("#justification-instructorid").val(e.attr("instructorid")),$("#justification-day").val(e.attr("day")),$("#justification-month").val(e.attr("month")),$("#justification-schedule").val(e.attr("schedule")),$(".justification-text").val($(this).attr("data-original-title")),$("#save-justification-modal").modal("show")});$("#save-justification-modal").on("shown",function(){$(".justification-text").focus()});$(document).on("click",".btn-save-justification",function(){$.ajax({type:"POST",url:"?r=instructor/saveJustification",cache:!1,data:{classroomId:$("#justification-classroomid").val(),instructorId:$("#justification-instructorid").val(),day:$("#justification-day").val(),month:$("#justification-month").val(),schedule:$("#justification-schedule").val(),justification:$(".justification-text").val()},beforeSend:function(){$("#save-justification-modal").find(".modal-body").css("opacity",.3).css("pointer-events","none"),$("#save-justification-modal").find("button").attr("disabled","disabled"),$("#save-justification-modal").find(".centered-loading-gif").show()},success:function(e){var t=$(".table-frequency tbody .frequency-checkbox[instructorid="+$("#justification-instructorid").val()+"][day="+$("#justification-day").val()+"][month="+$("#justification-month").val()+"]").parent().find(".frequency-justification-icon");$(".justification-text").val()==""?(t.html("<i class='fa fa-file-o'></i><i class='fa fa-file'></i>"),t.attr("data-original-title","").tooltip("hide")):(t.html("<i class='fa fa-file-text-o'></i><i class='fa fa-file-text'></i>"),t.attr("data-original-title",$(".justification-text").val()).tooltip({container:"body"})),$("#save-justification-modal").modal("hide")},complete:function(e){$("#save-justification-modal").find(".modal-body").css("opacity",1).css("pointer-events","auto"),$("#save-justification-modal").find("button").removeAttr("disabled"),$("#save-justification-modal").find(".centered-loading-gif").hide()}})});$(document).on("keyup",".justification-text",function(e){e.keyCode==13&&$(".btn-save-justification").trigger("click")});$(formInstructorIdentification+"name,"+formInstructorIdentification+"filiation_1,"+formInstructorIdentification+"filiation_2").on("focusout",function(){var e="#"+$(this).attr("id");$(this).val($(this).val().toUpperCase());var t=validateNamePerson(this.value);t[0]?removeError(e):($(e).attr("value",""),addError(e,t[1]))});$(formInstructorIdentification+"email").on("focusout",function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateEmail($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"Digite um e-mail válido."))});$(formInstructorIdentification+"birthday_date").mask("00/00/0000",{placeholder:"dd/mm/aaaa"});$(formInstructorIdentification+"birthday_date").focusout(function(){var e="#"+$(this).attr("id"),t=stringToDate($(formInstructorIdentification+"birthday_date").val());(!validateDate($(formInstructorIdentification+"birthday_date").val())||!validateYear(t.year))&&$(e).val()!=""?addError(e,"Informe uma data válida no formato Dia/Mês/Ano."):removeError(e)});$(formInstructorIdentification+"nationality").on("change",function(){var e=$(this).val(),t=$(formInstructorIdentification+"edcenso_nation_fk"),i=$(formInstructorIdentification+"edcenso_uf_fk"),a=$(formInstructorIdentification+"edcenso_city_fk"),o=e==2||e==1?"76":t.val(),n=e==3?"":i.val(),s=e==3?"":a.val();t.val(o).trigger("change").select2("readonly",e==2||e==1),i.val(n).trigger("change").select2("readonly",e==3),a.val(s).trigger("change").select2("readonly",e==3),t.select2("enable",e!=""),i.select2("enable",e!=""),a.select2("enable",e!=""),e==1?(i.removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Estado *"),a.removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Cidade *")):(i.val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Estado"),a.val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Cidade"))});$(formInstructorIdentification+"nationality").trigger("change");$(formInstructorIdentification+"deficiency").on("change",function(){$(this).is(":checked")?$("#InstructorIdentification_deficiencies input").removeAttr("disabled"):$("#InstructorIdentification_deficiencies input").removeAttr("checked").add().attr("disabled","disabled")});$(formInstructorIdentification+"deficiency_type_blindness").on("click",function(){b(),$(this).is(":checked")?($(formInstructorIdentification+"deficiency_type_low_vision").removeAttr("checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_monocular_vision").removeAttr("checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_deafness").removeAttr("checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):($(formInstructorIdentification+"deficiency_type_low_vision").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_monocular_vision").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_disability_hearing").is(":checked")||($(formInstructorIdentification+"deficiency_type_deafness").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("disabled")))});$(formInstructorIdentification+"deficiency_type_low_vision").on("click",function(){$(this).is(":checked")?($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):!$(formInstructorIdentification+"deficiency_type_monocular_vision").is(":checked")&&!$(formInstructorIdentification+"deficiency_type_deafness").is(":checked")&&($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_disability_hearing").is(":checked")||$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("disabled")),b()});$(formInstructorIdentification+"deficiency_type_monocular_vision").on("click",function(){$(this).is(":checked")?($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):!$(formInstructorIdentification+"deficiency_type_low_vision").is(":checked")&&!$(formInstructorIdentification+"deficiency_type_deafness").is(":checked")&&($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_disability_hearing").is(":checked")||$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("disabled")),b()});$(formInstructorIdentification+"deficiency_type_deafness").on("click",function(){$(this).is(":checked")?($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_disability_hearing").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):(!$(formInstructorIdentification+"deficiency_type_low_vision").is(":checked")&&!$(formInstructorIdentification+"deficiency_type_monocular_vision").is(":checked")&&($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("disabled")),$(formInstructorIdentification+"deficiency_type_disability_hearing").removeAttr("disabled")),b()});$(formInstructorIdentification+"deficiency_type_disability_hearing").on("click",function(){$(this).is(":checked")?($(formInstructorIdentification+"deficiency_type_deafness").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("checked","checked").attr("disabled","disabled")):$(formInstructorIdentification+"deficiency_type_blindness").is(":checked")||($(formInstructorIdentification+"deficiency_type_deafness").removeAttr("disabled"),!$(formInstructorIdentification+"deficiency_type_low_vision").is(":checked")&&!$(formInstructorIdentification+"deficiency_type_monocular_vision").is(":checked")&&$(formInstructorIdentification+"deficiency_type_deafblindness").removeAttr("disabled")),b()});$(formInstructorIdentification+"deficiency_type_deafblindness").on("click",function(){$(this).is(":checked")?($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_low_vision").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_monocular_vision").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_deafness").removeAttr("checked","checked").attr("disabled","disabled"),$(formInstructorIdentification+"deficiency_type_disability_hearing").removeAttr("checked","checked").attr("disabled","disabled")):($(formInstructorIdentification+"deficiency_type_blindness").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_low_vision").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_monocular_vision").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_deafness").removeAttr("disabled"),$(formInstructorIdentification+"deficiency_type_disability_hearing").removeAttr("disabled")),b()});$(formInstructorIdentification+"deficiency_type_phisical_disability").on("click",function(){b()});$(formInstructorIdentification+"deficiency_type_intelectual_disability").on("click",function(){b()});function b(){var e=0;e=$(formInstructorIdentification+"deficiency_type_blindness").is(":checked")?e+1:e,e=$(formInstructorIdentification+"deficiency_type_low_vision").is(":checked")?e+1:e,e=$(formInstructorIdentification+"deficiency_type_monocular_vision").is(":checked")?e+1:e,e=$(formInstructorIdentification+"deficiency_type_deafness").is(":checked")?e+1:e,e=$(formInstructorIdentification+"deficiency_type_disability_hearing").is(":checked")?e+1:e,e=$(formInstructorIdentification+"deficiency_type_deafblindness").is(":checked")?e+1:e,e=$(formInstructorIdentification+"deficiency_type_phisical_disability").is(":checked")?e+1:e,e=$(formInstructorIdentification+"deficiency_type_intelectual_disability").is(":checked")?e+1:e,e>=2?$(formInstructorIdentification+"deficiency_type_multiple_disabilities").attr("checked","checked"):$(formInstructorIdentification+"deficiency_type_multiple_disabilities").removeAttr("checked","checked")}var _="#InstructorDocumentsAndAddress_";$(_+"cpf").mask("000.000.000-00",{placeholder:"___.___.___-__"});$(_+"cpf").on("change",function(){const e="#"+$(this).attr("id");validateCpf($(e).cleanVal()).valid?removeError(e):addError(e,"Informe um CPF válido. Deve possuir apenas números.")});$(_+"cep").focusout(function(){var e=$(this).attr("id"),t="#"+e,i=$(t),a=_.replace("#",""),o=$("label[for="+a+"address]"),n=$("label[for="+a+"neighborhood]"),s=$("#"+a+"edcenso_uf_fk"),c=$("#"+a+"edcenso_city_fk"),r=!1,l=!1;i.val(i.val().toUpperCase()),r=validateCEP(i.val())||!(i.val().length>0),l=validateCEP(i.val())&&r,r?removeError(t):(i.attr("value",""),addError(t,"Informe um CEP cadastrado nos correios. Apenas números são aceitos. Deve possuir no máximo 8 caracteres.")),l?(addRequired(o),addRequired(n),addRequiredSelect2(s),addRequiredSelect2(c)):(removeRequired(o),removeRequired(n),removeRequiredSelect2(s),removeRequiredSelect2(c))});$(_+"address").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateInstructorAddress($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 1."))});$(_+"address_number").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateInstructorAddressNumber($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 1."))});$(_+"neighborhood").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateInstructorAddressNeighborhood($(this).val())?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 1."))});$(`#InstructorVariableData_high_education_initial_year_1, 
    #InstructorVariableData_high_education_initial_year_2,
    #InstructorVariableData_high_education_initial_year_3`).on("change",function(){if(this.value.length==4){var e=new Date;anoMinMax(2002,e.getFullYear(),this.value)?$(this).attr("value",""):$(this).attr("value","")}});$(`#InstructorVariableData_high_education_final_year_1,
    #InstructorVariableData_high_education_final_year_2,
    #InstructorVariableData_high_education_final_year_3`).on("change",function(){if(this.value.length==4){var e=new Date;anoMinMax(1941,e.getFullYear(),this.value)||$(this).attr("value","")}else $(this).attr("value","")});$(formInstructorvariableData+"scholarity").on("change",function(){$(this).val()==6?($("#instructorVariableData").show(),$("#tab-instructor-data1").attr("class","active sub-active"),$("#instructor-data1").attr("class","active sub-active"),$("#instructor-data2").hide(),$("#instructor-data3").hide(),$(formInstructorvariableData+"high_education_situation_1").removeAttr("disabled"),$(formInstructorvariableData+"high_education_formation_1").removeAttr("disabled"),$(formInstructorvariableData+"high_education_course_code_1_fk").removeAttr("disabled"),$(formInstructorvariableData+"high_education_final_year_1").removeAttr("disabled"),$(formInstructorvariableData+"high_education_institution_code_1_fk").removeAttr("disabled"),$(formInstructorvariableData+"high_education_situation_2").removeAttr("disabled"),$(formInstructorvariableData+"high_education_formation_2").removeAttr("disabled"),$(formInstructorvariableData+"high_education_course_code_2_fk").removeAttr("disabled"),$(formInstructorvariableData+"high_education_final_year_2").removeAttr("disabled"),$(formInstructorvariableData+"high_education_institution_code_2_fk").removeAttr("disabled"),$(formInstructorvariableData+"high_education_situation_3").removeAttr("disabled"),$(formInstructorvariableData+"high_education_formation_3").removeAttr("disabled"),$(formInstructorvariableData+"high_education_course_code_3_fk").removeAttr("disabled"),$(formInstructorvariableData+"high_education_final_year_3").removeAttr("disabled"),$(formInstructorvariableData+"high_education_institution_code_3_fk").removeAttr("disabled"),$(formInstructorvariableData+"post_graduation_specialization").removeAttr("disabled"),$(formInstructorvariableData+"post_graduation_master").removeAttr("disabled"),$(formInstructorvariableData+"post_graduation_doctorate").removeAttr("disabled"),$(formInstructorvariableData+"post_graduation_none").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_nursery").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_pre_school").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_basic_education_initial_years").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_basic_education_final_years").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_high_school").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_education_of_youth_and_adults").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_special_education").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_native_education").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_field_education").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_environment_education").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_human_rights_education").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_sexual_education").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_child_and_teenage_rights").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_ethnic_education").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_other").removeAttr("disabled"),$(formInstructorvariableData+"other_courses_none").removeAttr("disabled")):($("#instructorVariableData").hide(),$(formInstructorvariableData+"high_education_situation_1").val("").attr("disabled","disabled").trigger("change"),$(formInstructorvariableData+"high_education_formation_1").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_course_code_1_fk").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_initial_year_1").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_final_year_1").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_institution_code_1_fk").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_situation_2").val("").attr("disabled","disabled").trigger("change"),$(formInstructorvariableData+"high_education_formation_2").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_course_code_2_fk").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_initial_year_2").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_final_year_2").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_institution_code_2_fk").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_situation_3").val("").attr("disabled","disabled").trigger("change"),$(formInstructorvariableData+"high_education_formation_3").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_course_code_3_fk").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_initial_year_3").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_final_year_3").add().attr("disabled","disabled"),$(formInstructorvariableData+"high_education_institution_code_3_fk").add().attr("disabled","disabled"),$(formInstructorvariableData+"post_graduation_specialization").add().attr("disabled","disabled"),$(formInstructorvariableData+"post_graduation_master").add().attr("disabled","disabled"),$(formInstructorvariableData+"post_graduation_doctorate").add().attr("disabled","disabled"),$(formInstructorvariableData+"post_graduation_none").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_nursery").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_pre_school").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_basic_education_initial_years").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_basic_education_final_years").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_high_school").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_education_of_youth_and_adults").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_special_education").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_native_education").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_field_education").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_environment_education").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_human_rights_education").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_sexual_education").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_child_and_teenage_rights").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_ethnic_education").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_other").add().attr("disabled","disabled"),$(formInstructorvariableData+"other_courses_none").add().attr("disabled","disabled")),$(formInstructorvariableData+"high_education_initial_year_1").mask("0000"),$(formInstructorvariableData+"high_education_final_year_1").mask("0000"),$(formInstructorvariableData+"high_education_initial_year_2").mask("0000"),$(formInstructorvariableData+"high_education_final_year_2").mask("0000"),$(formInstructorvariableData+"high_education_initial_year_3").mask("0000"),$(formInstructorvariableData+"high_education_final_year_3").mask("0000"),$(formInstructorvariableData+"high_education_situation_1").on("change",function(){$(this).val()==""?($("#tab-instructor-data2").addClass("disabled"),$(formInstructorvariableData+"high_education_initial_year_1").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Início do Curso Superior 1"),$(formInstructorvariableData+"high_education_final_year_1").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Conclusão do Curso Superior 1"),$(formInstructorvariableData+"high_education_formation_1").prop("checked",!1).attr("disabled","disabled"),$("#high_education_course_area1").val("").attr("disabled","disabled").trigger("change.select2"),$(formInstructorvariableData+"high_education_course_code_1_fk").val("").attr("disabled","disabled").trigger("change.select2").closest(".control-group").find(".control-label").removeClass("required").html("Código do Curso Superior 1"),$(formInstructorvariableData+"high_education_institution_code_1_fk").closest(".control-group").hide()):($("#tab-instructor-data2").removeClass("disabled"),$(formInstructorvariableData+"high_education_formation_1").removeAttr("disabled"),$("#high_education_course_area1").removeAttr("disabled"),$(formInstructorvariableData+"high_education_course_code_1_fk").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Código do Curso Superior 1 *"),$(formInstructorvariableData+"high_education_institution_code_1_fk").closest(".control-group").show(),$(this).val()==1?($(formInstructorvariableData+"high_education_initial_year_1").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Início do Curso Superior 1"),$(formInstructorvariableData+"high_education_final_year_1").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Ano de Conclusão do Curso Superior 1 *")):($(formInstructorvariableData+"high_education_initial_year_1").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Ano de Início do Curso Superior 1 *"),$(formInstructorvariableData+"high_education_final_year_1").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Conclusão do Curso Superior 1")))}),$(formInstructorvariableData+"high_education_situation_1").trigger("change"),$(formInstructorvariableData+"high_education_situation_2").on("change",function(){$(this).val()==""?($("#tab-instructor-data3").addClass("disabled"),$(formInstructorvariableData+"high_education_initial_year_2").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Início do Curso Superior 2"),$(formInstructorvariableData+"high_education_final_year_2").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Conclusão do Curso Superior 2"),$(formInstructorvariableData+"high_education_formation_2").prop("checked",!1).attr("disabled","disabled"),$("#high_education_course_area2").val("").attr("disabled","disabled").trigger("change.select2"),$(formInstructorvariableData+"high_education_course_code_2_fk").val("").attr("disabled","disabled").trigger("change.select2").closest(".control-group").find(".control-label").removeClass("required").html("Código do Curso Superior 2"),$(formInstructorvariableData+"high_education_institution_code_2_fk").closest(".control-group").hide()):($("#tab-instructor-data3").removeClass("disabled"),$(formInstructorvariableData+"high_education_formation_2").removeAttr("disabled"),$("#high_education_course_area2").removeAttr("disabled"),$(formInstructorvariableData+"high_education_course_code_2_fk").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Código do Curso Superior 2 *"),$(formInstructorvariableData+"high_education_institution_code_2_fk").closest(".control-group").show(),$(this).val()==1?($(formInstructorvariableData+"high_education_initial_year_2").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Início do Curso Superior 2"),$(formInstructorvariableData+"high_education_final_year_2").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Ano de Conclusão do Curso Superior 2 *")):($(formInstructorvariableData+"high_education_initial_year_2").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Ano de Início do Curso Superior 2 *"),$(formInstructorvariableData+"high_education_final_year_2").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Conclusão do Curso Superior 2")))}),$(formInstructorvariableData+"high_education_situation_2").trigger("change"),$(formInstructorvariableData+"high_education_situation_3").on("change",function(){$(this).val()==""?($(formInstructorvariableData+"high_education_initial_year_3").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Início do Curso Superior 3"),$(formInstructorvariableData+"high_education_final_year_3").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Conclusão do Curso Superior 3"),$(formInstructorvariableData+"high_education_formation_3").prop("checked",!1).attr("disabled","disabled"),$("#high_education_course_area3").val("").attr("disabled","disabled").trigger("change.select2"),$(formInstructorvariableData+"high_education_course_code_3_fk").val("").attr("disabled","disabled").trigger("change.select2").closest(".control-group").find(".control-label").removeClass("required").html("Código do Curso Superior 3"),$(formInstructorvariableData+"high_education_institution_code_3_fk").closest(".control-group").hide()):($(formInstructorvariableData+"high_education_formation_3").removeAttr("disabled"),$("#high_education_course_area3").removeAttr("disabled"),$(formInstructorvariableData+"high_education_course_code_3_fk").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Código do Curso Superior 3 *"),$(formInstructorvariableData+"high_education_institution_code_3_fk").closest(".control-group").show(),$(this).val()==1?($(formInstructorvariableData+"high_education_initial_year_3").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Início do Curso Superior 3"),$(formInstructorvariableData+"high_education_final_year_3").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Ano de Conclusão do Curso Superior 3 *")):($(formInstructorvariableData+"high_education_initial_year_3").removeAttr("disabled").closest(".control-group").find(".control-label").addClass("required").html("Ano de Início do Curso Superior 3 *"),$(formInstructorvariableData+"high_education_final_year_3").val("").attr("disabled","disabled").closest(".control-group").find(".control-label").removeClass("required").html("Ano de Conclusão do Curso Superior 3")))}),$(formInstructorvariableData+"high_education_situation_3").trigger("change"),$(formInstructorvariableData+"high_education_course_code_1_fk").on("change",function(){var n=$(formInstructorvariableData+"high_education_course_code_1_fk option:selected").text();n=n.toUpperCase();var s=n.split("LICENCIATURA")[0];n!=s?$(formInstructorvariableData+"high_education_formation_1").add().attr("disabled","disabled"):$(formInstructorvariableData+"high_education_formation_1").removeAttr("disabled")}),$(formInstructorvariableData+"high_education_course_code_2_fk").on("change",function(){var n=$(formInstructorvariableData+"high_education_course_code_2_fk option:selected").text();n=n.toUpperCase();var s=n.split("LICENCIATURA")[0];n!=s?$(formInstructorvariableData+"high_education_formation_2").add().attr("disabled","disabled"):$(formInstructorvariableData+"high_education_formation_2").removeAttr("disabled")}),$(formInstructorvariableData+"high_education_course_code_3_fk").on("change",function(){var n=$(formInstructorvariableData+"high_education_course_code_3_fk option:selected").text();n=n.toUpperCase();var s=n.split("LICENCIATURA")[0];n!=s?$(formInstructorvariableData+"high_education_formation_3").add().attr("disabled","disabled"):$(formInstructorvariableData+"high_education_formation_3").removeAttr("disabled")});var e=formInstructorvariableData+"post_graduation_specialization",t=formInstructorvariableData+"post_graduation_master",i=formInstructorvariableData+"post_graduation_doctorate",a=formInstructorvariableData+"post_graduation_none";$(e+","+t+","+i).on("change",function(){var n=!($(e).is(":checked")||$(t).is(":checked")||$(i).is(":checked"));$(a).attr("checked",n)}),$(a).on("change",function(){$(a).is(":checked")&&$(e+","+t+","+i).attr("checked",!1)});var o=formInstructorvariableData+"other_courses_none";$(".other_courses").on("change",function(){var n=$(".other_courses").is(":checked");$(o).attr("checked",n)}),$(o).on("change",function(){$(o).is(":checked")&&$(".other_courses").attr("checked",!1)})});$(".save-instructor").click(function(){var e=!1,t="";$("#InstructorIdentification_name").val()===""&&(e=!0,t+="Campo <b>Nome</b> é obrigatório.<br>"),$("#InstructorDocumentsAndAddress_cpf").val()===""&&(e=!0,t+="Campo <b>Nº do CPF</b> é obrigatório.<br>"),$("#InstructorIdentification_birthday_date").val()===""&&(e=!0,t+="Campo <b>Data de Nascimento</b> é obrigatório.<br>"),$("#InstructorIdentification_sex").val()===""&&(e=!0,t+="Campo <b>Sexo</b> é obrigatório.<br>"),$("#InstructorIdentification_color_race").val()===""&&(e=!0,t+="Campo <b>Cor / Raça</b> é obrigatório.<br>"),$("#InstructorIdentification_filiation").val()===""&&(e=!0,t+="Campo <b>Filiação</b> é obrigatório.<br>"),$("#InstructorIdentification_nationality").val()===""&&(e=!0,t+="Campo <b>Nacionalidade</b> é obrigatório.<br>"),$("#InstructorIdentification_edcenso_nation_fk").val()===""&&(e=!0,t+="Campo <b>País de origem</b> é obrigatório.<br>"),$("#InstructorVariableData_scholarity").val()===""&&(e=!0,t+="Campo <b>Escolaridade</b> é obrigatório.<br>"),$("#InstructorDocumentsAndAddress_cpf_error").length&&(e=!0,t+="Corrija o campo <b>Nº do CPF</b>.<br>"),$("#InstructorDocumentsAndAddress_cep").val()!==""&&($("#InstructorDocumentsAndAddress_address").val()===""&&(e=!0,t+="Com o CEP preenchido, o campo <b>Endereço</b> se torna obrigatório.<br>"),$("#InstructorDocumentsAndAddress_neighborhood").val()===""&&(e=!0,t+="Com o CEP preenchido, o campo <b>Bairro / Povoado</b> se torna obrigatório.<br>"),$("#InstructorDocumentsAndAddress_edcenso_uf_fk").val()===""&&(e=!0,t+="Com o CEP preenchido, o campo <b>Estado</b> se torna obrigatório.<br>"),$("#InstructorDocumentsAndAddress_edcenso_city_fk").val()===""&&(e=!0,t+="Com o CEP preenchido, o campo <b>Cidade</b> se torna obrigatório.<br>")),$("#InstructorIdentification_nationality").val()==="1"&&$("#InstructorIdentification_edcenso_uf_fk").val()===""&&(e=!0,t+="Campo <b>Estado</b> é obrigatório.<br>"),$("#InstructorIdentification_nationality").val()==="1"&&$("#InstructorIdentification_edcenso_city_fk").val()===""&&(e=!0,t+="Campo <b>Cidade</b> é obrigatório.<br>"),$("#InstructorIdentification_deficiency").is(":checked")&&!$(".deficiencies-container input[type=checkbox]:checked").length&&(e=!0,t+="Como o campo <b>Deficiência</b> foi preenchido, deve-se preencher pelo menos um <b>Tipo de deficiência</b>.<br>"),$("#InstructorDocumentsAndAddress_area_of_residence").val()===""&&(e=!0,t+="Campo <b>Localização / Zona de residência</b> é obrigatório.<br>"),$("#InstructorDocumentsAndAddress_area_of_residence").val()==="1"&&$("#InstructorDocumentsAndAddress_diff_location").val()==="1"&&(e=!0,t+="Quando o campo <b>Localização / Zona de residência</b> é selecionado 'Urbano', o campo <b>Localização Diferenciada</b> não pode ser uma área de assentamento.<br>"),$("#InstructorIdentification_filiation").val()==="1"&&$("#InstructorIdentification_filiation_1").val()===""&&$("#InstructorIdentification_filiation_2").val()===""&&(e=!0,t+="Quando o campo <b>Filiação</b> é selecionado como 'Declarado', pelo menos um dos campos <b>Nome Completo da Filiação</b> ou <b>Nome Completo do Pai</b> devem ser preenchidos.<br>");var i=!1;$("#InstructorVariableData_high_education_situation_1").val()==="1"&&($("#InstructorVariableData_high_education_course_code_1_fk").val()===""||$("#InstructorVariableData_high_education_final_year_1").val()===""||$("#InstructorVariableData_high_education_institution_code_1_fk").val()==="")||$("#InstructorVariableData_high_education_situation_1").val()==="2"&&($("#InstructorVariableData_high_education_course_code_1_fk").val()===""||$("#InstructorVariableData_high_education_initial_year_1").val()===""||$("#InstructorVariableData_high_education_institution_code_1_fk").val()==="")?(e=!0,t+="Preencha os campos obrigatórios do <b>Curso 1</b>.<br>"):$("#InstructorVariableData_high_education_situation_1").val()!==""&&(i=!0),($("#InstructorVariableData_high_education_situation_2").val()==="1"&&($("#InstructorVariableData_high_education_course_code_2_fk").val()===""||$("#InstructorVariableData_high_education_final_year_2").val()===""||$("#InstructorVariableData_high_education_institution_code_2_fk").val()==="")||$("#InstructorVariableData_high_education_situation_2").val()==="2"&&($("#InstructorVariableData_high_education_course_code_2_fk").val()===""||$("#InstructorVariableData_high_education_initial_year_2").val()===""||$("#InstructorVariableData_high_education_institution_code_2_fk").val()===""))&&(e=!0,t+="Preencha os campos obrigatórios do <b>Curso 2</b>.<br>"),($("#InstructorVariableData_high_education_situation_3").val()==="1"&&($("#InstructorVariableData_high_education_course_code_3_fk").val()===""||$("#InstructorVariableData_high_education_final_year_3").val()===""||$("#InstructorVariableData_high_education_institution_code_3_fk").val()==="")||$("#InstructorVariableData_high_education_situation_3").val()==="2"&&($("#InstructorVariableData_high_education_course_code_3_fk").val()===""||$("#InstructorVariableData_high_education_initial_year_3").val()===""||$("#InstructorVariableData_high_education_institution_code_3_fk").val()===""))&&(e=!0,t+="Preencha os campos obrigatórios do <b>Curso 3</b>.<br>"),$("#InstructorVariableData_scholarity").val()==="6"&&!i&&(e=!0,t+="Quando o campo <b>Escolaridade</b> é selecionado como 'Superior', deve-se preencher pelo menos o <b>Curso 1</b>.<br>"),e?($("html, body").animate({scrollTop:0},"fast"),$(this).closest("form").find(".instructor-error").html(t).show()):($(this).closest("form").find(".instructor-error").hide(),$(_+"cpf").unmask(),$("#instructor-form input").removeAttr("disabled"),$("#instructor-form select").removeAttr("disabled").trigger("change.select2"),$(this).closest("form").submit())});$("#save-emails").click(function(){var e=!0;$("input").each(function(){if($(this).val()!=""&&!Te($(this).val()))return e=!1,$(".alert").show(),!1}),e&&($(".alert").hide(),$("#updateEmails-form").submit())});function Te(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}console.log(window.innerWidth);window.innerWidth<=639?($("#save-emails").removeClass("hide"),$(".saveDesktop").addClass("hide")):($(".saveDesktop").removeClass("hide"),$("#save-emails").addClass("hide"));$(".tab-instructor li a").click(function(){var e=$("ul.tab-instructor li.active"),t=$("div.active"),i="tab-instructor-identify",a="tab-instructor-address",o="tab-instructor-data",n="";switch($(this).parent().attr("id")){case i:n=i,$(".prev").hide(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide();break;case a:n=a,$(".prev").show(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide();break;case o:n=o,$(".prev").show(),$(".next").hide(),$(".last").show(),$(formInstructorvariableData+"scholarity").trigger("change");break}e.removeClass("active"),t.removeClass("active");var s=n.substring(4);s=s.toString(),$("#"+n).addClass("active"),$("#"+s).addClass("active"),$("html, body").animate({scrollTop:0},"fast")});$(".next").click(function(){var e=$("ul.tab-instructor li.active"),t=$("div.active"),i="tab-instructor-identify",a="tab-instructor-address",o="tab-instructor-data",n="";switch(e.attr("id")){case i:n=a,$(".prev").show();break;case a:n=o,$(".next").hide(),$(".last").show(),$("#instructorVariableData").hide();break;case o:n=o;break}e.removeClass("active"),t.removeClass("active");var s=n.substring(4);s=s.toString(),$("#"+n).addClass("active"),$("#"+s).addClass("active"),$("html, body").animate({scrollTop:0},"fast")});$(".prev").click(function(){var e=$("ul.tab-instructor li.active"),t=$("div.active"),i="tab-instructor-identify",a="tab-instructor-address",o="tab-instructor-data",n="";switch(e.attr("id")){case i:n=i;break;case a:n=i,$(".prev").hide();break;case o:n=a,window.location.search.includes("update")?$(".last").show():$(".last").hide(),$(".next").show();break}e.removeClass("active"),t.removeClass("active");var s=n.substring(4);n=n.toString(),$("#"+n).addClass("active"),$("#"+s).addClass("active"),$("html, body").animate({scrollTop:0},"fast")});$(".tab-instructordata li a").click(function(){var e=$('li[class="sub-active"]'),t=$("div.sub-active"),i="tab-instructor-data1",a="tab-instructor-data2",o="tab-instructor-data3",n="";switch($(this).parent().attr("id")){case i:n=i,$("#instructor-data1").show(),$("#instructor-data2").hide(),$("#instructor-data3").hide(),actualFilter=filter[1];break;case a:n=a,$("#instructor-data1").hide(),$("#instructor-data2").show(),$("#instructor-data3").hide(),actualFilter=filter[2];break;case o:n=o,$("#instructor-data1").hide(),$("#instructor-data2").hide(),$("#instructor-data3").show(),actualFilter=filter[3];break}e.removeClass("sub-active"),t.removeClass("sub-active");var s=n.substring(4);s=s.toString(),$("#"+s).addClass("sub-active"),$("#"+n).addClass("sub-active")});$("#InstructorIdentification_edcenso_uf_fk").on("change",function(){U(this,"#InstructorIdentification_edcenso_city_fk")});$("#InstructorDocumentsAndAddress_edcenso_uf_fk").on("change",function(){$('#InstructorDocumentsAndAddress_edcenso_city_fk option:not(:contains("Selecione uma cidade"))').remove(),U(this,"#InstructorDocumentsAndAddress_edcenso_city_fk")});$("#IES").on("change",function(){R("#IES","#InstructorVariableData_high_education_institution_code_1_fk")});$(function(){const e=$("#InstructorVariableData_high_education_institution_code_1_fk").val();R("#IES","#InstructorVariableData_high_education_institution_code_1_fk",e)});function U(e,t){$.ajax({type:"POST",url:"?r=instructor/getCity",data:{edcenso_uf_fk:$(e).val(),current_city:$(t).val()},success:function(i){const o=JSON.parse(i).join("");$(t).html(o),$(t).select2()}})}function R(e,t,i){console.log(i),$.ajax({type:"POST",url:"?r=instructor/getinstitution",data:{edcenso_uf_fk:$(e).val()},success:function(a){var o=a.map(n=>$(`<option value=${n.id} >${n.name}</option>`));o.push("<option value=9999999>OUTRO</option>"),$(t).html(o),$(t).select2("val",i)}})}window.location.search.includes("update")?$(".last").css("display","block"):$(".last").css("display","none");$(".heading-buttons").css("width",$("#content").width());$(window).load(function(){$("#IES").select2(),$(formInstructorvariableData+"scholarity").trigger("change"),$(formInstructorIdentification+"birthday_date").mask("99/99/9999"),$(formInstructorvariableData+"high_education_institution_code_1_fk, "+formInstructorvariableData+"high_education_institution_code_2_fk, "+formInstructorvariableData+"high_education_institution_code_3_fk").select2("enable",!0),$(formInstructorIdentification+"edcenso_nation_fk").select2("disable","true"),$(formInstructorIdentification+"edcenso_uf_fk").select2("disable","true"),$(formInstructorIdentification+"edcenso_city_fk").select2("disable","true"),$(formInstructorIdentification+"nationality").trigger("change")});$("#InstructorIdentification_deficiency").change(function(){$(this).is(":checked")?$("#InstructorIdentification_deficiencies").parent(".control-group").show():$("#InstructorIdentification_deficiencies").parent(".control-group").hide()});$("#InstructorIdentification_deficiency").trigger("change");$("#InstructorIdentification_filiation").change(function(){$(this).val()=="1"?($("#InstructorIdentification_filiation_1").removeAttr("disabled"),$("#InstructorIdentification_filiation_2").removeAttr("disabled")):($("#InstructorIdentification_filiation_1").val("").attr("disabled","disabled"),$("#InstructorIdentification_filiation_2").val("").attr("disabled","disabled"))});$("#show-instructor-civil-name").is(":checked")&&($(".instructor-civil-name").show(),$(".show-instructor-civil-name-box").hide());$(document).on("change","#show-instructor-civil-name",function(){$(this).is(":checked")&&($(".instructor-civil-name").show(),$(".show-instructor-civil-name-box").hide())});$("#InstructorIdentification_filiation").trigger("change");const j=new URLSearchParams(window.location.search);$(function(){const e=j.get("classroom_id");if(e){const t=j.get("discipline_id");loadDisciplinesFromClassroom(e,t)}});$("#classroom").change(function(e){const t=j.get("discipline_id");$(".js-grades-container, .js-grades-alert, .grades-buttons").hide(),loadDisciplinesFromClassroom(e.target.value,t)});$("#discipline").change(function(e,t){loadStudentsFromDiscipline(e.target.value),t==="saveGrades"&&$(".js-grades-alert").removeClass("alert-error").addClass("alert-success").text("Notas registradas com sucesso!").show()});$("#save").on("click",function(e){e.preventDefault(),$(".js-grades-alert").hide();let t=[];$(".grades-table tbody tr").each(function(){let i=[];$(".grades-table").attr("concept")==="1"?$(this).find(".grade-concept").each(function(){i.push({id:$(this).attr("gradeid"),modalityId:$(this).attr("modalityid"),concept:$(this).val()})}):$(this).find(".grade").each(function(){i.push({id:$(this).attr("gradeid"),modalityId:$(this).attr("modalityid"),value:$(this).val()})}),t.push({enrollmentId:$(this).find(".enrollment-id").val(),grades:i})}),$.ajax({type:"POST",url:"?r=grades/saveGrades",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val(),students:t,isConcept:$(".grades-table").attr("concept")},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("opacity","0.4").css("overflow","auto").css("pointer-events","none")},success:function(i){$("#discipline").trigger("change",["saveGrades"])}})});$("#close-grades-diary").on("click",function(e){e.preventDefault(),$.ajax({type:"POST",url:"?r=grades/calculateFinalMedia",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("opacity","0.4").css("overflow","auto").css("pointer-events","none")},success:function(t){$("#discipline").trigger("change",["saveGrades"])}})});$("#classroom").change(function(){$(this).val()!==""?$.ajax({type:"POST",url:"?r=grades/getDisciplines",cache:!1,data:{classroom:$("#classroom").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$("#discipline").attr("disabled","disabled")},success:function(e){e===""?$("#discipline").html("<option value='-1'></option>").trigger("change").show():$("#discipline").html(decodeHtml(e)).trigger("change").show(),$(".js-grades-loading").hide(),$("#discipline").removeAttr("disabled")}}):$(".js-grades-container, .js-grades-alert, .grades-buttons").hide()});$("#discipline").change(function(e,t){$(this).val()!==""?($(".js-grades-alert").hide(),$.ajax({type:"POST",url:"?r=grades/getReportCardGrades",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container").css("opacity","0.4").css("overflow","auto").css("pointer-events","none"),$("#grades-save-button").removeClass("hide")},success:function(i){if(i=JSON.parse(i),i.valid){let a=`
                    <h3>Aulas Dadas</h3>
                    <div class="row">
                    `;for(let o=0;o<3;o++){let n=o+1,s=null;$.each(i.students,function(c){var r;if(((r=this.grades[o])==null?void 0:r.givenClasses)!=null)return s=i.students[c].grades[o].givenClasses,!1}),s==null&&(s=""),a+=`
                        <div class="column is-one-tenth clearleft">
                            <div class="t-field-text">
                                <label class='t-field-text__label'>${n}° Trimestre</label>
                                <input type='text' class='givenClasses${o} t-field-text__input' value='${s}'>
                            </div>
                        </div>`}a+="</div>",a+=`
                    <table class='grades-table table table-bordered table-striped'  concept="${i.rule}">
                        <thead>
                            <tr>
                                <th colspan=14' class='table-title'>Lançamento de Notas</th>
                            </tr>
                            <tr>
                                <th rowspan='2' style='width:2%;'>Ordem</th>
                                <th rowspan='2' style='width:2%;'>Ficha individual</th>
                                <th rowspan='2' style='width:10%;'>Nome</th>
                                <th colspan='2' style='width:20%;'>1° Trimestre</th>
                                <th colspan='2' style='width:20%;'>2° Trimestre</th>
                                <th colspan='2' style='width:20%;'>3° Trimestre</th>
                    `,i.rule=="N"?a+="<th rowspan='2' style='width:10%;vertical-align:middle;'>Média Final</th>":a+=`
                            <th rowspan='2' style='width:10%;vertical-align:middle;'>Conceito Final</th>
                            <th rowspan='2' style='width:10%;vertical-align:middle;'>Situação</th>
                        `,a+=`
                            </tr>
                            <tr>
                            <th>Nota</th><th>Faltas</th>

                            <th>Nota</th><th>Faltas</th>

                            <th>Nota</th><th>Faltas</th>

                            </tr>
                        </thead>
                    <tbody>`,$.each(i.students,function(o){let n=this.daily_order||o+1;a+=`<tr>
                            <td class='grade-student-order final-media'>
                            ${n}
                            </td>
                            <td class="final-media">
                            <a class='t-link-button--info' rel='noopener' target='_blank' href='?r=forms/IndividualRecord&enrollment_id=${this.enrollmentId}'>
                                <span class="t-icon-printer"></span>
                            </a>
                            </td>
                            <td class='grade-student-name final-media'><input type='hidden' class='enrollment-id' value='${this.enrollmentId}'>
                            ${$.trim(this.studentName)}
                            </td>
                        `;for(let s=0;s<3;s++){const c=this.grades[s];let r;i.rule=="C"?r=c.concept:(c==null?void 0:c.value)==""||(c==null?void 0:c.value)==null?r="":r=parseFloat(c.value).toFixed(1);let l;(c==null?void 0:c.faults)==null?l="":l=c==null?void 0:c.faults,a+=buildInputOrSelect(i.rule,r,i.concepts),a+=`
                                <td class='grade-td'>
                                    <input type='text' class='faults' style='width:50px;text-align:center;' value='${l}'>
                                </td>
                            `}i.rule=="N"?a+=`<td style='font-weight: bold;font-size: 16px;' class='final-media'> ${this.finalMedia}</td>`:(a+=buildInputOrSelect(i.rule,this.finalConcept,i.concepts,!0),a+=`<td class="grade-td situation">${this.situation}</td>`),a+="</tr>"}),a+="</tbody></table>",$(".js-grades-container").html(a),t==="saveGrades"&&$(".js-grades-alert").removeClass("alert-error").addClass("alert-success").text("Notas registradas com sucesso!").show(),$(".js-grades-container, .grades-buttons").show()}else $(".js-grades-alert").addClass("alert-error").removeClass("alert-success").text(i.message).show();$(".js-grades-loading").hide(),$(".js-grades-container, .grades-buttons").css("overflow","auto").css("opacity","1").css("pointer-events","auto")}})):$(".js-grades-container, .js-grades-alert, .grades-buttons").hide()});$("#save").on("click",function(e){e.preventDefault(),$(".js-grades-alert").hide();let t=[];$(".grades-table tbody tr").each(function(){let i=[];$(".grades-table").attr("concept")==="C"?$(this).find(".grade-concept").each(function(a){i.push({value:$(this).val(),faults:$(this).parent().next().children().val(),givenClasses:$(".givenClasses"+a).val()})}):$(this).find(".grade").each(function(a){i.push({value:$(this).val(),faults:$(this).parent().next().children().val(),givenClasses:$(".givenClasses"+a).val()})}),t.push({enrollmentId:$(this).find(".enrollment-id").val(),grades:i,finalConcept:$(this).find(".final-concept").val()})}),$.ajax({type:"POST",url:"?r=grades/saveGradesReportCard",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val(),students:t,rule:$(".grades-table").attr("concept")},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("overflow","auto").css("opacity","0.4").css("pointer-events","none")},success:function(i){$("#discipline").trigger("change",["saveGrades"])}})});$(document).on("keyup","input.faults",function(e){let t=this.value;$.isNumeric(t)||(e.preventDefault(),t=""),this.value=t});$(document).on("keyup","input.grade",function(e){let t=this.value;if(!$.isNumeric(t))e.preventDefault(),t="";else{let i=/^(10|\d)([.,]\d?)?$/;(t==null?void 0:t.match(i))===null?t="":t>10&&(t=10)}this.value=t});let g=0;function Ne(){return g}function Pe(e){g=e}$("#classroom").change(function(){$(this).val()!==""?$.ajax({type:"POST",url:"?r=enrollment/getDisciplines",cache:!1,data:{classroom:$("#classroom").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$("#discipline").attr("disabled","disabled")},success:function(e){e===""?$("#discipline").html("<option value='-1'></option>").trigger("change").show():$("#discipline").html(decodeHtml(e)).trigger("change").show(),$(".js-grades-loading").hide(),$("#discipline").removeAttr("disabled")}}):$(".js-grades-container, .js-grades-alert, .grades-buttons").hide()});$("#discipline").change(function(e,t){$(this).val()!==""?($(".js-grades-alert").hide(),$.ajax({type:"POST",url:"?r=grades/getGradesRelease",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("opacity","0.4").css("overflow","auto").css("pointer-events","none"),$("#grades-save-button").removeClass("hide")},success:function(i){if(i=JSON.parse(i),i.valid){let a=i.unities.length,o=0,n=`
                    <h3>Aulas Dadas</h3>
                    <div class="row">
                    `;for(let s=0;s<a;s++){let c=s+1,r=null;$.each(i.students,function(l){var d;if(((d=this.grades[s])==null?void 0:d.givenClasses)!=null)return r=i.students[l].grades[s].givenClasses,o+=parseInt(r,10),!1}),r==null&&(r=""),n+=`
                        <div class="column is-one-tenth clearleft">
                            <div class="t-field-text">
                                <label class='t-field-text__label'>${c}° Trimestre</label>
                                <input type='text' class='givenClasses${s} t-field-text__input' value='${r}'>
                            </div>
                        </div>`}n+="</div>",n+=`
                    <table class='grades-table table table-bordered' concept="${i.rule}">
                        <thead>
                            <tr>
                                <th colspan=14' class='table-title'>Lançamento de Notas</th>
                            </tr>
                            <tr>
                                <th rowspan='2' style='width:2%;vertical-align:middle;'>Ordem</th>
                                <th rowspan='2' style='min-width:250px;vertical-align:middle;'>Nome</th>
                        `,$.each(i.unities,function(s){n+="<th colspan='2' style='width:20%;'>"+this.name+"</th>"}),i.rule=="N"?(i.hasRecovery==1&&(n+=`
                                <th rowspan='2' style='width:10%;vertical-align:middle;'>Recuperação Final</th>
                            `),n+=`
                            <th rowspan='2' style='width:10%;vertical-align:middle;'>Média Final</th>
                        `):n+=`
                            <th rowspan='2' style='width:10%;vertical-align:middle;'>Conceito Final</th>
                        `,n+=`

                                <th rowspan='2' style='width:2%;vertical-align:middle;'>Frequência</th>
                                <th rowspan='2' style='width:10%;vertical-align:middle;'>Situação</th>
                            </tr>
                            <tr>
                    `,$.each(i.unities,function(s){n+=`<th>Nota</th><th>Faltas</th>
`}),n+=`
                            </tr>
                        </thead>
                    <tbody>`,$.each(i.students,function(s){let c=this.daily_order||s+1,r=0;n+=`<tr>
                            <td class='grade-student-order final-media'>
                            ${c}
                            </td>
                            <td class='grade-student-name'><input type='hidden' class='enrollment-id' value='${this.enrollmentId}'>
                            ${$.trim(this.studentName)}
                            </td>
                        `,$.each(this.grades,function(d,h){let u;i.rule=="C"?u=this.concept:this.value==""||this.value==null?u="":u=parseFloat(this.value).toFixed(1);let m;this.faults==null?m="":(m=this.faults,r+=parseInt(this.faults,10)),n+=buildInputOrSelect(i.rule,u,i.concepts),n+=`
                                <td class='grade-td'>
                                    <input type='text' class='faults' style='width:50px;text-align:center;margin-bottom: 0px' value='${m}'>
                                </td>
                            `}),o!=0&&(g=(o-r)/o*100,g=parseInt(g),Pe(g)),i.rule=="N"?(i.hasRecovery==1&&(n+=`
                                <td class='grade-td rec-final-td'>
                                    <input type='text' class='rec-final' value='${this.recFinal}'>
                                </td>
                                `),n+=`
                                <td style='font-weight: bold;font-size: 16px;' class='final-media'> ${this.finalMedia}</td>
                            `):n+=buildInputOrSelect(i.rule,this.finalConcept,i.concepts,!0);let l=Ne();n+=`
                            <td class="final-media">${l}%</td>
                            <td class="grade-td situation">${this.situation}</td>
                        </tr>`}),n+="</tbody></table>",$(".js-grades-container").html(n),t==="saveGrades"&&$(".js-grades-alert").removeClass("alert-error").addClass("alert-success").text("Notas registradas com sucesso!").show(),$(".js-grades-container, .grades-buttons").show()}else $(".js-grades-alert").addClass("alert-error").removeClass("alert-success").text(i.message).show();$(".js-grades-loading").hide(),$(".js-grades-container, .grades-buttons").css("overflow","auto").css("opacity","1").css("pointer-events","auto")}})):$(".js-grades-container, .js-grades-alert, .grades-buttons").hide()});$("#save").on("click",function(e){e.preventDefault(),$(".js-grades-alert").hide();let t=[];$(".grades-table tbody tr").each(function(){let i=[];$(".grades-table").attr("concept")==="C"?$(this).find(".grade-concept").each(function(a){i.push({value:$(this).val(),faults:$(this).parent().next().children().val(),givenClasses:$(".givenClasses"+a).val()})}):$(this).find(".grade").each(function(a){i.push({value:$(this).val(),faults:$(this).parent().next().children().val(),givenClasses:$(".givenClasses"+a).val()})}),t.push({enrollmentId:$(this).find(".enrollment-id").val(),grades:i,recFinal:$(this).find(".rec-final").val(),finalConcept:$(this).find(".final-concept").val()})}),$.ajax({type:"POST",url:"?r=grades/saveGradesRelease",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val(),students:t,rule:$(".grades-table").attr("concept")},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("overflow","auto").css("opacity","0.4").css("pointer-events","none")},success:function(i){$("#discipline").trigger("change",["saveGrades"])}})});$(document).on("keyup","input.faults",function(e){let t=this.value;$.isNumeric(t)||(e.preventDefault(),t=""),this.value=t});$(document).on("keyup","input.grade, input.rec-final",function(e){let t=this.value;if(!$.isNumeric(t))e.preventDefault(),t="";else{let i=/^(\d+([.,]\d?)?)?$/;(t==null?void 0:t.match(i))===null&&(t="")}this.value=t});$("#close-grades-diary").on("click",function(e){e.preventDefault(),$.ajax({type:"POST",url:"?r=enrollment/calculateFinalMedia",cache:!1,data:{classroomId:$("#classroom").val(),disciplineId:$("#discipline").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("opacity","0.4").css("overflow","auto").css("pointer-events","none")},success:function(t){$("#discipline").trigger("change",["saveGrades"])}})});$("#classroom").change(function(){$(this).val()!==""?$.ajax({type:"POST",url:"?r=enrollment/getDisciplines",cache:!1,data:{classroom:$("#classroom").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$("#discipline").attr("disabled","disabled")},success:function(e){e===""?$("#discipline").html("<option value='-1'></option>").trigger("change").show():$("#discipline").html(decodeHtml(e)).trigger("change").show(),$(".js-grades-loading").hide(),$("#discipline").removeAttr("disabled")}}):$(".js-grades-container, .js-grades-alert, .grades-buttons").hide()});$("#discipline").change(function(e,t){$(this).val()!==""?($(".js-grades-alert").hide(),$.ajax({type:"POST",url:"?r=enrollment/getGrades",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val()},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("opacity","0.4").css("pointer-events","none")},success:function(i){if(i=JSON.parse(i),i.valid){var a=Object.keys(i.modalityColumns).length+(i.isUnityConcept?2:3),o="<table class='grades-table table table-bordered table-striped' concept='"+(i.isUnityConcept?"1":"0")+"'><thead><tr><th colspan='"+a+"' class='table-title'>Notas</th></tr><tr><th></th>";$.each(i.unityColumns,function(){o+="<th colspan='"+this.colspan+"'>"+this.name+"</th>"}),o+=i.isUnityConcept?"":"<th></th>",o+="</tr><tr class='modality-row'><th></th>",$.each(i.modalityColumns,function(){o+="<th>"+this+"</th>"}),o+=i.isUnityConcept?"":"<th>Média Anual</th>",o+="<th>Resultado</th>",o+="</tr></thead><tbody>",$.each(i.students,function(){o+="<tr><td class='grade-student-name'><input type='hidden' class='enrollment-id' value='"+this.enrollmentId+"'>"+$.trim(this.studentName)+"</td>",$.each(this.grades,function(){if(this.value==""?valueGrade="":valueGrade=parseFloat(this.value).toFixed(1),o+="<td class='grade-td'>",!i.isUnityConcept)o+="<input type='text' class='grade' modalityid='"+this.modalityId+"' value='"+valueGrade+"'>";else{o+="<select class='grade-concept' modalityid='"+this.modalityId+"'><option value=''></option>";var n=this.concept;$.each(i.conceptOptions,function(s,c){o+="<option value='"+s+"' "+(s===n?"selected":"")+">"+c+"</option>"})}o+="</td>"}),this.finalMedia==""?valueFinalMedia="":valueFinalMedia=parseFloat(this.finalMedia).toFixed(1),o+=i.isUnityConcept?"":"<td class='final-media'>"+valueFinalMedia+"</td>",o+="<td class='final-media'>"+this.situation+"</td>",o+="</tr>"}),o+="</tbody></table>",$(".js-grades-container").html(o),$(".grade-concept").select2(),t==="saveGrades"&&$(".js-grades-alert").removeClass("alert-error").addClass("alert-success").text("Notas registradas com sucesso!").show(),$(".js-grades-container, .grades-buttons").show()}else $(".js-grades-alert").addClass("alert-error").removeClass("alert-success").text(i.message).show();$(".js-grades-loading").hide(),$(".js-grades-container, .grades-buttons").css("opacity","1").css("pointer-events","auto")},complete:function(){initializeGradesMask()}})):$(".js-grades-container, .js-grades-alert, .grades-buttons").hide()});$("#save").on("click",function(e){e.preventDefault(),$(".js-grades-alert").hide();var t=[];$(".grades-table tbody tr").each(function(){var i=[];$(".grades-table").attr("concept")==="1"?$(this).find(".grade-concept").each(function(){i.push({modalityId:$(this).attr("modalityid"),concept:$(this).val()})}):$(this).find(".grade").each(function(){i.push({modalityId:$(this).attr("modalityid"),value:$(this).val()})}),t.push({enrollmentId:$(this).find(".enrollment-id").val(),grades:i})}),$.ajax({type:"POST",url:"?r=enrollment/saveGrades",cache:!1,data:{classroom:$("#classroom").val(),discipline:$("#discipline").val(),students:t,isConcept:$(".grades-table").attr("concept")},beforeSend:function(){$(".js-grades-loading").css("display","inline-block"),$(".js-grades-container, .grades-buttons").css("opacity","0.4").css("pointer-events","none")},success:function(i){$("#discipline").trigger("change",["saveGrades"])}})});$("#StudentEnrollment_school_admission_date").mask("00/00/0000",{placeholder:"dd/mm/aaaa"});$("#StudentEnrollment_school_admission_date").focusout(function(){var e="#"+$(this).attr("id"),t=stringToDate($("#StudentEnrollment_school_admission_date").val());(!validateDate($("#StudentEnrollment_school_admission_date").val())||!validateYear(t.year))&&$(e).val()!=""?addError(e,"Informe uma data válida no formato Dia/Mês/Ano. Não pode ser superior a data atual."):removeError(e)});$(".save-enrollment").click(function(){var e=!1,t="";$("#StudentEnrollment_school_admission_date").val()===""&&(e=!0,t+='Preencha o campo "Data de Ingresso na Escola"'),$("#reason").val()==="0"&&$("#statusDropdown").val()==="4"&&(e=!0,t+='Preencha o "Tipo da Baixa".'),$("#StudentEnrollment_public_transport").is(":checked")&&$("#StudentEnrollment_transport_responsable_government").val()===""&&(e=!0,t+="Quando o campo <b>Transporte escolar público</b> é marcado, o campo <b>Poder público responsável pelo transporte escolar</b> é obrigatório.<br>"),$("#StudentEnrollment_public_transport").is(":checked")&&!$("#transport_type input[type=checkbox]:checked").length&&(e=!0,t+="Quando o campo <b>Transporte escolar público</b> é marcado, o campo <b>Tipo de Transporte</b> é obrigatório. Selecione ao menos uma opção<br>"),$("#StudentEnrollment_public_transport").is(":checked")&&$("#StudentEnrollment_vehicle_type_van").is(":checked")&&$("#StudentEnrollment_vehicle_type_microbus").is(":checked")&&$("#StudentEnrollment_vehicle_type_bus").is(":checked")&&$("#StudentEnrollment_vehicle_type_bike").is(":checked")&&$("#StudentEnrollment_vehicle_type_animal_vehicle").is(":checked")&&$("#StudentEnrollment_vehicle_type_other_vehicle").is(":checked")&&(e=!0,t+="Não pode marcar todos os seguintes campos: <b>Van / Kombis</b>, <b>Microônibus</b>, <b>Ônibus</b>, <b>Bicicleta</b>, <b>Tração animal</b> e <b>Rodoviário - Outro</b>. Desmarque algumas dessas opções.<br>"),$("#StudentEnrollment_public_transport").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_5").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_5_15").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_15_35").is(":checked")&&$("#StudentEnrollment_vehicle_type_waterway_boat_35").is(":checked")&&(e=!0,t+="Não pode marcar todos os seguintes campos: <b>Embarcação - Capacidade de até 5 alunos</b>, <b>Embarcação - Entre 5 a 15 alunos</b>, <b>Embarcação - Entre 15 a 35 alunos</b> e <b>Embarcação - Acima de 35 alunos</b>. Desmarque algumas dessas opções.<br>"),e?($("html, body").animate({scrollTop:0},"fast"),$(this).closest("form").find(".enrollment-error").addClass("alert-error").removeClass("alert-warning").html(t).show()):$("#StudentEnrollment_classroom_fk")!==""&&$("#StudentEnrollment_classroom_fk option:selected").closest("optgroup").attr("label")!==$("#SchoolIdentification_inep_id option:selected").text()?$(this).closest("form").find(".enrollment-error").addClass("alert-warning").removeClass("alert-error").html("Você está atualizando a matrícula de um aluno que está em uma turma diferente da escola selecionada, <b>"+$("#SchoolIdentification_inep_id option:selected").text()+"</b>. É isso mesmo que você deseja? <span class='yes-update'>SIM</span> ou <span class='no-update'>NÃO</span>.").show():($(this).closest("form").find(".enrollment-error").hide(),$("#student input").removeAttr("disabled"),$("#student select").removeAttr("disabled").trigger("change.select2"),$(this).closest("form").submit())});$(document).on("click",".yes-update",function(){$("#student input").removeAttr("disabled"),$("#student select").removeAttr("disabled").trigger("change.select2"),$(this).closest("form").submit()});$(document).on("click",".no-update",function(){$(this).closest("form").find(".enrollment-error").hide()});$(window).on("load",function(){C("#student-enrollment",!0),$("#StudentEnrollment_classroom_fk").prop("disabled",!1),$("#StudentEnrollment_classroom_fk").on("change",function(e){var t=e.val;t==""?(C("#student-enrollment",!0),$("#StudentEnrollment_classroom_fk").prop("disabled",!1)):C("#student-enrollment",!1)})});function C(e,t){$(e+" :input").each(function(){var i=$(this);i.prop("disabled",t)})}$(document).on("change","#reasonDropdown select",function(){checkDropdownValue()});$(".heading-buttons").css("width",$("#content").width());$(document).on("change","#StudentEnrollment_public_transport",function(){$(this).is(":checked")?$("#transport_responsable, #transport_type").show():($("#StudentEnrollment_transport_responsable_government").val("").trigger("change.select2"),$("#transport_type input[type=checkbox]:checked").prop("checked",!1),$("#transport_responsable, #transport_type").hide())});$("#StudentEnrollment_public_transport").trigger("change");$(document).on("click","#delete-enrollment",function(){enrollment_id=$(this).attr("enrollment"),console.log(enrollment_id),$.ajax({url:`${window.location.host}?r=enrollment/checkenrollmentdelete&enrollmentId=${enrollment_id}`,success:function(e){response=JSON.parse(e),block=response.block,message=response.message,block?alert(message):confirm(message)&&$.ajax({url:`${window.location.host}?r=enrollment/delete&id=${enrollment_id}`,success:function(t){alert("Matrícula excluída com sucesso!"),window.location.reload()}})}})});$("#statusDropdown").change(function(){$(this).val()=="4"?($("#reasonDropdown").show(),Oe()):($("#reasonDropdown").hide(),$("#secondDropdown").hide())});$("#statusDropdown").trigger("change");$(document).on("change","#secondDropdown select",function(){Me()});function Oe(){var e=$("#reasonDropdown select").val(),t=$("#secondDropdown");t.hide(),e==="1"&&t.show()}function Me(){$("#secondDropdown select").val()}const f=window.location.search;$(document).ready(Fe);function Fe(){if($.fn.dataTable.pipeline=function(e){var t=$.extend({pages:5,url:"",data:null,method:"GET"},e),i=-1,a=null,o=null,n=null;return function(s,c,r){var l=!1,d=s.start,h=s.start,u=s.length,m=d+u;if(r.clearCache?(l=!0,r.clearCache=!1):(i<0||d<i||m>a||JSON.stringify(s.order)!==JSON.stringify(o.order)||JSON.stringify(s.columns)!==JSON.stringify(o.columns)||JSON.stringify(s.search)!==JSON.stringify(o.search))&&(l=!0),o=$.extend(!0,{},s),l){if(d<i&&(d=d-u*(t.pages-1),d<0&&(d=0)),i=d,a=d+u*t.pages,s.start=d,s.length=u*t.pages,typeof t.data=="function"){var S=t.data(s);S&&$.extend(s,S)}else $.isPlainObject(t.data)&&$.extend(s,t.data);return $.ajax({type:t.method,url:t.url,data:s,dataType:"json",cache:!1,beforeSend:function(){$(".loading-datatable-search").show()},success:function(k){$(".loading-datatable-search").hide(),n=$.extend(!0,{},k),i!=h&&k.data.splice(0,h-i),u>=-1&&k.data.splice(u,k.data.length),c(k)}})}else json=$.extend(!0,{},n),json.draw=s.draw,json.data.splice(0,d-i),json.data.splice(u,json.data.length),c(json)}},$.fn.dataTable.Api.register("clearPipeline()",function(){return this.iterator("table",function(e){e.clearCache=!0})}),!($(".js-tag-table").has(".empty").length>0)&&$(".js-tag-table").length){debugger;const e=window.innerWidth<=768,t=$(".js-tag-table th").length,i=new Array(t-1).fill(1).map((a,o)=>o+1);$.getScript("themes/default/js/datatablesptbr.js",function(){let a;(f.includes("school")||f.includes("activeDisableUser"))&&(a=[2]),(f.includes("instructor")||f.includes("courseplan")||f.includes("manageUsers"))&&(a=[3]),(f.includes("classroom")||f.includes("student")||f.includes("curricularmatrix")||f.includes("professional"))&&(a=[4]),f.includes("student")?$(".js-tag-table").DataTable({language:getLanguagePtbr(),serverSide:!0,responsive:!0,ajax:$.fn.dataTable.pipeline({url:"?r=student/getstudentajax",pages:5,method:"POST",data:function(o){return o.page=parseInt(o.start/o.length)+1,o.perPage=o.length,o.search={value:$('input[type="search"]').val()},o}}),select:{items:"cell"},columnDefs:[e?{className:"none",targets:i}:{orderable:!1,targets:[5]}],searching:!0}):f.includes("stock")?($(".stock-items-table").dataTable({language:getLanguagePtbr(),responsive:!0,select:{items:"cell"},ordering:!1,columnDefs:[e?{className:"none",targets:i}:{orderable:!1,targets:a}]}),$(".transactions-table").dataTable({language:getLanguagePtbr(),responsive:!0,select:{items:"cell"},ordering:!1,columnDefs:[e?{className:"none",targets:i}:{orderable:!1,targets:a}]})):$(".js-tag-table").dataTable({language:getLanguagePtbr(),responsive:!0,select:{items:"cell"},columnDefs:[e?{className:"none",targets:i}:{orderable:!1,targets:a}]}),f.includes("school")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar escola"):f.includes("activeDisableUser")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar usuário"):f.includes("classroom")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar turma"):f.includes("instructor")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar professor"):f.includes("manageUsers")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar usuário"):f.includes("student")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar aluno"):f.includes("curricularmatrix")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar matriz"):f.includes("courseplan")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar plano de aula"):f.includes("professional")?$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar profissional"):f.includes("curricularcomponents")?$('.dataTables_filter input[type="search"]').attr("placeholder"," Pesquisar componente"):f.includes("stock")?($('.stock-container .dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar Itens"),$('.transactions-container .dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar Movimentações")):f.includes("lunch/index")&&$('.dataTables_filter input[type="search"]').attr("placeholder","  Pesquisar cardápios"),$(".dataTables_filter label").contents().filter(function(){return this.nodeType===3}).remove(),$(".dataTables_filter label").prepend('<img src="../../../themes/default/img/search-icon.svg">'),$("#student-identification-table_filter").css("display","flex").prepend('<img class="loading-datatable-search" style="display:none; margin-top: 1.2%; height: 30px; width: 30px; padding: 4px" height="30px" width="30px" src="../../../themes/default/img/loadingTag.gif" alt="TAG Loading">')})}}$(document).on("focusout",".course-class-objective",function(){var e=$(this).attr("id");$(this).val().length>=3?removeError("#"+e):addError("#"+e,"Campo 'Objetivo' precisa ter pelo menos 3 caracteres.")});$(document).on("keyup",".course-class-objective",function(){var e=$(this).attr("id");$(this).val().length>=3&&removeError("#"+e)});const w=["tab-create-plan","tab-class"];function q(e){var t=$(".js-tab-control li.active"),i=$("div .active"),a=w.length-1;e==0?($(".prev").hide(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide()):e==a?($(".prev").show(),$(".next").hide(),$(".last").show()):($(".prev").show(),$(".next").show(),window.location.search.includes("update")?$(".last").show():$(".last").hide()),newTab=w[e],t.removeClass("active"),i.removeClass("active"),newPane=newTab.substring(4).toString(),$("#"+newTab).addClass("active"),$("#"+newPane).addClass("active"),$("html, body").animate({scrollTop:0},"fast")}function Ue(){var e=$(".js-tab-control li.active"),t=w.indexOf(e.attr("id"));q(t+1)}function Re(){var e=$(".js-tab-control li.active"),t=w.indexOf(e.attr("id"));q(t-1)}function Ve(e){var t=e.attr("id"),i=w.indexOf(t);q(i)}$(".tab-courseplan li a").click(function(){var e=$(this).parent();Ve(e)});$(".next").click(function(){Ue()});$(".prev").click(function(){Re()});Array();var V;$(document).ready(function(){initDatatable(),$(".js-course-plan-id").val()!==""&&$("#CoursePlan_modality_fk, #CoursePlan_discipline_fk").attr("disabled","disabled")});$("#course-classes tbody").on("click","td.details-control",function(){var e=$(this).closest("tr"),t=$(this).children("img").first(),i=V.row(e);i.child.isShown()?e.next().toggle():(i.child(format(i.data())).show(),e.next().find("select.type-select, select.resource-select").select2(),e.next().find("select.ability-select").select2({formatSelection:function(a){var o=a.text.split("|");return o[0]},formatResult:function(a){var o=a.text.split("|");return o.length===1?"<div class='ability-optgroup'><b>"+o[0]+"</b></div>":"<div><b class='ability-code'>("+o[0]+")</b> <span class='ability-description'>"+o[1]+"</span></div>"},escapeMarkup:function(a){return a}}),e.next().addClass("detailed-row").show()),e.next().is(":visible")?t.addClass("closed"):t.removeClass("closed")});$(document).on("click","#new-course-class",function(){addCoursePlanRow()});$(document).on("click",".js-remove-course-class",function(){$(this).hasClass("js-unavailable")||removeCoursePlanRow(this)});$(document).on("keyup",".course-class-objective",function(){var e=$(this).val();$(this).parents("tr").prev().children(".dt-justify").html(e)});$(document).on("change","#CoursePlan_modality_fk",function(e,t){$("#CoursePlan_discipline_fk").val("").trigger("change.select2"),$(this).val()!==""?$.ajax({type:"POST",url:"?r=courseplan/getDisciplines",cache:!1,data:{stage:$("#CoursePlan_modality_fk").val()},beforeSend:function(){$(".js-course-plan-loading-disciplines").css("display","inline-block"),$("#CoursePlan_discipline_fk").attr("disabled","disabled")},success:function(i){i=JSON.parse(i);var a="<option value=''>Selecione o componente curricular/eixo...</option>";$.each(i,function(){var o=t!==void 0&&$("#CoursePlan_discipline_fk").attr("initval")!==""&&$("#CoursePlan_discipline_fk").attr("initval")===this.id?"selected":"";a+="<option value='"+this.id+"' "+o+">"+this.name+"</option>"}),$("#CoursePlan_discipline_fk").html(a).trigger("change").show(),$(".js-course-plan-loading-disciplines").hide(),$(".js-course-plan-id").val()===""&&$("#CoursePlan_discipline_fk").removeAttr("disabled")}}):$("#CoursePlan_discipline_fk").html("<option value=''>Selecione o componente curricular/eixo...</option>").trigger("change").show()});$("#CoursePlan_modality_fk").trigger("change",[!0]);$(document).on("change","#CoursePlan_discipline_fk",function(){$(".js-abilities-parents, .js-abilities-panel").html(""),$(this).val()!==""?$.ajax({type:"POST",url:"?r=courseplan/courseplan/getAbilitiesInitialStructure",cache:!1,data:{discipline:$("#CoursePlan_discipline_fk").val()},beforeSend:function(){$(".js-course-plan-loading-abilities").css("display","inline-block")},success:function(e){e=JSON.parse(e),Object.keys(e.options).length?($(".js-alert-ability-structure").hide(),e.options[0].code===null?$(".js-abilities-parents").html(buildAbilityStructureSelect(e)):$(".js-abilities-panel").html(buildAbilityStructurePanel(e)),$(".ability-structure-select").css("width","100%")):$(".js-alert-ability-structure").text("Não foram cadastradas habilidades para essa disciplina.").show(),$(".js-course-plan-loading-abilities").hide()}}):$(".js-alert-ability-structure").text("Para adicionar habilidades, é preciso primeiro escolher a etapa e a disciplina do plano.").show()});$(document).on("change",".ability-structure-select",function(){var e=$(this).closest(".ability-structure-container");e.nextAll().remove(),$(".js-abilities-panel").children().remove();var t=$(this).val();$(this).val()!==""&&$.ajax({type:"POST",url:"?r=courseplan/courseplan/getAbilitiesNextStructure",cache:!1,data:{id:t},beforeSend:function(){$(".loading-abilities-select").show()},success:function(i){i=JSON.parse(i),i.options[0].code===null?$(".js-abilities-parents").append(buildAbilityStructureSelect(i)):$(".js-abilities-panel").html(buildAbilityStructurePanel(i)),$(".loading-abilities-select").hide(),$(".ability-structure-select").css("width","100%")}})});$(document).on("click",".add-resource",function(e){e.preventDefault(),$(this).parent().find("select.resource-select").val()!==""&&$(this).parent().find(".resource-amount").val()!==""&&$(this).parent().find(".resource-amount").val()>0&&addResource(this)});$(document).on("click",".remove-resource",function(){removeResource(this)});$(document).on("click",".add-abilities",function(e){e.preventDefault();var t=$(this).closest("tr").prev(),i=V.row(t);$(".course-class-index").val(i.data().class),$(".js-abilities-selected").find(".ability-panel-option").remove(),$(".js-abilities-panel").find(".ability-panel-option").removeClass("selected");var a=$(this).closest(".courseplan-ability-container").find(".courseplan-abilities-selected").find(".ability-panel-option");if(a.length){var o=a.clone().appendTo(".js-abilities-selected");o.find("i").removeClass("fa-check-square").addClass("fa-minus-square"),a.each(function(){var n=$(".js-abilities-panel").find(".ability-panel-option-id[value="+$(this).find(".ability-panel-option-id").val()+"]");n.length&&n.closest(".ability-panel-option").addClass("selected")}),$(".js-abilities-selected").show()}else $(".js-abilities-selected").hide();$("#js-selectAbilities").modal("show")});$(document).on("click",".add-new-resource",function(e){e.preventDefault(),$("#js-createResource").modal("show")});$(document).on("click",".remove-new-resource",function(e){e.preventDefault(),removeNewResource(this)});$(document).on("click",".confirm-new-resource",function(e){e.preventDefault(),addNewResources()});$(document).on("click",".save-new-resources",function(e){e.preventDefault(),saveNewResources()});$(document).on("click",".ability-panel-option",function(){if($(this).closest(".js-abilities-panel").length){if(!$(this).hasClass("selected")){var e=$(this).clone().appendTo(".js-abilities-selected");e.find("i").removeClass("fa-plus-square").addClass("fa-minus-square"),$(this).addClass("selected"),$(".js-abilities-selected").show()}}else if($(this).closest(".js-abilities-selected").length){var t=$(this).find(".ability-panel-option-id").val();$(this).remove(),$(".js-abilities-panel").find(".ability-panel-option-id[value="+t+"]").closest(".ability-panel-option").removeClass("selected"),$(".js-abilities-selected").find(".ability-panel-option").length||$(".js-abilities-selected").hide()}});$(document).on("click",".js-add-selected-abilities",function(){var e=$(".course-class-"+$(".course-class-index").val());e.find(".courseplan-abilities-selected").html($(".js-abilities-selected").find(".ability-panel-option").clone()),e.find(".courseplan-abilities-selected").find(".ability-panel-option i").removeClass("fa-minus-square").addClass("fa-check-square"),e.find(".ability-panel-option-id").each(function(t){$(this).attr("name","course-class["+$(".course-class-index").val()+"][ability]["+t+"]")})});$("#print").on("click",function(){window.print()});$("#save").on("click",function(){var e=validateSave();e&&$("#course-plan-form").submit()});$(document).on("click",".unsync",function(e){e.preventDefault(),$("#syncClassroomToSEDSP").find("form").attr("action",$(this).attr("href")),$("#syncClassroomToSEDSP").modal("show")});$(document).on("click",".sync-classroom-button",function(){$(this).closest("form").submit()});$(form+"name").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateClassroomName($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 4."))});$(form+"initial_time").mask("99:99");$(form+"initial_time").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase());var t=form+"initial_hour",i=form+"initial_minute";if(!validateTime($(e).val()))$(e).attr("value",""),$(t).attr("value",""),$(i).attr("value",""),addError(e,"O horário deve ser válido e inferior ao horário final.");else{var a=$(e).val().split(":");a[1]=Math.floor(a[1]/5)*5,$(t).attr("value",a[0]=="0"?"00":a[0]),$(i).attr("value",a[1]=="0"?"00":a[1]),removeError(e)}});$(form+"final_time").mask("99:99");$(form+"final_time").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase());var t=form+"final_hour",i=form+"final_minute";if(!validateTime($(e).val())||$(form+"final_time").val()<=$(form+"initial_time").val())$(e).attr("value",""),$(t).attr("value",""),$(i).attr("value",""),addError(e,"O horário deve ser válido e superior ao horário inicial.");else{var a=$(e).val().split(":");a[1]=Math.floor(a[1]/5)*5,$(t).attr("value",a[0]=="0"?"00":a[0]),$(i).attr("value",a[1]=="0"?"00":a[1]),removeError(e)}});$(form+"week_days input[type=checkbox]").change(function(){var e="#"+$(form+"week_days").attr("id");$(form+"week_days input[type=checkbox]:checked").length==0?addError(e,"Escolha ao menos um dia."):removeError(e)});$(form+"week_days").focusout(function(){var e="#"+$(this).attr("id");$(form+"week_days input[type=checkbox]:checked").length==0?addError(e,"Escolha ao menos um dia."):removeError(e)});$("#discipline").change(function(){var e="#discipline";$(e).val().length==0?addError(e,"Selecione a Disciplina."):removeError(e)});$(".save-classroom").click(function(){var e=!1,t="";$("#Classroom_name").val()===""&&(e=!0,t+="Campo <b>Nome</b> é obrigatório.<br>"),$("#Classroom_modality").val()===""&&(e=!0,t+="Campo <b>Modalidade</b> é obrigatório.<br>"),$("#Classroom_edcenso_stage_vs_modality_fk").val()===""&&(e=!0,t+="Campo <b>Etapa de Ensino</b> é obrigatório.<br>"),$("#SchoolIdentification_edcenso_uf_fk").val()===""&&(e=!0,t+="Campo <b>Estado</b> é obrigatório.<br>"),$("#Classroom_initial_time").val()===""&&(e=!0,t+="Campo <b>Horário Inicial</b> é obrigatório.<br>"),$("#Classroom_final_time").val()===""&&(e=!0,t+="Campo <b>Horário Final</b> é obrigatório.<br>"),$("#Classroom_week_days input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Dias da semana</b> é obrigatório. Selecione ao menos um dia.<br>"),$("#Classroom_pedagogical_mediation_type").val()===""&&(e=!0,t+="Campo <b>Tipo de Mediação Didático-Pedagógica</b> é obrigatório.<br>"),$(".js-assistance-types-container input[type=checkbox]:checked").length||(e=!0,t+="Campo <b>Tipos de Atendimento</b> é obrigatório. Selecione ao menos uma opção.<br>"),$("#Classroom_complementary_activity").is(":checked")&&$("#Classroom_complementary_activity_type_1").val()===null&&(e=!0,t+="Campo <b>Atividades Complementares</b> é obrigatório.<br>"),($("#Classroom_pedagogical_mediation_type").val()==="1"||$("#Classroom_pedagogical_mediation_type").val()==="2")&&$("#Classroom_diff_location").val()===""&&(e=!0,t+="Campo <b>Local de Funcionamento Diferenciado</b> é obrigatório.<br>"),$("#Classroom_sedsp_acronym").length&&$("#Classroom_sedsp_acronym").val()===""&&(e=!0,t+="Campo <b>Turma</b> é obrigatório.<br>"),$("#Classroom_sedsp_school_unity_fk").length&&$("#Classroom_sedsp_school_unity_fk").val()===""&&(e=!0,t+="Campo <b>Unidade Escolar</b> é obrigatório.<br>"),$("#Classroom_sedsp_classnumber").length&&($("#Classroom_sedsp_classnumber").val()===""||$("#Classroom_sedsp_classnumber").val()<1||$("#Classroom_sedsp_classnumber").val()>99)&&(e=!0,t+="Campo <b>Sala de Aula</b> é obrigatório, com limite de 02 dígitos.<br>"),$("#Classroom_sedsp_max_physical_capacity").length&&($("#Classroom_sedsp_max_physical_capacity").val()===""||$("#Classroom_sedsp_max_physical_capacity").val()<1||$("#Classroom_sedsp_max_physical_capacity").val()>99)&&(e=!0,t+="Campo <b>Capacidade Física Máxima</b> é obrigatório, com limite máximo de 99.<br>"),e?($("html, body").animate({scrollTop:0},"fast"),$(this).closest("form").find(".classroom-alert").addClass("alert-error").removeClass("alert-warning").removeClass("alert-success").html(t).show()):($(this).closest("form").find(".classroom-alert").hide(),$("#teachingData").val(JSON.stringify(teachingData)),$("#disciplines").val(JSON.stringify(disciplines)),$("#classroom input").removeAttr("disabled"),$("#classroom select").removeAttr("disabled").trigger("change.select2"),$(this).closest("form").submit())});var Le=$(".regent-teacher").length,I=Le,ze=function(){var e=$(this).parent().parent().parent().attr("instructor"),t=$(this).parent().attr("discipline"),i=$(this).attr("regent");e==null?(e=$(this).parent().attr("instructor"),e==null?(disciplines[t]=0,$("#DisciplinesWithoutInstructors li[discipline = "+t+"]").remove()):(i==1&&I--,Ge(e))):L(e,t)},Ge=function(e){for(var t=0;t<teachingData.length;t++)if(teachingData[t].Instructor==e){for(var i=0;i<teachingData[t].Disciplines.length;i++)L(e,teachingData[t].Disciplines[i]);teachingData.splice(t,1)}$("li[instructor = "+e+"]").remove()},L=function(e,t){for(var i=0,a=0;a<teachingData.length;a++)for(var o=0;o<teachingData[a].Disciplines.length;o++)t==teachingData[a].Disciplines[o]&&i++;for(var a=teachingData.length;a--;)if(teachingData[a].Instructor==e){for(var o=teachingData[a].Disciplines.length;o--;)teachingData[a].Disciplines[o]==t&&teachingData[a].Disciplines.splice(o,1);teachingData[a].Disciplines.length==0&&(teachingData.splice(a,1),$("li[instructor = "+e+"]").remove()),i<=1&&(disciplines[t]=0)}$("li[instructor = "+e+"] li[discipline = "+t+"]").remove()};$(document).on("change","#Role",function(){$(".regent-teacher-container").hide(),$(this).val()==1&&I<2&&$(".regent-teacher-container").show()});var Je=function(){var e=$("#s2id_Instructors span").text(),t=$("#Instructors").val(),i=$("#Disciplines").val(),a=[],o=$("#Role").val(),n=$("#ContractType").val(),s=$("#RegentTeacher").is(":checked")?1:0;if($.each($("#s2id_Disciplines li.select2-search-choice"),function(u,m){a[u]=$(m).text()}),t.length==0)$.each(a,function(u,m){$("#DisciplinesWithoutInstructors li[discipline="+i[u]+"]").length==0&&$("#DisciplinesWithoutInstructors").append("<li class='li-discipline' discipline='"+i[u]+"'><span>"+m+"</span><a href='#' class='deleteTeachingData delete' title='Excluir'> </a> </li>"),disciplines[i[u]]=2});else{var c={Instructor:t,Classroom:null,Role:o,ContractType:n,RegentTeacher:s,Disciplines:[]},r="",l="",d=$("li[instructor = "+t+"]").length!=0,h=-1;d?($.each(teachingData,function(u,m){m.Instructor==t&&(h=u)}),l="#DisciplinesWithInstructors li[instructor = "+t+"] ul"):(regentLabel="",s&&(regentLabel=" (Regente)",I++),l="#DisciplinesWithInstructors",r="<li class='li-instructor' instructor='"+t+"'><span>"+e+"</span><span>"+regentLabel+"</span><a href='#' class='deleteTeachingData delete' title='Excluir' regent='"+s+"'> </a><ul>"),$.each(a,function(u,m){var S=$("li[instructor = "+t+"] li[discipline="+i[u]+"]").length!=0;S||(r+="<li class='li-discipline' discipline='"+i[u]+"'>"+m+"<a href='#' class='deleteTeachingData delete' title='Excluir'></a></li>",d?teachingData[h].Disciplines.push(i[u]):c.Disciplines.push(i[u])),disciplines[i[u]]=1}),d||(r+="</ul></li>",teachingData.push(c)),$(l).append(r)}I==2&&$(".regent-teacher-container").hide(),$("#RegentTeacher").prop("checked",!1),console.log(I)},z=function(){var e=this,t='<option value="">Selecione a disciplina</option>';$(e).val()==""?$.each(disciplines,function(i,a){a==2&&(t+='<option value="'+i+'">'+disciplinesLabels[i]+"</option>")}):$.each(teachingData,function(i,a){a.Instructor==$(e).val()&&$.each(a.Disciplines,function(o,n){t+='<option value="'+n+'">'+disciplinesLabels[n]+"</option>"})}),discipline.html(t).trigger("change"),uDiscipline.html(t).trigger("change")};instructor.on("change",z);uInstructor.on("change",z);$(document).on("click",".deleteTeachingData",ze);$("#addTeachingData").on("click",Je);$(document).on("change",".js-assistance-types-container input[type=checkbox]",function(){$(this).attr("id")!=="Classroom_aee"?($("#Classroom_aee").prop("checked",!1),$(this).attr("id")==="Classroom_complementary_activity"&&$(this).is(":checked")?$("#complementary_activity").show():($("#Classroom_complementary_activity_type_1").val(null).trigger("change.select2"),$("#complementary_activity").hide())):$(".js-assistance-types-container input[type=checkbox]").not("#Classroom_aee").prop("checked",!1)});$(document).on("change","#Classroom_pedagogical_mediation_type",function(){$(this).val()==="1"||$(this).val()==="2"?$("#diff_location_container").show():($("#Classroom_diff_location").val("").trigger("change.select2"),$("#diff_location_container").hide())});$(document).on("change","#Classroom_edcenso_stage_vs_modality_fk",function(){$(this).val()!==""&&$.ajax({url:"?r=classroom/updateDisciplinesAndCalendars",type:"POST",data:{id:$("#Classroom_edcenso_stage_vs_modality_fk").val()},beforeSend:function(){$("#Classroom_edcenso_stage_vs_modality_fk").attr("disabled","disabled"),$("#tab-instructor").css("pointer-events","none"),$(".loading-disciplines").css("display","inline-block")}}).success(function(e){e=JSON.parse(e);var t="";if(e.disciplines.length){$(".no-curricular-matrix-error").hide();var i=[];$.each(e.disciplines,function(){t+="<option value='"+this.id+"'>"+this.name+"</option>",i.push(this.id)}),$("#Disciplines").html(t),$(".li-discipline").each(function(){i.includes($(this).attr("discipline"))||$(this).remove()})}else $(".no-curricular-matrix-error").show(),$("#Disciplines").html(""),$(".li-discipline").remove(),$("#DisciplinesWithoutInstructors").html("");e.calendars.length?(t="",t+="<option value=''>Selecione um Calendário</option>",$.each(e.calendars,function(){t+="<option value='"+this.id+"'>"+this.title+"</option>"}),$("#Calendars").html(t),$("#Calendars").attr("selectedOption")===""?$("#Calendars option:first").attr("selected","selected").trigger("change.select2"):$("#Calendars option[value="+$("#Calendars").attr("selectedOption")+"]").attr("selected","selected").trigger("change.select2")):$("#Calendars").html("")}).complete(function(){$("#Classroom_edcenso_stage_vs_modality_fk").hasClass("disabled-field")||$("#Classroom_edcenso_stage_vs_modality_fk").removeAttr("disabled"),$("#tab-instructor").css("pointer-events","auto"),$(".loading-disciplines").hide()})});$("#Classroom_edcenso_stage_vs_modality_fk").trigger("change");$("#js-t-sortable").on("sortupdate",function(e,t){newOrderArray=$(this).sortable("toArray"),$.ajax({url:`${window.location.host}?r=classroom/changeenrollments`,type:"POST",data:{list:newOrderArray},beforeSend:function(){$("#js-t-sortable").sortable("destroy"),$("#daily").css("opacity",.5)}}).success(function(i){const a=JSON.parse(DOMPurify.sanitize(i)),o=[];a.forEach(n=>{const s=document.createElement("li");s.id=n.id,s.className="ui-state-default";const c=document.createElement("span");c.className="t-icon-slip";const r=document.createElement("span");r.textContent=n.daily_order+" "+n.name,s.appendChild(c),s.appendChild(r),o.push(s)}),$("#js-t-sortable").html(o),$("#daily").css("opacity",1),$("#js-t-sortable").sortable()})});$(document).on("click",".sync-enrollments",function(e){var t=this;e.preventDefault(),$.ajax({url:"?r=classroom/syncUnsyncedStudents",type:"POST",data:{classroomId},beforeSend:function(){$(t).css("pointer-events","none"),$(".loading-sync").show()}}).success(function(i){i=JSON.parse(i);var a="";$.each(i,function(){this.valid?$("td[enrollmentid="+this.enrollmentId+"]").closest("tr").find(".sync-column").html('<img src="'+baseURL+'/img/SyncTrue.png" style="width: 21px;" alt="synced">'):(a+="<b>"+this.studentName+"</b>",this.identificationMessage!=null&&(a+="<br>Ficha do Aluno: "+this.identificationMessage),this.enrollmentMessage!=null&&(a+="<br>Matrícula: "+this.enrollmentMessage),a+="<br><br>")}),a===""?$(".classroom-alert").removeClass("alert-error").addClass("alert-success").text("Matrículas sincronizadas com sucesso!").show():$(".classroom-alert").addClass("alert-error").removeClass("alert-success").html("As seguintes matrículas não foram sincronizadas:<br><br>"+a).show(),$(t).css("pointer-events","auto"),$(".loading-sync").hide()})});$(document).ready(function(){myTeachingDataDialog=$("#teachingdata-dialog-form").dialog({autoOpen:!1,height:530,width:402,modal:!0,draggable:!1,resizable:!1,buttons:[{text:btnCreate,click:function(){var e="#Role";role.val().length!==0&&instructors.val().length!==0||role.val().length===0&&instructors.val().length===0?(addTeachingData(),removeError(e),$(this).dialog("close")):addError(e,"Selecione um cargo")}},{text:btnCancel,click:function(){var e="#Role";removeError(e),$(this).dialog("close")}}]})});$("#newDiscipline").click(function(){$("#teachingdata-dialog-form select").val("").trigger("change"),$("#teachingdata-dialog-form").dialog("open")});$(document).ready(function(){$(function(){$("#js-t-sortable").sortable()}),$("#Classroom_complementary_activity").is(":checked")?$("#complementary_activity").show():$("#complementary_activity").hide(),$("#Classroom_pedagogical_mediation_type").val()==="1"||$("#Classroom_pedagogical_mediation_type").val()==="2"?$("#diff_location_container").show():$("#diff_location_container").hide()});$("#create-dialog-form, #teachingdata-dialog-form, #update-dialog-form").keypress(function(e){e.keyCode===$.ui.keyCode.ENTER&&e.preventDefault()});$(".heading-buttons").css("width",$("#content").width());$(".update-classroom-from-sedsp").click(function(){$("#importClassroomFromSEDSP").modal("show")});$(".import-classroom-button").click(function(){$("#importClassroomFromSEDSP").find("form").submit()});$("#copy-gov-id").click(function(){let e=$("#Classroom_gov_id").val();navigator.clipboard.writeText(e),$("#copy-message").text("Copiado!").fadeIn().delay(1e3).fadeOut()});$("#js-alphabetic-order").click(function(){let e=$("#js-t-sortable").sortable("toArray");$.ajax({url:"?r=classroom/updateDailyOrder",type:"POST",data:{list:e},beforeSend:function(){$("#js-t-sortable").sortable("destroy"),$("#daily").css("opacity",.5)}}).success(function(t){const i=JSON.parse(t),a=[];i.forEach(o=>{const n=document.createElement("li");n.id=o.id,n.className="ui-state-default";const s=document.createElement("span");s.className="t-icon-slip";const c=document.createElement("span");c.textContent=o.daily_order+" "+o.name,n.appendChild(s),n.appendChild(c),a.push(n)}),$("#js-t-sortable").html(a),$("#daily").css("opacity",1),$("#js-t-sortable").sortable()})});function Be(e,t,i,a,o,n){return e.schedules.reduce((s,c)=>{let r="";if(t==c.day&&i==n[1]&&a==n[0]){let l="";c.fault&&c.justification!==null&&(l+="data-toggle='tooltip' data-placement='left' title='"+c.justification+"'"),r=`
                <span class="align-items--center" style='margin-left:5px;'>
                    <a href='javascript:;' style='margin-left:5px;' studentId=${e.studentId} day=${t} data-toggle='tooltip' class='frequency-justification-icon  ${c.fault?"":"hide"}' title=''>
                        <span class='t-icon-annotation icon-color'></span>
                    </a>
                    ${o==1?c.schedule+"°":""}
                    <span class="frequency-checkbox-container" ${c.available?"":"disabled"}>
                        <input class='frequency-checkbox' type='checkbox'
                            ${c.available?"":"disabled"}
                            ${c.fault?"checked":""}
                            classroomId='${$("#classroom").val()}'
                            studentId='${e.studentId}'
                            day='${c.day}'
                            month='${i}'
                            year='${a}'
                            schedule='${c.schedule}'
                            fundamentalMaior='${o}'
                            ${l}
                        />
                    </span>
                </span>`}return s+r},"")}function Ze(e,t,i,a,o,n){return e.students.reduce((s,c)=>s+`
            <div class='justify-content--space-between t-padding-small--top t-padding-small--bottom' style="border-bottom:1px #e8e8e8 solid;">
                <div>${c.studentName}</div>
                <div style='display:flex;'>
                    ${Be(c,t,i,a,o,n)}
                </div>
            </div>`,"")}function Qe(e,t,i){return e.scheduleDays.reduce((a,o)=>{let n=o.day,s=t[1],c=t[0];return a+`
            <div class="ui-accordion-header justify-content--space-between">
                <div>Aula do dia ${o.date}</div>
                <div>
                    <span class="t-icon-down_arrow arrow"></span>
                </div>
            </div>
            <div class='ui-accordion-content'>
                <div style='width: 100%; overflow-x:auto;'>
                    ${Ze(e,n,s,c,i,t)}
                </div>
            </div>`},"")}function He(){if($("#classroom").val()!=="Selecione a turma"&&$("#month").val()!==""&&(!$("#disciplines").is(":visible")||$("#disciplines").val()!=="")){$(".alert-required-fields, .alert-incomplete-data").hide();let e=$("#month").val().split("-"),t=Number($("#classroom option:selected").attr("fundamentalmaior"));jQuery.ajax({type:"POST",url:"?r=classes/getFrequency",cache:!1,data:{classroom:$("#classroom").val(),fundamentalMaior:t,discipline:$("#disciplines").val(),month:e[1],year:e[0]},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$(".table-frequency").css("opacity",.3).css("pointer-events","none"),$(".table-frequency-head").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch").attr("disabled","disabled")},success:function(i){let a=JSON.parse(i);if(a.valid){let o=$('<div id="accordion" class="t-accordeon-secondary"></div>');o.append(Qe(a,e,t)),$("#frequency-container").html(o).show(),$(function(){$("#accordion").accordion({collapsible:!0,icons:null})})}},complete:function(){$(".loading-frequency").hide(),$(".table-frequency").css("opacity",1).css("pointer-events","auto").css("background-color","white"),$(".table-frequency-head").css("opacity",1).css("pointer-events","auto"),$("#classroom, #month, #disciplines, #classesSearch").removeAttr("disabled")}})}else $(".alert-required-fields").show(),$("#frequency-container, .alert-incomplete-data").hide()}$(document).on("click",".frequency-checkbox-container",function(e){e.target===this&&!$(this).hasClass("disabled")&&$(this).find(".frequency-checkbox").prop("checked",!$(this).find(".frequency-checkbox").is(":checked")).trigger("change")});$("#classroom").on("change",function(){$("#frequency-container, .alert-incomplete-data").hide(),$("#disciplines").val("").trigger("change.select2"),$(this).val()!==""?$.ajax({type:"POST",url:"?r=classes/getMonthsAndDisciplines",cache:!1,data:{classroom:$("#classroom").val(),fundamentalMaior:$("#classroom > option:selected").attr("fundamentalMaior")},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$("#classroom, #month, #disciplines").attr("disabled","disabled")},success:function(e){e=JSON.parse(e),e.valid?($("#month").children().remove(),$("#month").append(new Option("Selecione o Mês/Ano","")),$.each(e.months,function(t,i){$("#month").append(new Option(i.name,i.id))}),$("#month option:first").attr("selected","selected").trigger("change.select2"),$("#classroom > option:selected").attr("fundamentalMaior")==="1"?($("#disciplines").children().remove(),$("#disciplines").append(new Option("Selecione a Disciplina","")),$.each(e.disciplines,function(t,i){$("#disciplines").append(new Option(i.name,i.id))}),$("#disciplines option:first").attr("selected","selected").trigger("change.select2"),$(".disciplines-container").show()):$(".disciplines-container").hide(),$(".month-container").show()):($(".alert-incomplete-data").html(e.error).show(),$(".disciplines-container, .month-container").hide())},complete:function(e){$(".loading-frequency").hide(),$("#classroom, #month, #disciplines").removeAttr("disabled")}}):$(".disciplines-container, .month-container").hide()});$(".js-load-frequency").on("change",function(){He()});$(document).on("change",".frequency-checkbox",function(){let e=this,t=$("#month").val().split("-");$.ajax({type:"POST",url:"?r=classes/saveFrequency",cache:!1,data:{classroomId:$(this).attr("classroomId"),day:$(this).attr("day"),month:t[1],year:t[0],schedule:$(this).attr("schedule"),studentId:$(this).attr("studentId"),fault:$(this).is(":checked")?1:0,fundamentalMaior:$(this).attr("fundamentalMaior")},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$(".table-frequency").css("opacity",.3).css("pointer-events","none"),$(".table-frequency-head").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch").attr("disabled","disabled")},complete:function(){$(e).parent().parent().find(".frequency-justification-icon").toggleClass("hide"),$(".loading-frequency").hide(),$(".table-frequency").css("opacity",1).css("pointer-events","auto"),$(".table-frequency-head").css("opacity",1).css("pointer-events","auto"),$("#classroom, #month, #disciplines, #classesSearch").removeAttr("disabled")}})});$(document).on("click",".frequency-justification-icon",function(){let e=$(this).parent().find(".frequency-checkbox");$("#justification-classroomid").val(e.attr("classroomid")),$("#justification-studentid").val(e.attr("studentid")),$("#justification-day").val(e.attr("day")),$("#justification-month").val(e.attr("month")),$("#justification-year").val(e.attr("year")),$("#justification-schedule").val(e.attr("schedule")),$("#justification-fundamentalmaior").val(e.attr("fundamentalmaior")),$(".justification-text").val($(this).parent().find(".frequency-checkbox").attr("title")),$("#save-justification-modal").modal("show")});$("#save-justification-modal").on("shown",function(){$(".justification-text").focus()});$(document).on("click",".btn-save-justification",function(){$.ajax({type:"POST",url:"?r=classes/saveJustification",cache:!1,data:{classroomId:$("#justification-classroomid").val(),studentId:$("#justification-studentid").val(),day:$("#justification-day").val(),month:$("#justification-month").val(),year:$("#justification-year").val(),schedule:$("#justification-schedule").val(),fundamentalMaior:$("#justification-fundamentalmaior").val(),justification:$(".justification-text").val()},beforeSend:function(){$("#save-justification-modal").find(".modal-body").css("opacity",.3).css("pointer-events","none"),$("#save-justification-modal").find("button").attr("disabled","disabled"),$("#save-justification-modal").find(".centered-loading-gif").show()},success:function(e){let t=$(".frequency-checkbox[studentid="+$("#justification-studentid").val()+"][schedule="+$("#justification-schedule").val()+"][day="+$("#justification-day").val()+"][month="+$("#justification-month").val()+"][year="+$("#justification-year").val()+"]").parent().parent().find(".frequency-justification-icon");$(".justification-text").val()==""?t.attr("title","").tooltip("hide"):(t.parent().find(".frequency-checkbox").attr("title",$(".justification-text").val()),t.attr("title",$(".justification-text").val()).tooltip({container:"body"})),$("#save-justification-modal").modal("hide")},complete:function(){$("#save-justification-modal").find(".modal-body").css("opacity",1).css("pointer-events","auto"),$("#save-justification-modal").find("button").removeAttr("disabled"),$("#save-justification-modal").find(".centered-loading-gif").hide()}})});$(document).on("keyup",".justification-text",function(e){e.keyCode==13&&$(".btn-save-justification").trigger("click")});function We(){$(".alert-incomplete-data").hide();var e=Number($("#classroom option:selected").attr("fundamentalmaior")),t=$("#month").val().split("-");jQuery.ajax({type:"POST",url:"?r=classes/getFrequency",cache:!1,data:{classroom:$("#classroom").val(),fundamentalMaior:e,discipline:$("#disciplines").val(),month:t[1],year:t[0]},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$(".table-frequency").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch").attr("disabled","disabled")},success:function(i){var a=JSON.parse(i);if(a.valid){var o="";o+=`
                        <div class='container-frequency-over'>
                        <table class='table-frequency table table-bordered table-striped table-hover'>
                        <thead class='t-accordion__head'>
                        <tr>
                        </tr>`;var n="",s="";$.each(a.students[0].schedules,function(){n+="<th>"+(pad(this.day,2)+"/"+pad(t[1],2))+"/"+t[0]+"</th>",s+="<th class='frequency-checkbox-general frequency-checkbox-container "+(this.available?"":"disabled")+"'><input class='frequency-checkbox' type='checkbox' "+(this.available?"":"disabled")+" classroomId='"+$("#classroom").val()+"' day='"+this.day+"' month='"+t[1]+"' year='"+t[0]+"' schedule='"+this.schedule+"' fundamentalMaior='"+e+"'></th>"}),o+="<tr class='day-row sticky'><th></th>"+n+"<tr class='checkbox-row'><th></th>"+s+"</tr>",o+="</thead></div><tbody class='t-accordion__body'>",$.each(a.students,function(c,r){o+="<tr><td class='student-name'>"+r.studentName+"</td>",$.each(r.schedules,function(l,d){var h="";d.fault&&(d.justification!==null?h+="<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon' title='"+d.justification+"'><i class='fa fa-file-text-o'></i><i class='fa fa-file-text'></i></a>":h+="<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon'><i class='fa fa-file-o'></i><i class='fa fa-file'></i></a>"),o+="<td class='frequency-checkbox-student frequency-checkbox-container "+(this.available?"":"disabled")+"'><input class='frequency-checkbox' type='checkbox' "+(d.available?"":"disabled")+" "+(d.fault?"checked":"")+" classroomId='"+$("#classroom").val()+"' studentId='"+r.studentId+"' day='"+d.day+"' month='"+t[1]+"' year='"+t[0]+"' schedule='"+d.schedule+"' fundamentalMaior='"+e+"'>"+h+"</td>"}),o+="</tr>"}),o+="</tbody></table>",$("#frequency-container").html(o).show(),$(".frequency-checkbox-general").each(function(){var c=$(this).find(".frequency-checkbox").attr("day");$(this).find(".frequency-checkbox").prop("checked",$(".frequency-checkbox-student .frequency-checkbox[day="+c+"]:checked").length===$(".frequency-checkbox-student .frequency-checkbox[day="+c+"]").length)}),$('[data-toggle="tooltip"]').tooltip({container:"body"})}else $("#frequency-container").hide(),$(".alert-incomplete-data").html(a.error).show()},complete:function(i){$(".loading-frequency").hide(),$(".table-frequency").css("opacity",1).css("pointer-events","auto"),$("#classroom, #month, #disciplines, #classesSearch").removeAttr("disabled")}})}$(document).on("click",".frequency-checkbox-container",function(e){e.target===this&&!$(this).hasClass("disabled")&&$(this).find(".frequency-checkbox").prop("checked",!$(this).find(".frequency-checkbox").is(":checked")).trigger("change")});$("#classroom").on("change",function(){$("#frequency-container, .alert-incomplete-data").hide(),$("#disciplines").val("").trigger("change.select2"),$(this).val()!==""?$.ajax({type:"POST",url:"?r=classes/getMonthsAndDisciplines",cache:!1,data:{classroom:$("#classroom").val(),fundamentalMaior:$("#classroom > option:selected").attr("fundamentalMaior")},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$("#classroom, #month, #disciplines").attr("disabled","disabled")},success:function(e){e=JSON.parse(e),e.valid?($("#month").children().remove(),$("#month").append(new Option("Selecione o Mês/Ano","")),$.each(e.months,function(t,i){$("#month").append(new Option(i.name,i.id))}),$("#month option:first").attr("selected","selected").trigger("change.select2"),$("#classroom > option:selected").attr("fundamentalMaior")==="1"?($("#disciplines").children().remove(),$("#disciplines").append(new Option("Selecione a Disciplina","")),$.each(e.disciplines,function(t,i){$("#disciplines").append(new Option(i.name,i.id))}),$("#disciplines option:first").attr("selected","selected").trigger("change.select2"),$(".disciplines-container").show()):$(".disciplines-container").hide(),$(".month-container").show()):($(".alert-incomplete-data").html(e.error).show(),$(".disciplines-container, .month-container").hide())},complete:function(e){$(".loading-frequency").hide(),$("#classroom, #month, #disciplines").removeAttr("disabled")}}):$(".disciplines-container, .month-container").hide()});$("#month, #disciplines").on("change",function(){$("#month").val()!==""&&(!$("#disciplines").is(":visible")||$("#disciplines").val()!=="")?We():$("#frequency-container, .alert-incomplete-data").hide()});$(document).on("change",".frequency-checkbox",function(){var e=this;$.ajax({type:"POST",url:"?r=classes/saveFrequency",cache:!1,data:{classroomId:$(this).attr("classroomId"),day:$(this).attr("day"),month:$(this).attr("month"),year:$(this).attr("year"),schedule:$(this).attr("schedule"),studentId:$(this).attr("studentId"),fault:$(this).is(":checked")?1:0,fundamentalMaior:$(this).attr("fundamentalMaior")},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$(".table-frequency").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch").attr("disabled","disabled")},complete:function(t){$(e).attr("studentId")===void 0?($(".table-frequency tbody .frequency-checkbox[day="+$(e).attr("day")+"][schedule="+$(e).attr("schedule")+"]").prop("checked",$(e).is(":checked")),$(e).is(":checked")?$(".table-frequency tbody .frequency-checkbox[day="+$(e).attr("day")+"][schedule="+$(e).attr("schedule")+"]").each(function(){$(this).parent().find(".frequency-justification-icon").length||$(this).parent().append("<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon'><i class='fa fa-file-o'></i><i class='fa fa-file'></i></a>")}):$(".table-frequency tbody .frequency-checkbox[day="+$(e).attr("day")+"][schedule="+$(e).attr("schedule")+"]").parent().find(".frequency-justification-icon").remove()):$(e).is(":checked")?$(e).parent().append("<a href='javascript:;' data-toggle='tooltip' class='frequency-justification-icon'><i class='fa fa-file-o'></i><i class='fa fa-file'></i></a>"):$(e).parent().find(".frequency-justification-icon").remove(),$(".loading-frequency").hide(),$(".table-frequency").css("opacity",1).css("pointer-events","auto"),$("#classroom, #month, #disciplines, #classesSearch").removeAttr("disabled")}})});$(document).on("click",".frequency-justification-icon",function(){var e=$(this).parent().find(".frequency-checkbox");$("#justification-classroomid").val(e.attr("classroomid")),$("#justification-studentid").val(e.attr("studentid")),$("#justification-day").val(e.attr("day")),$("#justification-month").val(e.attr("month")),$("#justification-year").val(e.attr("year")),$("#justification-schedule").val(e.attr("schedule")),$("#justification-fundamentalmaior").val(e.attr("fundamentalmaior")),$(".justification-text").val($(this).attr("data-original-title")),$("#save-justification-modal").modal("show")});$("#save-justification-modal").on("shown",function(){$(".justification-text").focus()});$(document).on("click",".btn-save-justification",function(){$.ajax({type:"POST",url:"?r=classes/saveJustification",cache:!1,data:{classroomId:$("#justification-classroomid").val(),studentId:$("#justification-studentid").val(),day:$("#justification-day").val(),month:$("#justification-month").val(),year:$("#justification-year").val(),schedule:$("#justification-schedule").val(),fundamentalMaior:$("#justification-fundamentalmaior").val(),justification:$(".justification-text").val()},beforeSend:function(){$("#save-justification-modal").find(".modal-body").css("opacity",.3).css("pointer-events","none"),$("#save-justification-modal").find("button").attr("disabled","disabled"),$("#save-justification-modal").find(".centered-loading-gif").show()},success:function(e){var t=$(".table-frequency tbody .frequency-checkbox[studentid="+$("#justification-studentid").val()+"][day="+$("#justification-day").val()+"][month="+$("#justification-month").val()+"][year="+$("#justification-year").val()+"]").parent().find(".frequency-justification-icon");console.log(t),$(".justification-text").val()==""?(t.html("<i class='fa fa-file-o'></i><i class='fa fa-file'></i>"),t.attr("data-original-title","").tooltip("hide")):(t.html("<i class='fa fa-file-text-o'></i><i class='fa fa-file-text'></i>"),t.attr("data-original-title",$(".justification-text").val()).tooltip({container:"body"})),$("#save-justification-modal").modal("hide")},complete:function(e){$("#save-justification-modal").find(".modal-body").css("opacity",1).css("pointer-events","auto"),$("#save-justification-modal").find("button").removeAttr("disabled"),$("#save-justification-modal").find(".centered-loading-gif").hide()}})});$(document).on("keyup",".justification-text",function(e){e.keyCode==13&&$(".btn-save-justification").trigger("click")});function Ye(){var e=Number($("#classroom option:selected").attr("fundamentalmaior")),t=$("#month").val().split("-");$.ajax({type:"POST",url:"?r=classes/getClassContents",cache:!1,data:{classroom:$("#classroom").val(),month:t[1],year:t[0],fundamentalMaior:e,discipline:$("#disciplines").val()},beforeSend:function(){$(".loading-class-contents").css("display","flex"),$("#widget-class-contents").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch, #classesSearchMobile").attr("disabled","disabled")},success:function(i){i=jQuery.parseJSON(i),i.valid?(createTable(i),$("#print").addClass("show").removeClass("hide"),$("#save").addClass("show--desktop").removeClass("hide"),$("#save-button-mobile").addClass("show--tablet").removeClass("hide"),$("#error-badge").html("")):($("#error-badge").html('<div class="t-badge-info"><span class="t-info_positive t-badge-info__icon"></span>'+i.error+"</div>"),$("#class-contents > thead").html(""),$("#class-contents > tbody").html(""),$("#class-contents").show(),$("#save, #save-button-mobile").addClass("hide")),$("#month_text").html($("#month").find("option:selected").text()),$("#discipline_text").html($("#disciplines").is(":visible")?$("#disciplines").find("option:selected").text():"Todas as Disciplinas")},complete:function(){$(".loading-class-contents").hide(),$("#widget-class-contents").css("opacity",1).css("pointer-events","auto").show(),$("#classroom, #month, #disciplines, #classesSearch, #classesSearchMobile").removeAttr("disabled")}})}$("#classroom").on("change",function(){$("#widget-class-contents, .alert-incomplete-data").hide(),$("#disciplines").val("").trigger("change.select2"),$(this).val()!==""?$.ajax({type:"POST",url:"?r=classes/getMonthsAndDisciplines",cache:!1,data:{classroom:$("#classroom").val(),fundamentalMaior:$("#classroom > option:selected").attr("fundamentalMaior")},beforeSend:function(){$(".loading-frequency").css("display","inline-block"),$("#classroom, #month, #disciplines").attr("disabled","disabled")},success:function(e){e=JSON.parse(e),e.valid?($("#month").children().remove(),$("#month").append(new Option("Selecione o Mês/Ano","")),$.each(e.months,function(t,i){$("#month").append(new Option(i.name,i.id))}),$("#month option:first").attr("selected","selected").trigger("change.select2"),$("#classroom > option:selected").attr("fundamentalMaior")==="1"?($("#disciplines").children().remove(),$("#disciplines").append(new Option("Selecione a Disciplina","")),$.each(e.disciplines,function(t,i){$("#disciplines").append(new Option(i.name,i.id))}),$("#disciplines option:first").attr("selected","selected").trigger("change.select2"),$(".disciplines-container").show()):$(".disciplines-container").hide(),$(".month-container").show()):($(".alert-incomplete-data").html(e.error).show(),$(".disciplines-container, .month-container").hide())},complete:function(e){$(".loading-frequency").hide(),$("#classroom, #month, #disciplines").removeAttr("disabled")}}):$(".disciplines-container, .month-container").hide()});$("#month, #disciplines").on("change",function(){$("#classroom").val()!==""&&$("#month").val()!==""&&(!$("#disciplines").is(":visible")||$("#disciplines").val()!=="")?(Ye(),$("#disciplinesValue").text($("#disciplines option:selected").text()),$("#monthValue").text($("#month option:selected").text()),$("#classroomValue").text($("#classroom option:selected").text())):($("#widget-class-contents").hide(),$("#print, #save, #save-button-mobile").addClass("hide"))});$(document).ready(function(){$("#class-contents").hide()});$(document).on("click","#print",function(){window.print()});$("#save, #save-button-mobile").on("click",function(){$(".alert-save").hide();let e=[];$(".day-row").each(function(){let t=[];$(this).find(".student-diary-of-the-day").each(function(){t.push({id:$(this).attr("studentid"),diary:$(this).val()})}),e.push({day:$(this).attr("day"),diary:$(this).find(".classroom-diary-of-the-day").val(),contents:$(this).find("select.course-classes-select").val(),students:t})}),$.ajax({type:"POST",url:"?r=classes/saveClassContents",cache:!1,data:{classroom:$("#class-contents").attr("classroom"),month:$("#class-contents").attr("month"),year:$("#class-contents").attr("year"),discipline:$("#class-contents").attr("discipline"),fundamentalMaior:$("#class-contents").attr("fundamentalmaior"),classContents:e},beforeSend:function(){$(".loading-class-contents").css("display","flex"),$("#widget-class-contents").css("opacity",.3).css("pointer-events","none"),$("#classroom, #month, #disciplines, #classesSearch, #classesSearchMobile").attr("disabled","disabled")},success:function(t){$(".alert-save").show()},complete:function(t){$(".loading-class-contents").hide(),$("#widget-class-contents").css("opacity",1).css("pointer-events","auto"),$("#classroom, #month, #disciplines, #classesSearch, #classesSearchMobile").removeAttr("disabled")}})});$(".heading-buttons").css("width",$("#content").width());$(document).on("click",".classroom-diary-button",function(){let e=this;$(".classroom-diary-day").val($(e).closest("tr").attr("day")),$(".js-classroom-diary").val($(e).parent().find(".classroom-diary-of-the-day").val()),$(".js-std-classroom-diaries").each(function(){let t=$(e).parent().find(".student-diary-of-the-day[studentid="+$(this).find(".js-student-classroom-diary").attr("studentid")+"]").val();$(this).find(".js-student-classroom-diary").val(t),t!==""?$(this).find(".accordion-title").find(".fa").removeClass("fa-file-o").addClass("fa-file-text-o"):$(this).find(".accordion-title").find(".fa").removeClass("fa-file-text-o").addClass("fa-file-o")}),$("#js-classroomdiary").modal("show")});$(document).on("click",".js-add-classroom-diary",function(){let e=$("#class-contents tbody").find("tr[day="+$(".classroom-diary-day").val()+"]");e.find(".classroom-diary-of-the-day").val($(".js-classroom-diary").val()),$(".js-student-classroom-diary").each(function(){e.find(".student-diary-of-the-day[studentid="+$(this).attr("studentid")+"]").val($(this).val())})});$(document).on("keypress",".js-classroom-diary, .js-student-classroom-diary",function(e){e.which===13&&(e.preventDefault(),this.value=this.value+`
`)});$(document).on("input",".js-student-classroom-diary",function(){$(this).val()===""?$(this).closest(".accordion-group").find(".accordion-title").find(".fa").removeClass("fa-file-text-o").addClass("fa-file-o"):$(this).closest(".accordion-group").find(".accordion-title").find(".fa").removeClass("fa-file-o").addClass("fa-file-text-o")});$(document).on("click",".save",function(){var e=[];$(".parameter-structure-container").find(".success-configs").hide(),$(".parameter-row").each(function(){e.push({id:$(this).find(".parameter-id").val(),value:$(this).find(".parameter-value").val()})}),$.ajax({url:"?r=admin/editInstanceConfigs",type:"POST",data:{configs:e},beforeSend:function(){$(".save-config-loading-gif").show()}}).success(function(t){t=JSON.parse(t),t.valid&&$(".success-configs").html(DOMPurify.sanitize(t.text)).show()}).complete(function(){$(".save-config-loading-gif").hide()})});$(document).on("change","#GradeUnity_edcenso_stage_vs_modality_fk",function(){$(".alert-required-fields, .alert-media-fields").hide(),Z()});$(document).on("keyup",".unity-name",function(e){$(this).closest(".unity").find(".unity-title").html($(this).val())});$(document).on("click",".js-new-unity",function(e){const t=$(".unity").length,i=$(".js-rule-type").select2("val")==="C",a=template`
        <div class='unity column is-three-fifths'>
            <div class='row unity-heading ui-accordion-header'>
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collaps-${t}">
                    <h2 class="unity-title accordion-heading">Unidade: </h2>
                </a>
                <span class="remove-button js-remove-unity t-button-icon-danger t-icon-trash  js-change-cursor"></span>
            </div>
            <div id="collaps-${t}"class=" collapse ${t==0?"in":""}">
                <input type='hidden' class="unity-id">
                <input type="hidden" class="unity-operation" value="create">
                <div class="t-field-text" style="margin-top: 16px">
                    <label class='t-field-text__label--required'>Nome: </label>
                    <input type='text' class='t-field-text__input unity-name' placeholder='1ª Unidade, 2ª Unidade, Recuperação Final, etc.'>
                </div>
                <div class="t-field-select">
                    <label class='t-field-select__label--required'>Modelo: </label>
                    <select class='t-field-select__input js-type-select select-search-on control-input'>
                        ${i?"<option value='UC'>Unidade por conceito</option>":`<option value='U'>Unidade</option>
                                   <option value='UR'>Unidade com recuperação</option>`}
                    </select>
                </div>
                <div class="t-field-select js-calculation ${i?"hide":"show"}" >
                    <label class='t-field-select__label--required'>Forma de cálculo:  </label>
                    <select class='t-field-select__input js-formula-select select-search-on control-input'>
                        ${$(".formulas")[0].innerHTML}
                    </select>
                </div>
                <div class="row">
                    <div class="column">
                        <h4>Modalidades avaliativas: </h4>
                        <p class="subheading">
                        Gerencie todas as formas de avalição que compõe as notas dessa unidade avaliativa
                        </p>
                    </div>
                    <a href="#new-modality" id="new-modality" class="js-new-modality t-button-primary">
                        <img alt="Unidade" src="/themes/default/img/buttonIcon/start.svg">Modalidade
                    </a>
                </div>
                <div class="t-cards js-modality-container"></div>
            </div>
        </div>`;$(".js-grades-structure-container").append(a),$(".js-rule-type").select2("val")==="C"&&($(".js-new-modality").last().trigger("click").hide(),$(".remove-modality").last().hide()),$(".unity").last().find(".js-type-select, .js-formula-select").select2()});$(document).on("change",".js-type-select",function(e){var t=$(this).closest(".unity");$(this).val()==="UR"?(t.find(".js-new-modality").trigger("click").show(),t.find(".js-calculation").show(),t.find(".modality[concept=1]").remove(),t.find(".modality").last().children("label").html('Recuperação: <span class="red">*</span>'),t.find(".modality").last().find(".modality-name").attr("modalitytype","R").css("width","calc(100% - 140px)"),t.find(".modality").last().find(".remove-modality, .weight").remove()):$(this).val()==="UC"?(t.find(".modality").remove(),t.find(".js-new-modality").trigger("click").hide(),t.find(".js-formula-select").val("1").trigger("change"),t.find(".js-calculation").hide(),t.find(".remove-modality").hide(),t.find(".modality-name[modalitytype=R]").closest(".modality").remove(),t.find(".modality").last().attr("concept","1").find(".remove-modality").remove()):(t.find(".js-new-modality").show(),t.find(".js-calculation").show(),t.find(".modality-name[modalitytype=R]").closest(".modality").remove(),t.find(".modality[concept=1]").remove())});$(document).on("change",".js-rule-type",function(e){G(e.target.value)});$(document).on("change",".js-formula-select",function(e){var t=$(this).closest(".unity");$(this).select2("data").text==="Peso"?(t.find(".modality-name[modalitytype=C]").css("width","calc(100% - 240px)"),t.find(".modality-name[modalitytype=C]").parent().append(template`
                    <div class="t-field-text">
                        <label class='t-field-text__label--required'>Peso:</span></label>
                        <input type='text' class='t-field-text__input weight' placeholder='Peso'>
                    </div>
                `)):(t.find(".weight").remove(),t.find(".modality-name[modalitytype=C]").css("width","calc(100% - 140px)"))});$(document).on("keyup",".weight",function(e){var t=this.value;if(!$.isNumeric(t))e.preventDefault(),t="";else{var i=/[1-9]|10/;(t==null?void 0:t.match(i))===null&&(t=""),t>10&&(t=10)}this.value=t});$(document).on("click",".js-new-modality",function(e){e.preventDefault();const t=$(this).closest(".unity"),i=t.find(".js-formula-select").select2("data").text,a=template`
        <div class='modality' concept='0'>
            <input type="hidden" class="modality-id">
            <input type="hidden" class="modality-operation" value="create">
            <div class="row">
                <div class="t-field-text">
                    <label class='t-field-text__label--required'>Nome da modalidade avaliativa: </label>
                    <input type='text' class='modality-name t-field-text__input' modalitytype='C' placeholder='Prova, Avaliação, Trabalho, etc.' style='width: calc(100% - 222px);'>
                    ${i==="Peso"?template`
                                <div class="t-field-text">
                                    <label class='t-field-text__label--required'>Peso:</span></label>
                                    <input type='text' class='t-field-text__input weight form-control' placeholder='Peso'>
                                </div>`:""}
                </div>
                <span class="remove-modality remove-button t-button-icon-danger t-icon-trash"></span>
            </div>
        </div>`;$(a).appendTo(t.find(".js-modality-container"))});$(document).on("click",".js-remove-unity",function(e){const t=$(this).closest(".unity");t.find(".unity-id").val()===""?t.remove():confirm("Ao remover um unidade, você está pagando TODAS as notas vinculadas a ela, em todas as disciplinas. Tem certeza que deseja seguir?")&&($(this).children(".modality").find(".modality-operation").val("remove"),t.find(".unity-operation").val("remove"),t.hide())});$(document).on("click",".remove-modality",function(e){const t=$(this).closest(".modality"),i=t.find(".modality-id").val()==="";t.find(".modality-operation").val("remove"),t.hide(),i&&t.remove()});$(document).on("click",".save",function(e){B()&&J(!1)});$(document).on("click",".save-and-reply",function(e){B()&&($("#js-saveandreply-modal").modal("show"),$(".reply-option[value=S]").prop("checked",!0))});$(document).on("click",".js-save-and-reply-button",function(e){J(!0)});$(document).on("change",".js-has-final-recovery",function(e){const t=$(this).is(":checked"),i=$(".final-recovery-unity-id").val()==="";t?($(".js-recovery-form").show(),i?$(".final-recovery-unity-operation").val("create"):$(".final-recovery-unity-operation").val("update")):($(".js-recovery-form").hide(),i||$(".final-recovery-unity-operation").val("delete"))});function G(e){e==="C"?($(".numeric-fields").hide(),$(".js-recovery-form").hide(),$(".final-recovery-unity-operation").val("delete"),$("select.js-type-select").html("<option value='UC' selected>Unidade por conceito</option>"),$(".js-calculation").hide(),$(".remove-modality").hide()):e==="N"&&($(".numeric-fields").show(),$(".js-has-final-recovery").trigger("change"),$("select.js-type-select").html(` <option value='U'>Unidade</option>
        <option value='UR'>Unidade com recuperação</option>`),$(".js-calculation").show(),$(".js-new-modality").show(),$(".remove-modality").show()),$("select.js-type-select").select2()}function J(e){const t=[];$(".unity").each(function(){const i=[];$(this).find(".modality").each(function(){i.push({id:$(this).find(".modality-id").val(),name:$(this).find(".modality-name").val(),type:$(this).find(".modality-name").attr("modalitytype"),weight:$(this).find(".weight").length?$(this).find(".weight").val():null,operation:$(this).find(".modality-operation").val()})}),t.push({id:$(this).find(".unity-id").val(),name:$(this).find(".unity-name").val(),type:$(this).find("select.js-type-select").val(),formula:$(this).find("select.js-formula-select").val(),operation:$(this).find(".unity-operation").val(),modalities:i})}),$.ajax({type:"POST",url:"?r=admin/saveUnities",cache:!1,data:{stage:$("#GradeUnity_edcenso_stage_vs_modality_fk").val(),unities:t,approvalMedia:$(".approval-media").val(),hasFinalRecovery:$("#has_final_recovery").is(":checked"),finalRecovery:{id:$(".final-recovery-unity-id").val(),name:$(".final-recovery-unity-name").val(),type:$(".final-recovery-unity-type").val(),grade_calculation_fk:$(".calculation-final-media").select2("val"),operation:$(".final-recovery-unity-operation").val()},finalRecoverMedia:$(".final-recover-media").val(),finalMediaCalculation:$(".calculation-final-media").select2("val"),reply:e?$(".reply-option:checked").val():"",ruleType:$(".js-rule-type").select2("val")},beforeSend:function(i){$(".alert-media-fields").addClass("alert-warning").removeClass("alert-success").text("Atualizando resultados dos alunos, o processo pode demorar...").show(),$(".buttons a, .js-grades-structure-container").css("opacity","0.4").css("pointer-events","none"),$("#GradeUnity_edcenso_stage_vs_modality_fk").attr("disabled","disabled"),$(".save-unity-loading-gif").css("display","inline-block")},success:function(i){i=JSON.parse(i),i.valid&&($(".alert-required-fields").addClass("alert-success").removeClass("alert-error").text("Estrutura de notas cadastrada com sucesso!").show(),Z())},error:function(i){let a="Um erro inesperado aconteceu no servidor, não foi possível completar operação";i.status==400&&(a=i.responseText),$(".alert-required-fields").addClass("alert-error").removeClass("alert-success").text(a).show()},complete:function(){$(".alert-media-fields").removeClass("alert-warning").addClass("alert-success").text("Médias atualizadas com sucesso!"),$("html, body").animate({scrollTop:0},"fast"),$(".buttons a, .js-grades-structure-container").css("opacity","1").css("pointer-events","auto"),$("#GradeUnity_edcenso_stage_vs_modality_fk").removeAttr("disabled"),$(".save-unity-loading-gif").hide()}})}function B(){$(".alert-required-fields, .alert-media-fields").hide();let e=!0,t="";if($(".js-rule-type").select2("val")==="N"&&($(".approval-media").val()===""||$(".js-has-final-recovery").is(":checked")&&$(".final-recover-media").val()==="")?(e=!1,t="Os campos de média são obrigatórios."):$(".js-rule-type").select2("val")==="N"&&$(".js-has-final-recovery").is(":checked")&&$(".approval-media").val()<$(".final-recover-media").val()&&(e=!1,t="A média de recuperação final não pode ser superior à de aprovação."),e)if($(".unity").length){let i=0,a=0,o=[];$(".unity").each(function(n){if($(this).find(".unity-name").val()==="")return e=!1,t="Preencha o nome das unidades.",!1;if($(this).find(".modality").each(function(){if($(this).find(".modality-name").val()==="")return e=!1,t="Preencha o nome das modalidades.",!1;if($(this).find(".weight").val()==="")return e=!1,t="Preencha o peso das modalidades.",!1}),$(this).find("select.js-type-select").val()==="UC"&&i++,$(this).find("select.js-type-select").val()==="UR"){if(!$(this).find(".modality-name[modalitytype=C]").length)return e=!1,t='Unidades do modelo "Unidade com recuperação" requer duas ou mais modalidades.',!1}else if(!$(this).find(".modality-name").length)return e=!1,t="Não se pode cadastrar unidades sem modalidade.",!1;if(n===0&&($(this).find("select.js-type-select").val()==="RF"||$(this).find("select.js-type-select").val()==="RS"))return e=!1,t="Uma unidade de recuperação semestral ou final não podem ser a primeira.",!1;if(a===2&&$(this).find("select.js-type-select").val()!=="RF")return e=!1,t="Não pode haver unidades após a 2ª recuperação semestral.",!1;$(this).find("select.js-type-select").val()==="RS"&&(a++,o.push(n))}),o.length&&o[1]-o[0]===1&&(e=!1,t="Não pode haver 02 recuperações semestrais seguidas."),a!==0&&a!==2&&(e=!1,t="Quando utilizadas, devem haver 02 recuperações semestrais."),i>0&&i!==$(".unity").length&&(e=!1,t="Quando uma unidade por conceito for utilizada, nenhum outro modelo pode ser utilizado.")}else e=!1,t="Não se pode cadastrar uma estrutura de notas sem unidade.";return e||($(".alert-required-fields").addClass("alert-error").removeClass("alert-success").text(t).show(),$("html, body").animate({scrollTop:0},"fast")),e}function Z(){$("#GradeUnity_edcenso_stage_vs_modality_fk").val()!==""?$.ajax({type:"POST",url:"?r=admin/getUnities",cache:!1,data:{stage:$("#GradeUnity_edcenso_stage_vs_modality_fk").val()},beforeSend:function(e){$(".js-grades-structure-loading").css("display","inline-block"),$(".js-grades-structure-container").css("pointer-events","none").css("opacity","0.4")},success:function(e){e=JSON.parse(e),$(".stagemodalityname").text(e.stageName),$(".stagename").text($("#GradeUnity_edcenso_stage_vs_modality_fk").select2("data").text),$(".js-grades-structure-container").children(".unity").remove(),$(".approval-media").val(e.approvalMedia),$("#has_final_recovery").prop("checked",e.hasFinalRecovery),$(".calculation-final-media").select2("val",e.mediaCalculation),$(".js-rule-type").select2("val",e.ruleType),$(".final-recover-media").val(e.finalRecoverMedia),$(".final-recovery-unity-operation").val(e.final_recovery!==null?"update":"create"),$(".final-recovery-unity-id").val(e.final_recovery.id),$(".final-recovery-unity-name").val(e.final_recovery.name),$(".final-recovery-unity-calculation").select2("val",e.final_recovery.grade_calculation_fk),$(".final-recover-media").val(e.finalRecoverMedia),e.hasFinalRecovery?$(".js-recovery-form").show():$(".js-recovery-form").hide(),$(".js-grades-structure-container, .js-grades-rules-container").show(),Object.keys(e.unities).length&&$.each(e.unities,function(t){$(".js-new-unity").trigger("click");const i=$(".unity").last();i.find(".unity-name").val(this.name),i.find(".unity-title").html(this.name),i.find(".unity-id").val(this.id),i.find("select.js-type-select").val(this.type).trigger("change"),i.find("select.js-formula-select").val(this.grade_calculation_fk).trigger("change"),i.find(".modality").remove(),$.each(this.modalities,function(a){i.find(".js-new-modality").trigger("click");let o=i.find(".modality").last();o.find(".modality-id").val(this.id),o.find(".modality-name").val(this.name),o.find(".modality-operation").val("update"),o.find(".weight").val(this.weight)})}),$(".grades-buttons").css("display","flex"),$(".js-grades-structure-container, .js-grades-rules-container").show(),$(".js-grades-structure-loading").hide(),$(".js-grades-structure-container").css("pointer-events","auto").css("opacity","1"),G(e.ruleType)}}):$(".js-grades-structure-container, .grades-buttons,  .js-grades-rules-container").hide(),$("#accordion").accordion()}$(document).on("keyup",".approval-media, .final-recover-media",function(e){let t=this.value;if(!$.isNumeric(t))e.preventDefault(),t="";else{const i=/^(100|\d{1,2}(\.\d)?)$|^\d(\.(\d)?)?$/,a=t==null?void 0:t.match(i);a===null?t="":!a&&t>10?t=10:!a&&t==0&&(t="")}this.value=t});var v=!1;$(".auditory-initial-date, .auditory-final-date").mask("99/99/9999");$(".auditory-initial-date").datepicker({language:"pt-BR",format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0,allowInputToggle:!0,disableTouchKeyboard:!0,keyboardNavigation:!1,orientation:"bottom left",clearBtn:!0,maxViewMode:2,startDate:"01/01/"+$(".school-year").val(),endDate:"31/12/"+$(".school-year").val()}).on("changeDate",function(e,t){if($(".auditory-initial-date").val()!==""&&$(".auditory-initial-date").val().length==10&&$(".auditory-final-date").val()!==""&&$(".auditory-final-date").val().length==10){var i=$(".auditory-initial-date").val().split("/"),a=t?new Date(i[2],i[1]-1,i[0],0,0,0):new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate(),0,0,0),o=$(".auditory-final-date").val().split("/"),n=new Date(o[2],o[1]-1,o[0],0,0,0);n<a?v=!1:v=!0}else v=!1}).on("clearDate",function(e){v=!1});$(".auditory-final-date").datepicker({language:"pt-BR",format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0,allowInputToggle:!0,disableTouchKeyboard:!0,keyboardNavigation:!1,orientation:"bottom left",clearBtn:!0,maxViewMode:2,startDate:"01/01/"+$(".school-year").val(),endDate:"31/12/"+$(".school-year").val()}).on("changeDate",function(e){if($(".auditory-initial-date").val()!==""&&$(".auditory-initial-date").val().length==10&&$(".auditory-final-date").val()!==""&&$(".auditory-final-date").val().length==10){var t=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate(),0,0,0),i=$(".auditory-initial-date").val().split("/"),a=new Date(i[2],i[1]-1,i[0],0,0,0);t<a?v=!1:v=!0}else v=!1}).on("clearDate",function(e){v=!1});$(document).on("click","#loadtable",function(){$(".alert-required-fields").hide(),v?($.fn.DataTable.isDataTable(".auditory-table")?Q.ajax.reload(null,!0):Ke(),$(".auditory-table-container").show()):($(".alert-required-fields").show(),$(".auditory-table-container").hide())});var Q;function Ke(){Q=$(".auditory-table").DataTable({processing:!0,serverSide:!0,searching:!1,ajax:{type:"POST",url:"/index.php?r=admin/getAuditoryLogs",data:function(e){e.school=$("#log-school").val(),e.action=$("#log-action").val(),e.user=$("#log-user").val(),e.initialDate=$(".auditory-initial-date").val(),e.finalDate=$(".auditory-final-date").val()},beforeSend:function(){$(".auditory-table").css("opacity","0.4"),$(".loading-auditory").css("display","inline-block"),$("#loadTable").addClass("disabled"),$(".dataTables_processing").hide()},complete:function(e){$(".auditory-table").css("opacity","1"),$(".loading-auditory").hide(),$("#loadTable").removeClass("disabled")}},autoWidth:!1,sorting:[[4,"desc"]],fixedColumns:!0,columns:[{data:"school"},{data:"user"},{data:"action",bSortable:!1},{data:"event",bSortable:!1},{data:"date"}],language:{sEmptyTable:"Nenhum registro encontrado.",sInfo:"Mostrando de _START_ até _END_ de _TOTAL_ registros",sInfoEmpty:"Mostrando 0 até 0 de 0 registros",sInfoFiltered:"(Filtrados de _MAX_ registros)",sInfoPostFix:"",sInfoThousands:".",sLengthMenu:"_MENU_ resultados por página",sLoadingRecords:"Carregando...",sProcessing:"Processando...",sZeroRecords:"Nenhum registro encontrado.",sSearch:"Pesquisar <i class='fa fa-question-circle search-info' data-toggle='tooltip' data-placement='bottom' title='Para pesquisar por múltiplas informações simultaneamente, basta separar as palavras-chave utilizando a tecla de ESPAÇO.'></i>",oPaginate:{sNext:"Próximo",sPrevious:"Anterior",sFirst:"Primeiro",sLast:"Último"},oAria:{sSortAscending:": Ordenar colunas de forma ascendente",sSortDescending:": Ordenar colunas de forma descendente"}}})}$(document).on("click",".collapse-icon",function(){$(this).hasClass("fa-plus-square")?($(this).removeClass("fa-plus-square").addClass("fa-minus-square"),$(this).closest(".conflict-container").find(".conflict-values").show()):($(this).addClass("fa-plus-square").removeClass("fa-minus-square"),$(this).closest(".conflict-container").find(".conflict-values").hide())});$(document).ready(function(){$("#yw0_c3").css("display","none"),$(".filters :nth-child(4)").css("display","none")});$(document).ajaxComplete(function(){$("#yw0_c3").css("display","none"),$(".filters :nth-child(4)").css("display","none")});$("#import-file-dialog").dialog({autoOpen:!1,height:190,width:380,modal:!0,draggable:!1,resizable:!1,buttons:[{text:btnImport,click:function(){$("#import-file-form").submit(),$(this).dialog("close")}},{text:btnCancel,click:function(){$(this).dialog("close")}}]});$("#syncImport-file-dialog").dialog({autoOpen:!1,height:190,width:380,modal:!0,draggable:!1,resizable:!1,buttons:[{text:btnImport,click:function(){$("#progressoSyncImport").show(),$("#syncImport-file-form").submit()}},{text:btnCancel,click:function(){$(this).dialog("close")}}]});$(document).ready(function(){$("#showPassword").click(function(){var e=document.querySelector("#Users_password"),t=e.type;t==="password"?e.type="text":e.type="password",t==="password"?$(this).removeClass("t-icon-eye").addClass("t-icon-eye_hash"):$(this).removeClass("t-icon-eye_hash").addClass("t-icon-eye")}),$("#showPasswordConfirm").click(function(){var e=document.querySelector("#Confirm"),t=e.type;t==="password"?e.type="text":e.type="password",t==="password"?$(this).removeClass("t-icon-eye").addClass("t-icon-eye_hash"):$(this).removeClass("t-icon-eye_hash").addClass("t-icon-eye")})});$(form+"name").focusout(function(){var e="#"+$(this).attr("id");$(e).val($(e).val().toUpperCase()),validateSchoolName($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"O campo aceita somente caracteres de A a Z, 0 a 9, ª, º, espaço e -. Tamanho mínimo: 4."))});$(form+"username").focusout(function(){var e="#"+$(this).attr("id");validateLogin($(e).val())?removeError(e):($(e).attr("value",""),addError(e,"O campo deve possuir no mínimo 4 caracteres."))});$(form+"password").focusout(function(){console.log($(this).attr("id"));var e="#"+$(this).attr("id");validatePassword($(e).val())?removeError(e):addError(e,"O campo deve possuir no mínimo 6 caracteres.")});$("#Confirm").focusout(function(){var e="#"+$(this).attr("id"),t=form+"password";$(e).val()!=$(t).val()?($(e).attr("value",""),addError(e,"Campo não está dentro das regras.")):removeError(e)});$("#Users_password").attr("value","");$(".js-show-instructor-input").val()==="instructor"&&$(".js-instructor-input").show();$(".js-show-instructor-input").on("change",function(){$(this).val()==="instructor"?$(".js-instructor-input").show():($(".js-instructor-input").hide(),$(".js-instructor-select").val(""))});$(".js-instructor-select").on("change",function(){if($(".js-chage-name").val()===""){const e=$(this).find(":selected").text();$(".js-chage-name").val(e)}});$("#yw0_c3").hide();$("#yw0_c2").text("Ações");$("#yw0_c2").css("width","100px");$("#yw0_c2").css("text-align","center");$("#save").on("click",function(e){e.preventDefault();var t=new Array,i=0;$(".stage-value").each(function(){$(this).val()!="null"&&(t[i]={idx:$(this).data("student-id"),val:$(this).val()},i++)});var a=JSON.stringify(t);$.ajax({data:{data:a},dataType:"json",type:"POST",url:saveMultiStage,success:function(o){}}),location.reload()});
